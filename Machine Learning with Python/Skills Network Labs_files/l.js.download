/**
 * Noticeable JavaScript SDK - Every change matters.
 *
 * @author Noticeable Team (https://noticeable.io)
 * @date Thu Sep 14 2023 14:28:39 GMT+0000 (Coordinated Universal Time)
 * @version 3.1.0 (commit bcfe950)
 *
 * Copyright (c) 2017-2023 Noticeable 
 */
!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(){n=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a='function'==typeof Symbol?Symbol:{},o=a.iterator||'@@iterator',s=a.asyncIterator||'@@asyncIterator',u=a.toStringTag||'@@toStringTag';function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},'')}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new O(r||[]);return i(o,'_invoke',{value:w(e,n,s)}),o}function d(e,t,n){try{return{type:'normal',arg:e.call(t,n)}}catch(e){return{type:'throw',arg:e}}}e.wrap=l;var p={};function h(){}function _(){}function f(){}var g={};c(g,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(C([])));v&&v!==t&&r.call(v,o)&&(g=v);var y=f.prototype=h.prototype=Object.create(g);function E(e){['next','throw','return'].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(i,a,o,s){var u=d(e[i],e,a);if('throw'!==u.type){var c=u.arg,l=c.value;return l&&'object'==typeof l&&r.call(l,'__await')?t.resolve(l.__await).then((function(e){n('next',e,o,s)}),(function(e){n('throw',e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n('throw',e,o,s)}))}s(u.arg)}var a;i(this,'_invoke',{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,n){var r='suspendedStart';return function(i,a){if('executing'===r)throw new Error('Generator is already running');if('completed'===r){if('throw'===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===p)continue;return s}}if('next'===n.method)n.sent=n._sent=n.arg;else if('throw'===n.method){if('suspendedStart'===r)throw r='completed',n.arg;n.dispatchException(n.arg)}else'return'===n.method&&n.abrupt('return',n.arg);r='executing';var u=d(e,t,n);if('normal'===u.type){if(r=n.done?'completed':'suspendedYield',u.arg===p)continue;return{value:u.arg,done:n.done}}'throw'===u.type&&(r='completed',n.method='throw',n.arg=u.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,'throw'===n&&e.iterator.return&&(t.method='return',t.arg=void 0,I(e,t),'throw'===t.method)||'return'!==n&&(t.method='throw',t.arg=new TypeError('The iterator does not provide a \''+n+'\' method')),p;var i=d(r,e.iterator,t.arg);if('throw'===i.type)return t.method='throw',t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,'return'!==t.method&&(t.method='next',t.arg=void 0),t.delegate=null,p):a:(t.method='throw',t.arg=new TypeError('iterator result is not an object'),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(T,this),this.reset(!0)}function C(e){if(e||''===e){var t=e[o];if(t)return t.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(typeof e+' is not iterable')}return _.prototype=f,i(y,'constructor',{value:f,configurable:!0}),i(f,'constructor',{value:_,configurable:!0}),_.displayName=c(f,u,'GeneratorFunction'),e.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===_||'GeneratorFunction'===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,u,'GeneratorFunction')),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),c(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(y),c(y,u,'Generator'),c(y,o,(function(){return this})),c(y,'toString',(function(){return'[object Generator]'})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)'t'===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if('throw'===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type='throw',o.arg=e,t.next=n,r&&(t.method='next',t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if('root'===a.tryLoc)return n('end');if(a.tryLoc<=this.prev){var s=r.call(a,'catchLoc'),u=r.call(a,'finallyLoc');if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error('try statement without catch or finally');if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,'finallyLoc')&&this.prev<i.finallyLoc){var a=i;break}}a&&('break'===e||'continue'===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method='next',this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if('throw'===r.type){var i=r.arg;S(n)}return i}}throw new Error('illegal catch attempt')},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},'next'===this.method&&(this.arg=void 0),p}},e}function r(e){return r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},r(e)}function i(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,'next',e)}function u(e){i(o,r,a,s,u,'throw',e)}s(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,'prototype',{writable:!1}),e}function c(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function');e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,'prototype',{writable:!1}),t&&p(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(){if('undefined'==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if('function'==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e,t,n){return _=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},_.apply(null,arguments)}function f(e){var t='function'==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf('[native code]')))return e;var n;if('function'!=typeof e)throw new TypeError('Super expression must either be null or a function');if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)},f(e)}function g(e){if(void 0===e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return e}function m(e){var t=h();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&('object'==typeof t||'function'==typeof t))return t;if(void 0!==t)throw new TypeError('Derived constructors may only return object or undefined');return g(e)}(this,n)}}function v(){return v='undefined'!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},v.apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:'undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||b(e,t)||function(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function E(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if('undefined'!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e['@@iterator'])return Array.from(e)}(e)||b(e)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function b(e,t){if(e){if('string'==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return'Object'===n&&e.constructor&&(n=e.constructor.name),'Map'===n||'Set'===n?Array.from(e):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n='undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&'number'==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function T(e){var t=function(e,t){if('object'!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||'default');if('object'!=typeof r)return r;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===t?String:Number)(e)}(e,'string');return'symbol'==typeof t?t:String(t)}var S=function(e){return e.PLAN_UPGRADE_REQUIRED='plan-upgrade-required',e.PROJECT_DATA_MISSING='project-data-missing',e.WIDGET_ALREADY_RENDERED='widget-already-rendered',e.WIDGET_DATA_MISSING='widget-data-missing',e.WIDGET_DISABLED='widget-disabled',e.WIDGET_DISABLED_MOBILE='widget-disabled-mobile',e}({});function O(e){throw new Error(e)}var C=function(e){return e.WIDGET_CLOSED='widget:closed',e.WIDGET_HIDDEN='widget:hidden',e.WIDGET_HEADER_LINK_CLICKED='widget:header:link:clicked',e.WIDGET_NOTIFICATION_EMAIL_SUBSCRIBED='widget:notification:email:subscribed',e.WIDGET_NOTIFICATION_PUSH_SUBSCRIBED='widget:notification:push:subscribed',e.WIDGET_OPENED='widget:opened',e.WIDGET_PUBLICATION_COMMENT_CREATED='widget:publication:comment:created',e.WIDGET_PUBLICATION_REACTION_CREATED='widget:publication:reaction:created',e.WIDGET_PUBLICATION_REACTION_UPDATED='widget:publication:reaction:updated',e.WIDGET_PUBLICATION_SUMMARY_CLICKED='widget:publication_summary:clicked',e.WIDGET_PUBLICATION_UNREAD_COUNT_CHANGED='widget:publication:unread_count:changed',e.WIDGET_PUBLICATION_UNSEEN_COUNT_CHANGED='widget:publication:unseen_count:changed',e.WIDGET_READY='widget:ready',e.WIDGET_REFRESHED='widget:refreshed',e.WIDGET_RENDERING_ABORTED='widget:rendering:aborted',e.WIDGET_TRIGGER_READY='widget:trigger:ready',e.WIDGET_TRIGGER_REFRESHED='widget:trigger:refreshed',e.WIDGET_TRIGGER_VIEW_CLICKED='widget:trigger_view:clicked',e.WIDGET_TRIGGER_VIEW_MOUSE_ENTERED='widget:trigger_view:mouse_entered',e.WIDGET_TRIGGER_VIEW_MOUSE_LEFT='widget:trigger_view:mouse_left',e.WIDGET_VISIBLE='widget:visible',e.WIDGET_WIDGET_VIEW_MOUSE_ENTERED='widget:widget_view:mouse_entered',e.WIDGET_WIDGET_VIEW_MOUSE_LEFT='widget:widget_view:mouse_left',e}({}),A=function(){function e(){o(this,e),c(this,'_listeners',void 0),this._listeners=new Map}return u(e,[{key:'dispatchEvent',value:function(e,t,n){var r=this._listeners.get(e);if(r){var i=r.get(t);i&&i({detail:n,resourceId:e,type:t})}}},{key:'hasListener',value:function(e){var t=this._listeners.get(e);if(!t)return!1;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(void 0!==t.get(s))return!0}return!1}},{key:'removeListener',value:function(t,n){e._checkEventSupported(n);var r=this._listeners.get(t);return!!r&&r.delete(n)}},{key:'removeListeners',value:function(e){return this._listeners.delete(e)}},{key:'removeListenersByEventType',value:function(e){var t,n=!1,r=I(this._listeners);try{for(r.s();!(t=r.n()).done;){var i=y(t.value,2),a=i[0];i[1];n=n||this._listeners[a].delete(e)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:'setListener',value:function(t,n,r){e._checkEventSupported(t);var i=this._listeners.get(n);i||(i=new Map),i.set(t,r),this._listeners.set(n,i)}}],[{key:'_checkEventSupported',value:function(e){Object.values(C).includes(e)||O('Unknown event name: '+e)}}]),e}(),N=function(e){return e[e.DEBUG=0]='DEBUG',e[e.INFO=1]='INFO',e[e.WARNING=2]='WARNING',e[e.ERROR=3]='ERROR',e}({}),R=function(){function e(){o(this,e)}return u(e,null,[{key:'debug',value:function(t){if(this._level<=N.DEBUG){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e._log('debug',t,r)}}},{key:'error',value:function(t){if(this._level<=N.ERROR){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e._log('error',t,r)}}},{key:'info',value:function(t){if(this._level<=N.INFO){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e._log('info',t,r)}}},{key:'setLevel',value:function(e){this._level=e}},{key:'warn',value:function(t){if(this._level<=N.WARNING){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e._log('warn',t,r)}}},{key:'_log',value:function(t,n,r){window.console&&console[t]&&console[t].apply(console,[''.concat(e.PREFIX).concat(n)].concat(E(r)))}}]),e}();c(R,'PREFIX','[noticeable] '),c(R,'_level',N.INFO);!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a='function'==typeof Symbol?Symbol:{},o=a.iterator||'@@iterator',s=a.asyncIterator||'@@asyncIterator',u=a.toStringTag||'@@toStringTag';function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},'')}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new R(r||[]);return i(o,'_invoke',{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:'normal',arg:e.call(t,n)}}catch(e){return{type:'throw',arg:e}}}e.wrap=l;var p='suspendedStart',h='suspendedYield',_='executing',f='completed',g={};function m(){}function v(){}function y(){}var E={};c(E,o,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(D([])));w&&w!==n&&r.call(w,o)&&(E=w);var I=y.prototype=m.prototype=Object.create(E);function T(e){['next','throw','return'].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,s){var u=d(e[i],e,a);if('throw'!==u.type){var c=u.arg,l=c.value;return l&&'object'==typeof l&&r.call(l,'__await')?t.resolve(l.__await).then((function(e){n('next',e,o,s)}),(function(e){n('throw',e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n('throw',e,o,s)}))}s(u.arg)}var a;i(this,'_invoke',{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function O(e,n,r){var i=p;return function(a,o){if(i===_)throw new Error('Generator is already running');if(i===f){if('throw'===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===g)continue;return u}}if('next'===r.method)r.sent=r._sent=r.arg;else if('throw'===r.method){if(i===p)throw i=f,r.arg;r.dispatchException(r.arg)}else'return'===r.method&&r.abrupt('return',r.arg);i=_;var c=d(e,n,r);if('normal'===c.type){if(i=r.done?f:h,c.arg===g)continue;return{value:c.arg,done:r.done}}'throw'===c.type&&(i=f,r.method='throw',r.arg=c.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,'throw'===r&&e.iterator.return&&(n.method='return',n.arg=t,C(e,n),'throw'===n.method)||'return'!==r&&(n.method='throw',n.arg=new TypeError('The iterator does not provide a \''+r+'\' method')),g;var a=d(i,e.iterator,n.arg);if('throw'===a.type)return n.method='throw',n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,'return'!==n.method&&(n.method='next',n.arg=t),n.delegate=null,g):o:(n.method='throw',n.arg=new TypeError('iterator result is not an object'),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(A,this),this.reset(!0)}function D(e){if(e||''===e){var n=e[o];if(n)return n.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(typeof e+' is not iterable')}return v.prototype=y,i(I,'constructor',{value:y,configurable:!0}),i(y,'constructor',{value:v,configurable:!0}),v.displayName=c(y,u,'GeneratorFunction'),e.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===v||'GeneratorFunction'===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,'GeneratorFunction')),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(I),c(I,u,'Generator'),c(I,o,(function(){return this})),c(I,'toString',(function(){return'[object Generator]'})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method='next',this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)'t'===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if('throw'===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type='throw',s.arg=e,n.next=r,i&&(n.method='next',n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if('root'===o.tryLoc)return i('end');if(o.tryLoc<=this.prev){var u=r.call(o,'catchLoc'),c=r.call(o,'finallyLoc');if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error('try statement without catch or finally');if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,'finallyLoc')&&this.prev<i.finallyLoc){var a=i;break}}a&&('break'===e||'continue'===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method='next',this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if('throw'===r.type){var i=r.arg;N(n)}return i}}throw new Error('illegal catch attempt')},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},'next'===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){'object'==typeof globalThis?globalThis.regeneratorRuntime=t:Function('r','regeneratorRuntime = r')(t)}}({exports:{}});var D,P=function(){function e(t){o(this,e),c(this,'_autoRefreshTimer',void 0),c(this,'_projects',void 0),c(this,'_publicationDataCache',void 0),c(this,'_widgets',void 0),this._projects=new Set,this._widgets=t,this._configurePageVisibilityListener()}var t;return u(e,[{key:'_configurePageVisibilityListener',value:function(){var e;void 0!==document.hidden?e='visibilitychange':void 0!==document.msHidden?e='msvisibilitychange':void 0!==document.webkitHidden&&(e='webkitvisibilitychange'),void 0===document.addEventListener||void 0===document.hidden?R.warn('Your browser does not support the Page Visibility API. We suggest upgrading your browser to get a full experience'):document.addEventListener(e,this._onPageVisibilityChange.bind(this),!1)}},{key:'_onPageVisibilityChange',value:function(){document.hidden?this.stop():this.start(!0)}},{key:'_refresh',value:(t=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d,p,h,_,f,g,m,v;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._publicationDataCache){e.next=2;break}return e.abrupt('return');case 2:R.debug('Starting auto-refresh iteration...'),t=new Map,r=I(this._widgets),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=16;break}if(a=y(i.value,2),o=a[0],s=a[1],!this._projects.has(s.projectId)){e.next=14;break}return e.next=12,s.getPublicationState();case 12:u=e.sent,t.set(o,u);case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:c=I(this._projects);try{for(c.s();!(l=c.n()).done;)d=l.value,R.debug('Invalidating publication data for project '.concat(d)),this._publicationDataCache.invalidate(d)}catch(e){c.e(e)}finally{c.f()}p=I(this._widgets),e.prev=27,p.s();case 29:if((h=p.n()).done){e.next=43;break}if(_=y(h.value,2),f=_[0],g=_[1],!this._projects.has(g.projectId)){e.next=41;break}return m=t.get(f),R.debug('Refreshing widget '.concat(f)),e.next=36,g.refresh();case 36:return e.next=38,g.getPublicationState();case 38:v=e.sent,(null==m?void 0:m.unreadCount)!==v.unreadCount&&g.eventRegistry.dispatchEvent(g.id,C.WIDGET_PUBLICATION_UNREAD_COUNT_CHANGED,{value:v.unreadCount}),(null==m?void 0:m.unseenCount)!==v.unseenCount&&g.eventRegistry.dispatchEvent(g.id,C.WIDGET_PUBLICATION_UNSEEN_COUNT_CHANGED,{value:v.unseenCount});case 41:e.next=29;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(27),p.e(e.t1);case 48:return e.prev=48,p.f(),e.finish(48);case 51:case'end':return e.stop()}}),e,this,[[5,18,21,24],[27,45,48,51]])}))),function(){return t.apply(this,arguments)})},{key:'add',value:function(e){this._projects.add(e),this.start()}},{key:'delete',value:function(e){this._projects.delete(e),this._autoRefreshTimer&&0===this._projects.size&&this.stop()}},{key:'start',value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this._autoRefreshTimer&&this._projects.size>0&&(R.debug('Starting auto-refresh...'),this._autoRefreshTimer=setInterval(a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',t._refresh());case 1:case'end':return e.stop()}}),e)}))),e.AUTO_REFRESH_INTERVAL),r&&this._refresh())}},{key:'stop',value:function(){this._autoRefreshTimer&&(R.debug('Stopping auto-refresh...'),clearInterval(this._autoRefreshTimer),this._autoRefreshTimer=void 0)}},{key:'publicationDataCache',set:function(e){this._publicationDataCache=e}}]),e}();c(P,'AUTO_REFRESH_INTERVAL',3e5);class k{static getDirection(e){switch(e){case'ar':case'ar-001':case'ar-AE':case'ar-BH':case'ar-DJ':case'ar-DZ':case'ar-EG':case'ar-EH':case'ar-ER':case'ar-IL':case'ar-IQ':case'ar-JO':case'ar-KM':case'ar-KW':case'ar-LB':case'ar-LY':case'ar-MA':case'ar-MR':case'ar-OM':case'ar-PS':case'ar-QA':case'ar-SA':case'ar-SD':case'ar-SO':case'ar-SS':case'ar-SY':case'ar-TD':case'ar-TN':case'ar-YE':case'ckb':case'ckb-IQ':case'ckb-IR':case'fa':case'fa-AF':case'fa-IR':case'he':case'he-IL':case'ks':case'ks-IN':case'lrc':case'lrc-IQ':case'lrc-IR':case'mzn':case'mzn-IR':case'pa-Arab':case'pa-Arab-PK':case'ps':case'ps-AF':case'sd':case'sd-PK':case'ug':case'ug-CN':case'ur':case'ur-IN':case'ur-PK':case'uz-Arab':case'uz-Arab-AF':case'yi':case'yi-001':return D.RTL;default:return D.LTR}}}!function(e){e.LTR='ltr',e.RTL='rtl'}(D||(D={}));const x=new Map;var L;!function(e){e.NEWSPAGE='newspage',e.TRIGGER_VIEW='trigger',e.WIDGET_VIEW='widget'}(L||(L={}));class U{constructor(e,t){this.DEFAULT_LANGUAGE_TAG='en-US',this.metadata=e,this.phrasesByLanguageTag=t}static format(e,t,n='en',r={}){let i=null==e?t:e;if(Object.keys(r).length>0)for(const e in r){const t=`{${e}}`;i=i.replace(new RegExp(t,'g'),r[e])}return i}static async load(e,t){if('none'===t)return new U({id:'none',languages:[]},x);const n='https://phrases.noticeable.io/3.1.0/'+e,r=await U.fetch(`${n}/${t}/metadata.json`),i=new Map,a=[];for(const e of r.languages)a.push(U.fetch(`${n}/${t}/${t}.${e}.json`).catch((e=>(console.error(e),{}))));const o=await Promise.all(a);let s=0;for(const e of r.languages){const t=o[s],n=Object.entries(t),r=new Map;for(const[e,t]of n)t.key=e,r.set(e,t);i.set(e,r),s++}return new U(r,i)}static async fetch(e){return await(await fetch(e)).json()}phrases(e=this.DEFAULT_LANGUAGE_TAG){let t=this.phrasesByLanguageTag.get(e);return t||(t=this.phrasesByLanguageTag.get(this.DEFAULT_LANGUAGE_TAG),t)?t:x}phrase(e,t){return this.phrases(e).get(t)}}function G(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function M(){var e=navigator.userAgent;return!!/iPad|iPhone|iPod/.test(e)||(!!/android/i.test(e)||(!!/windows phone/i.test(e)||!!window.matchMedia('only screen and (max-width: 768px)').matches))}function B(e){return k.getDirection(e)===D.RTL}function j(e){return e+'px'}var W=function(){function e(t,n){o(this,e),c(this,'_autoRefresher',void 0),c(this,'_emailSubscriptionFetcher',void 0),c(this,'_projectDataCache',void 0),c(this,'_projectDataFetcher',void 0),c(this,'_publicationDataCache',void 0),c(this,'_publicationDataFetcher',void 0),c(this,'_widgetDataCache',void 0),c(this,'_widgetDataFetcher',void 0),this._autoRefresher=t,this._emailSubscriptionFetcher=new V(n),this._projectDataCache=new H,this._projectDataFetcher=new J(n),this._publicationDataCache=new K,this._publicationDataFetcher=new Z(n),this._widgetDataCache=new Y,this._widgetDataFetcher=new X(n),this._autoRefresher.publicationDataCache=this._publicationDataCache}var t,r,i,s;return u(e,[{key:'getEmailSubscription',value:(s=a(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._emailSubscriptionFetcher.getEmailSubscription(t,r));case 1:case'end':return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:'getProjectData',value:(i=a(n().mark((function e(t){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._projectDataCache.getOrCompute(t,(function(e,n){return r._projectDataFetcher.fetch(t)})));case 1:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'getPublicationData',value:(r=a(n().mark((function e(t,r){var i,a,o=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._publicationDataCache.getOrCompute({projectId:t,labels:null!==(i=null==r?void 0:r.labels)&&void 0!==i?i:[],segments:null!==(a=null==r?void 0:r.segments)&&void 0!==a?a:[]},(function(e,n){return o._publicationDataFetcher.fetch(t,r)})));case 1:case'end':return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:'getWidgetData',value:(t=a(n().mark((function e(t){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._widgetDataCache.getOrCompute(t,function(){var e=a(n().mark((function e(i,a){var o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._widgetDataFetcher.fetch(t);case 2:return null!=(s=e.sent)&&null!==(o=s.widgetViewSettings)&&void 0!==o&&o.autoRefresh&&s.widgetViewSettings.autoRefresh>0?r._autoRefresher.add(s.projectId):null!=s&&s.projectId&&r._autoRefresher.delete(s.projectId),e.abrupt('return',s);case 5:case'end':return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case'end':return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:'invalidateProjectData',value:function(e){return this._projectDataCache.invalidate(e)}},{key:'invalidatePublicationData',value:function(e){return this._publicationDataCache.invalidate(e)}},{key:'invalidateWidgetData',value:function(e){return this._widgetDataCache.invalidate(e)}},{key:'setProjectCacheControl',value:function(e){this._projectDataFetcher.setCacheControl(e)}},{key:'setPublicationCacheControl',value:function(e){this._publicationDataFetcher.setCacheControl(e)}},{key:'setWidgetCacheControl',value:function(e){this._widgetDataFetcher.setCacheControl(e)}}]),e}(),F=function(){function e(){o(this,e),c(this,'_data',void 0),this._data=new Map}var t,r;return u(e,[{key:'getOrCompute',value:(r=a(n().mark((function e(t,r){var i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._id(t),void 0!==(a=this._data.get(i))){e.next=6;break}return e.next=5,this._compute(i,t,r);case 5:a=e.sent;case 6:return e.abrupt('return',a);case 7:case'end':return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:'invalidate',value:function(e){return this._data.delete(this._id(e))}},{key:'_compute',value:(t=a(n().mark((function e(t,r,i){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t,r);case 2:return(a=e.sent)&&this._data.set(t,a),e.abrupt('return',a);case 5:case'end':return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),V=function(){function e(t){o(this,e),c(this,'_endpoint',void 0),this._endpoint=t.widgetsData}var t;return u(e,[{key:'getEmailSubscription',value:(t=a(n().mark((function e(t,r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this._endpoint+'/projects/'+t+'/email_subscriptions/'+r);case 3:return i=e.sent,e.next=6,i.json();case 6:return e.abrupt('return',e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt('return',{email:r});case 12:case'end':return e.stop()}}),e,this,[[0,9]])}))),function(e,n){return t.apply(this,arguments)})}]),e}(),H=function(e){l(n,e);var t=m(n);function n(){return o(this,n),t.apply(this,arguments)}return u(n,[{key:'_id',value:function(e){return G(e)}}]),n}(F),K=function(e){l(s,e);var t,i=m(s);function s(){var e;return o(this,s),c(g(e=i.call(this)),'_dataByProjectId',void 0),e._dataByProjectId=new Map,e}return u(s,[{key:'invalidate',value:function(e){if(void 0===e){var t=this._data.size>0;return this._dataByProjectId.clear(),this._data.clear(),t}if('string'==typeof e){var n=this._dataByProjectId.get(e);if(n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._data.delete(a)}}catch(e){i.e(e)}finally{i.f()}return this._dataByProjectId.delete(e),!0}return!1}var o=e.projectId;if(o){var s=this._id(e);this._data.delete(s);var u=this._dataByProjectId.get(o);return u&&(1===u.size&&u.has(s)?this._dataByProjectId.delete(o):u.delete(s)),!0}return!1}},{key:'_compute',value:(t=a(n().mark((function e(t,r,i){var a,o,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(d(s.prototype),'_compute',this).call(this,t,r,i);case 2:return(a=e.sent)&&(o=r.projectId,(u=this._dataByProjectId.get(o))||(u=new Set,this._dataByProjectId.set(o,u)),u.add(t)),e.abrupt('return',a);case 5:case'end':return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:'_id',value:function(e){for(var t='',n=0,i=Object.entries(e);n<i.length;n++){var a=y(i[n],2),o=a[0],s=a[1],u=r(s);'string'===u?t+=''.concat(o,'=').concat(s,';'):Array.isArray(s)?t+=''.concat(o,'=').concat(E(s).sort().join(','),';'):'boolean'===u?t+=''.concat(o,'=').concat(s?'0':'1',';'):'number'===u?t+=''.concat(o,'=').concat(s,';'):R.warn('Skipping unsupported property '.concat(o,' while computing resourceId for ').concat(e))}return G(t)}}]),s}(F),Y=function(e){l(n,e);var t=m(n);function n(){return o(this,n),t.apply(this,arguments)}return u(n,[{key:'_id',value:function(e){return G(e)}}]),n}(F),z=function(){function e(t,n,r){o(this,e),c(this,'_cacheControl',void 0),c(this,'_endpoints',void 0),c(this,'_resourceName',void 0),c(this,'_resourceUrlBuilder',void 0),this._cacheControl=!0,this._endpoints=t,this._resourceName=n,this._resourceUrlBuilder=r}var t,r;return u(e,[{key:'fetch',value:(r=a(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetch(t,r);case 2:return e.abrupt('return',e.sent);case 3:case'end':return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:'setCacheControl',value:function(e){this._cacheControl=e}},{key:'_fetchHeaders',value:function(e,t){return new Headers}},{key:'_fetch',value:(t=a(n().mark((function e(t,r){var i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._resourceUrl(t,r),R.debug('Fetching resource '.concat(t,' with options=').concat(JSON.stringify(r),': ').concat(i)),e.prev=2,e.next=5,fetch(i,{headers:this._fetchHeaders(this._cacheControl,r)});case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt('return',e.sent);case 11:return e.prev=11,e.t0=e.catch(2),R.error('Error while updating '.concat(this._resourceName,' data from url: ').concat(i)),e.abrupt('return',void 0);case 15:case'end':return e.stop()}}),e,this,[[2,11]])}))),function(e,n){return t.apply(this,arguments)})},{key:'_resourceUrl',value:function(e,t){return this._resourceUrlBuilder(e,t)}}]),e}(),J=function(e){l(n,e);var t=m(n);function n(e){return o(this,n),t.call(this,e,'project',(function(t){return e.widgetsData+'/projects/'+t}))}return u(n)}(z),Z=function(e){l(i,e);var t,r=m(i);function i(e){return o(this,i),r.call(this,e,'publication',(function(t,n){var r=e.widgetsData+'/projects/'+t+'/publications';if(null!=n&&n.aggregation||null!=n&&n.labels||null!=n&&n.limit||null!=n&&n.segments){var i,a;r+='?';var o=[];null!=n&&n.aggregation&&'nspms'!=n.aggregation&&o.push('a='.concat(n.aggregation)),null!=n&&null!==(i=n.labels)&&void 0!==i&&i.length&&n.labels.length>0&&o.push('l='.concat(n.labels.join(','))),null!=n&&n.limit&&o.push('m='.concat(n.limit.toString())),null!=n&&null!==(a=n.segments)&&void 0!==a&&a.length&&n.segments.length>0&&o.push('s='.concat(n.segments.join(','))),r+=o.join('&')}return r}))}return u(i,[{key:'fetch',value:(t=a(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&void 0!==r.limit&&r.limit<=0)){e.next=2;break}return e.abrupt('return',[]);case 2:return e.abrupt('return',v(d(i.prototype),'fetch',this).call(this,t,r));case 3:case'end':return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:'_fetchHeaders',value:function(e,t){var n,r,a=v(d(i.prototype),'_fetchHeaders',this).call(this,e,t);return null!=t&&t.aggregation&&'nspms'!=t.aggregation&&a.append('noticeable-aggregation',t.aggregation),null!=t&&null!==(n=t.labels)&&void 0!==n&&n.length&&t.labels.length>0&&a.append('noticeable-labels',t.labels.join(',')),null!=t&&t.limit&&a.append('noticeable-limit',t.limit.toString()),null!=t&&null!==(r=t.segments)&&void 0!==r&&r.length&&t.segments.length>0&&a.append('noticeable-segments',t.segments.join(',')),a}}]),i}(z),X=function(e){l(n,e);var t=m(n);function n(e){return o(this,n),t.call(this,e,'widget',(function(t){return e.widgetsData+'/widgets/'+t}))}return u(n)}(z),q=function(e){return e.IDENTITY_PUBLICATION_READ_INVALIDATE='identity:publication_read:invalidate',e.IDENTITY_PUBLICATION_SEEN_INVALIDATE='identity:publication_seen:invalidate',e.PROJECT_DATA_INVALIDATE='project_data:invalidate',e.PUBLICATION_DATA_INVALIDATE='publication_data:invalidate',e.WIDGET_DATA_INVALIDATE='widget_data:invalidate',e.WIDGET_CLOSE='widget:close',e.WIDGET_HIDE='widget:hide',e.WIDGET_OPEN='widget:open',e.WIDGET_REFRESH='widget:refresh',e.WIDGET_SHOW='widget:show',e.WIDGET_TOGGLE='widget:toggle',e}({}),Q=function(e){return e.WIDGET_PUBLICATION_READ='widget:publication:read',e.WIDGET_PUBLICATION_SEEN='widget:publication:seen',e.WIDGET_PUBLICATION_UNREAD_COUNT='widget:publication:unread_count',e.WIDGET_PUBLICATION_UNSEEN_COUNT='widget:publication:unseen_count',e}({}),$=function(e){return e.WIDGET_CLOSED='widget:closed',e.WIDGET_HIDDEN='widget:hidden',e.WIDGET_OPENED='widget:opened',e.WIDGET_VISIBLE='widget:visible',e}({}),ee=function(e){return e.LOG_LEVEL='log_level',e.PREFERENCES='preferences',e.WIDGET_PUBLICATION_READ='widget:publication:read',e.WIDGET_PUBLICATION_SEEN='widget:publication:seen',e.WIDGET_TRIGGER_VIEW_SETTINGS='widget:trigger_view:settings',e.WIDGET_WIDGET_VIEW_SETTINGS='widget:widget_view:settings',e}({});const te={production:{prices:{data:[{id:'price_1MAFtIC99y1TMnUurKJzuAVf',currency:'gbp',product:{id:'prod_LLOwqUMCwogcBI'},recurring:{interval:'year'},unit_amount_decimal:'8000',tiers:null},{id:'price_1MAFt8C99y1TMnUuJ24cf23T',currency:'eur',product:{id:'prod_LLOwqUMCwogcBI'},recurring:{interval:'year'},unit_amount_decimal:'9000',tiers:null},{id:'price_1MAFsyC99y1TMnUuy5Df7UlU',currency:'usd',product:{id:'prod_LLOwqUMCwogcBI'},recurring:{interval:'year'},unit_amount_decimal:'9000',tiers:null},{id:'price_1MAFqOC99y1TMnUubccD6Lr9',currency:'eur',product:{id:'prod_ItN1OD9KRBOAxi'},recurring:{interval:'year'},unit_amount_decimal:'30000',tiers:null},{id:'price_1MAFqFC99y1TMnUu6LEG2Aqi',currency:'eur',product:{id:'prod_ItN1OD9KRBOAxi'},recurring:{interval:'month'},unit_amount_decimal:'3000',tiers:null},{id:'price_1MAFnxC99y1TMnUuweGJ7eWI',currency:'gbp',product:{id:'prod_ItNKx6Uu3cJvZB'},recurring:{interval:'year'},unit_amount_decimal:'6000',tiers:null},{id:'price_1MAFnmC99y1TMnUuW0DgJoIK',currency:'gbp',product:{id:'prod_ItNKx6Uu3cJvZB'},recurring:{interval:'month'},unit_amount_decimal:'600',tiers:null},{id:'price_1MAFnJC99y1TMnUukXq2mR5O',currency:'eur',product:{id:'prod_ItNKx6Uu3cJvZB'},recurring:{interval:'year'},unit_amount_decimal:'7000',tiers:null},{id:'price_1MAFn9C99y1TMnUuSzq3BW8E',currency:'eur',product:{id:'prod_ItNKx6Uu3cJvZB'},recurring:{interval:'month'},unit_amount_decimal:'700',tiers:null},{id:'price_1M6Ke6C99y1TMnUu0fMxGTXn',currency:'gbp',product:{id:'v3-business'},recurring:{interval:'year'},unit_amount_decimal:'145000',tiers:null},{id:'price_1M6KdrC99y1TMnUuCUerHlgk',currency:'eur',product:{id:'v3-business'},recurring:{interval:'year'},unit_amount_decimal:'159000',tiers:null},{id:'price_1M6KdjC99y1TMnUu3YgOpvSl',currency:'usd',product:{id:'v3-business'},recurring:{interval:'year'},unit_amount_decimal:'159000',tiers:null},{id:'price_1M6KdYC99y1TMnUu7tRFAkLq',currency:'gbp',product:{id:'v3-business'},recurring:{interval:'month'},unit_amount_decimal:'14500',tiers:null},{id:'price_1M6KdNC99y1TMnUuRDFherFr',currency:'eur',product:{id:'v3-business'},recurring:{interval:'month'},unit_amount_decimal:'15900',tiers:null},{id:'price_1M6KdFC99y1TMnUuvfDSZ6b1',currency:'usd',product:{id:'v3-business'},recurring:{interval:'month'},unit_amount_decimal:'15900',tiers:null},{id:'price_1M6KaZC99y1TMnUuKPQPb6d8',currency:'gbp',product:{id:'v3-growth'},recurring:{interval:'year'},unit_amount_decimal:'72000',tiers:null},{id:'price_1M6KaLC99y1TMnUuDzjiyhbA',currency:'eur',product:{id:'v3-growth'},recurring:{interval:'year'},unit_amount_decimal:'79000',tiers:null},{id:'price_1M6KaAC99y1TMnUuHmHgbh8q',currency:'usd',product:{id:'v3-growth'},recurring:{interval:'year'},unit_amount_decimal:'79000',tiers:null},{id:'price_1M6KZfC99y1TMnUuUuXfSFBW',currency:'gbp',product:{id:'v3-growth'},recurring:{interval:'month'},unit_amount_decimal:'7200',tiers:null},{id:'price_1M6KZQC99y1TMnUunjBxxXPk',currency:'eur',product:{id:'v3-growth'},recurring:{interval:'month'},unit_amount_decimal:'7900',tiers:null},{id:'price_1M6KZGC99y1TMnUulFT3cTqb',currency:'usd',product:{id:'v3-growth'},recurring:{interval:'month'},unit_amount_decimal:'7900',tiers:null},{id:'price_1M6KWrC99y1TMnUuPRY9IfOC',currency:'gbp',product:{id:'v3-starter'},recurring:{interval:'year'},unit_amount_decimal:'27000',tiers:null},{id:'price_1M6KWUC99y1TMnUuA0DNewdz',currency:'eur',product:{id:'v3-starter'},recurring:{interval:'year'},unit_amount_decimal:'29000',tiers:null},{id:'price_1M6KWJC99y1TMnUuKDCHkhG3',currency:'usd',product:{id:'v3-starter'},recurring:{interval:'year'},unit_amount_decimal:'29000',tiers:null},{id:'price_1M6KWCC99y1TMnUu8qvmaY2o',currency:'gbp',product:{id:'v3-starter'},recurring:{interval:'month'},unit_amount_decimal:'2700',tiers:null},{id:'price_1M6KW2C99y1TMnUu3aEllv95',currency:'eur',product:{id:'v3-starter'},recurring:{interval:'month'},unit_amount_decimal:'2900',tiers:null},{id:'price_1M6KVsC99y1TMnUu4iNxDH2w',currency:'usd',product:{id:'v3-starter'},recurring:{interval:'month'},unit_amount_decimal:'2900',tiers:null},{id:'price_1M5AiJC99y1TMnUuYwo5KQlp',currency:'usd',product:{id:'prod_LFr36mXdpQZzUo'},recurring:{interval:'year'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'price_1Kei95C99y1TMnUupxojfxlM',currency:'usd',product:{id:'prod_LLOwqUMCwogcBI'},recurring:{interval:'month'},unit_amount_decimal:'900',tiers:null},{id:'price_1Kei95C99y1TMnUudBsBUgfX',currency:'eur',product:{id:'prod_LLOwqUMCwogcBI'},recurring:{interval:'month'},unit_amount_decimal:'900',tiers:null},{id:'price_1Kei95C99y1TMnUuhmZvLUBS',currency:'gbp',product:{id:'prod_LLOwqUMCwogcBI'},recurring:{interval:'month'},unit_amount_decimal:'800',tiers:null},{id:'price_1KZLLoC99y1TMnUueFa8pZLU',currency:'eur',product:{id:'prod_LFr36mXdpQZzUo'},recurring:{interval:'month'},unit_amount_decimal:null,tiers:[{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'price_1KZLLoC99y1TMnUu0ZrpdQ6F',currency:'gbp',product:{id:'prod_LFr36mXdpQZzUo'},recurring:{interval:'month'},unit_amount_decimal:null,tiers:[{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.45',up_to:1e3},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.18',up_to:1e4},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.09',up_to:1e5},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.08',up_to:1e6},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.075',up_to:null}]},{id:'price_1KZLLoC99y1TMnUuSwTEoz6W',currency:'usd',product:{id:'prod_LFr36mXdpQZzUo'},recurring:{interval:'month'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'price_1KZLLoC99y1TMnUuM1ir8VLE',currency:'gbp',product:{id:'prod_LFr36mXdpQZzUo'},recurring:{interval:'year'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.45',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.18',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.075',up_to:null}]},{id:'price_1KZLLnC99y1TMnUuDk5ZDgs1',currency:'eur',product:{id:'prod_LFr36mXdpQZzUo'},recurring:{interval:'year'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'v3-extra_collaborator-usd-month',currency:'usd',product:{id:'prod_ItNKx6Uu3cJvZB'},recurring:{interval:'month'},unit_amount_decimal:'700',tiers:null},{id:'v3-extra_collaborator-usd-year',currency:'usd',product:{id:'prod_ItNKx6Uu3cJvZB'},recurring:{interval:'year'},unit_amount_decimal:'7000',tiers:null},{id:'v3-extra_project-usd-year',currency:'usd',product:{id:'prod_ItN1OD9KRBOAxi'},recurring:{interval:'year'},unit_amount_decimal:'30000',tiers:null},{id:'v3-extra_project-usd-month',currency:'usd',product:{id:'prod_ItN1OD9KRBOAxi'},recurring:{interval:'month'},unit_amount_decimal:'3000',tiers:null},{id:'v3-extra_project-gbp-year',currency:'gbp',product:{id:'prod_ItN1OD9KRBOAxi'},recurring:{interval:'year'},unit_amount_decimal:'25000',tiers:null},{id:'v3-extra_project-gbp-month',currency:'gbp',product:{id:'prod_ItN1OD9KRBOAxi'},recurring:{interval:'month'},unit_amount_decimal:'2500',tiers:null},{id:'v3-enterprise-eur-year',currency:'eur',product:{id:'prod_GukNYbXAooLiCr'},recurring:{interval:'year'},unit_amount_decimal:'399900',tiers:null},{id:'v3-enterprise-eur-month',currency:'eur',product:{id:'prod_GukNYbXAooLiCr'},recurring:{interval:'month'},unit_amount_decimal:'39900',tiers:null},{id:'v3-enterprise-gbp-year',currency:'gbp',product:{id:'prod_GukNYbXAooLiCr'},recurring:{interval:'year'},unit_amount_decimal:'399900',tiers:null},{id:'v3-enterprise-gbp-month',currency:'gbp',product:{id:'prod_GukNYbXAooLiCr'},recurring:{interval:'month'},unit_amount_decimal:'39900',tiers:null},{id:'v3-enterprise-usd-year',currency:'usd',product:{id:'prod_GukNYbXAooLiCr'},recurring:{interval:'year'},unit_amount_decimal:'399900',tiers:null},{id:'v3-enterprise-usd-month',currency:'usd',product:{id:'prod_GukNYbXAooLiCr'},recurring:{interval:'month'},unit_amount_decimal:'39900',tiers:null},{id:'v3-extra-collaborator-usd-year',currency:'usd',product:{id:'v3-extra-collaborator'},recurring:{interval:'year'},unit_amount_decimal:'3990',tiers:null},{id:'v3-extra-collaborator-usd-month',currency:'usd',product:{id:'v3-extra-collaborator'},recurring:{interval:'month'},unit_amount_decimal:'399',tiers:null},{id:'v3-extra-collaborator-eur-year',currency:'eur',product:{id:'v3-extra-collaborator'},recurring:{interval:'year'},unit_amount_decimal:'3990',tiers:null},{id:'v3-extra-collaborator-gbp-year',currency:'gbp',product:{id:'v3-extra-collaborator'},recurring:{interval:'year'},unit_amount_decimal:'3990',tiers:null},{id:'v3-extra-collaborator-gbp-month',currency:'gbp',product:{id:'v3-extra-collaborator'},recurring:{interval:'month'},unit_amount_decimal:'399',tiers:null},{id:'v3-extra-collaborator-eur-month',currency:'eur',product:{id:'v3-extra-collaborator'},recurring:{interval:'month'},unit_amount_decimal:'399',tiers:null},{id:'v3-opensource-gbp-month',currency:'gbp',product:{id:'v3-opensource'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-gbp-year',currency:'gbp',product:{id:'v3-opensource'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-usd-year',currency:'usd',product:{id:'v3-opensource'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-eur-year',currency:'eur',product:{id:'v3-opensource'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-usd-month',currency:'usd',product:{id:'v3-opensource'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-eur-month',currency:'eur',product:{id:'v3-opensource'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-gbp-year',currency:'gbp',product:{id:'v3-free'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-usd-year',currency:'usd',product:{id:'v3-free'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-gbp-month',currency:'gbp',product:{id:'v3-free'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-eur-year',currency:'eur',product:{id:'v3-free'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-usd-month',currency:'usd',product:{id:'v3-free'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-eur-month',currency:'eur',product:{id:'v3-free'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-gbp-month',currency:'gbp',product:{id:'v3-academic'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-usd-month',currency:'usd',product:{id:'v3-academic'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-usd-year',currency:'usd',product:{id:'v3-academic'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-eur-year',currency:'eur',product:{id:'v3-academic'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-gbp-year',currency:'gbp',product:{id:'v3-academic'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-eur-month',currency:'eur',product:{id:'v3-academic'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null}]},products:{data:[{id:'prod_LLOwqUMCwogcBI',name:'Extra widget',metadata:{slug:'extra-widget'}},{id:'prod_LFr36mXdpQZzUo',name:'Emails',metadata:{slug:'emails'}},{id:'prod_ItNKx6Uu3cJvZB',name:'Extra Collaborator',metadata:{slug:'extra-collaborator'}},{id:'prod_ItN1OD9KRBOAxi',name:'Extra Project',metadata:{slug:'extra-project'}},{id:'prod_GukNYbXAooLiCr',name:'Enterprise Plan',metadata:{plan:'true',slug:'enterprise'}},{id:'v3-starter',name:'Starter Plan',metadata:{plan:'true',slug:'starter'}},{id:'v3-opensource',name:'Open Source Plan',metadata:{hidden:'true',plan:'true',slug:'opensource'}},{id:'v3-growth',name:'Growth Plan',metadata:{plan:'true',slug:'growth'}},{id:'v3-free',name:'Free Plan',metadata:{plan:'true',slug:'free'}},{id:'v3-business',name:'Business Plan',metadata:{plan:'true',slug:'business'}},{id:'v3-academic',name:'Academic Plan',metadata:{hidden:'true',plan:'true',slug:'academic'}}]}},staging:{prices:{data:[{id:'price_1MAFv3C99y1TMnUujPJKJJYV',currency:'gbp',product:{id:'prod_JTa0oRB0KIDiFJ'},recurring:{interval:'year'},unit_amount_decimal:'8000',tiers:null},{id:'price_1MAFutC99y1TMnUuaIgafC5q',currency:'eur',product:{id:'prod_JTa0oRB0KIDiFJ'},recurring:{interval:'year'},unit_amount_decimal:'9000',tiers:null},{id:'price_1MAFukC99y1TMnUu8eg21Pg2',currency:'usd',product:{id:'prod_JTa0oRB0KIDiFJ'},recurring:{interval:'year'},unit_amount_decimal:'9000',tiers:null},{id:'price_1MAFucC99y1TMnUub7MhuQcy',currency:'gbp',product:{id:'prod_JTa0oRB0KIDiFJ'},recurring:{interval:'month'},unit_amount_decimal:'800',tiers:null},{id:'price_1MAFuVC99y1TMnUuVdzNAqic',currency:'eur',product:{id:'prod_JTa0oRB0KIDiFJ'},recurring:{interval:'month'},unit_amount_decimal:'900',tiers:null},{id:'price_1MAFuPC99y1TMnUuhHbKIicg',currency:'usd',product:{id:'prod_JTa0oRB0KIDiFJ'},recurring:{interval:'month'},unit_amount_decimal:'900',tiers:null},{id:'price_1MAFrzC99y1TMnUuBGOCPGka',currency:'gbp',product:{id:'v3-extra-project'},recurring:{interval:'year'},unit_amount_decimal:'25000',tiers:null},{id:'price_1MAFrqC99y1TMnUunP3s8SkB',currency:'gbp',product:{id:'v3-extra-project'},recurring:{interval:'month'},unit_amount_decimal:'2500',tiers:null},{id:'price_1MAFraC99y1TMnUuDy8Q2UIi',currency:'eur',product:{id:'v3-extra-project'},recurring:{interval:'year'},unit_amount_decimal:'30000',tiers:null},{id:'price_1MAFrRC99y1TMnUub8EX0viP',currency:'eur',product:{id:'v3-extra-project'},recurring:{interval:'month'},unit_amount_decimal:'3000',tiers:null},{id:'price_1MAFrJC99y1TMnUuGioQM3VH',currency:'usd',product:{id:'v3-extra-project'},recurring:{interval:'year'},unit_amount_decimal:'30000',tiers:null},{id:'price_1MAFrCC99y1TMnUuWXtyUVC0',currency:'usd',product:{id:'v3-extra-project'},recurring:{interval:'month'},unit_amount_decimal:'3000',tiers:null},{id:'price_1MAFp1C99y1TMnUuWrt4pzOe',currency:'gbp',product:{id:'v3-extra-collaborator'},recurring:{interval:'year'},unit_amount_decimal:'6000',tiers:null},{id:'price_1MAFoqC99y1TMnUuPkDc5jn3',currency:'gbp',product:{id:'v3-extra-collaborator'},recurring:{interval:'month'},unit_amount_decimal:'600',tiers:null},{id:'price_1MAFohC99y1TMnUuVBjrN3nJ',currency:'eur',product:{id:'v3-extra-collaborator'},recurring:{interval:'year'},unit_amount_decimal:'7000',tiers:null},{id:'price_1MAFoWC99y1TMnUu6TqNEkIC',currency:'eur',product:{id:'v3-extra-collaborator'},recurring:{interval:'month'},unit_amount_decimal:'700',tiers:null},{id:'price_1MAFoMC99y1TMnUugNvVOFlf',currency:'usd',product:{id:'v3-extra-collaborator'},recurring:{interval:'year'},unit_amount_decimal:'7000',tiers:null},{id:'price_1MAFmJC99y1TMnUuqxahXXM5',currency:'usd',product:{id:'v3-extra-collaborator'},recurring:{interval:'month'},unit_amount_decimal:'700',tiers:null},{id:'price_1M6JqKC99y1TMnUu6TUpE2AO',currency:'eur',product:{id:'v3-business'},recurring:{interval:'year'},unit_amount_decimal:'159000',tiers:null},{id:'price_1M6Jq7C99y1TMnUuRVJ86o4L',currency:'usd',product:{id:'v3-business'},recurring:{interval:'year'},unit_amount_decimal:'159000',tiers:null},{id:'price_1M6JpxC99y1TMnUu9NzVNYHe',currency:'gbp',product:{id:'v3-business'},recurring:{interval:'year'},unit_amount_decimal:'145000',tiers:null},{id:'price_1M6JpPC99y1TMnUuf3bmwgLt',currency:'gbp',product:{id:'v3-business'},recurring:{interval:'month'},unit_amount_decimal:'14500',tiers:null},{id:'price_1M6JnxC99y1TMnUuqOkRHbTV',currency:'eur',product:{id:'v3-business'},recurring:{interval:'month'},unit_amount_decimal:'15900',tiers:null},{id:'price_1M6JnoC99y1TMnUurm3pxv6x',currency:'usd',product:{id:'v3-business'},recurring:{interval:'month'},unit_amount_decimal:'15900',tiers:null},{id:'price_1M6JjcC99y1TMnUuBsynN8pu',currency:'gbp',product:{id:'v3-growth'},recurring:{interval:'year'},unit_amount_decimal:'72000',tiers:null},{id:'price_1M6JjQC99y1TMnUuuSZyJdL9',currency:'eur',product:{id:'v3-growth'},recurring:{interval:'year'},unit_amount_decimal:'79000',tiers:null},{id:'price_1M6Jj9C99y1TMnUutRdedTGK',currency:'usd',product:{id:'v3-growth'},recurring:{interval:'year'},unit_amount_decimal:'79000',tiers:null},{id:'price_1M6JiqC99y1TMnUuAhMjYiYU',currency:'gbp',product:{id:'v3-growth'},recurring:{interval:'month'},unit_amount_decimal:'7200',tiers:null},{id:'price_1M6JiBC99y1TMnUuWIlN9GNv',currency:'eur',product:{id:'v3-growth'},recurring:{interval:'month'},unit_amount_decimal:'7900',tiers:null},{id:'price_1M6Ji0C99y1TMnUuKuQXASE9',currency:'usd',product:{id:'v3-growth'},recurring:{interval:'month'},unit_amount_decimal:'7900',tiers:null},{id:'price_1M6JhTC99y1TMnUu2yIfV3uw',currency:'eur',product:{id:'v3-starter'},recurring:{interval:'year'},unit_amount_decimal:'29000',tiers:null},{id:'price_1M6JgzC99y1TMnUuZovm9ejw',currency:'usd',product:{id:'v3-starter'},recurring:{interval:'year'},unit_amount_decimal:'29000',tiers:null},{id:'price_1M6JdgC99y1TMnUuHwOIwjd6',currency:'gbp',product:{id:'v3-starter'},recurring:{interval:'year'},unit_amount_decimal:'27000',tiers:null},{id:'price_1M6JbhC99y1TMnUugLzYMQS2',currency:'gbp',product:{id:'v3-starter'},recurring:{interval:'month'},unit_amount_decimal:'2700',tiers:null},{id:'price_1M6Jb8C99y1TMnUuDug6PPIY',currency:'eur',product:{id:'v3-starter'},recurring:{interval:'month'},unit_amount_decimal:'2900',tiers:null},{id:'price_1M6JaXC99y1TMnUuKhrqhGK1',currency:'usd',product:{id:'v3-starter'},recurring:{interval:'month'},unit_amount_decimal:'2900',tiers:null},{id:'price_1KZKr0C99y1TMnUunUIa4cRk',currency:'eur',product:{id:'prod_L9QViFub93Te3N'},recurring:{interval:'year'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'price_1KZKp6C99y1TMnUueHIRpsU6',currency:'gbp',product:{id:'prod_L9QViFub93Te3N'},recurring:{interval:'year'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.45',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.18',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.075',up_to:null}]},{id:'price_1KZKnDC99y1TMnUuSkPq8lcz',currency:'usd',product:{id:'prod_L9QViFub93Te3N'},recurring:{interval:'year'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'price_1KZKSbC99y1TMnUu0K6uACI3',currency:'usd',product:{id:'prod_L9QViFub93Te3N'},recurring:{interval:'month'},unit_amount_decimal:null,tiers:[{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:null,flat_amount_decimal:null,unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'price_1KT7epC99y1TMnUu1cifI4Jh',currency:'gbp',product:{id:'prod_L9QViFub93Te3N'},recurring:{interval:'month'},unit_amount_decimal:null,tiers:[{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.45',up_to:1e3},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.18',up_to:1e4},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.09',up_to:1e5},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.08',up_to:1e6},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.075',up_to:null}]},{id:'price_1KT7epC99y1TMnUu2EvRuMFn',currency:'eur',product:{id:'prod_L9QViFub93Te3N'},recurring:{interval:'month'},unit_amount_decimal:null,tiers:[{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.5',up_to:1e3},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.2',up_to:1e4},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.1',up_to:1e5},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.09',up_to:1e6},{flat_amount:0,flat_amount_decimal:'0',unit_amount:null,unit_amount_decimal:'0.08',up_to:null}]},{id:'v3-enterprise-eur-year',currency:'eur',product:{id:'prod_GukXSrRcH6AU9m'},recurring:{interval:'year'},unit_amount_decimal:'399900',tiers:null},{id:'v3-enterprise-eur-month',currency:'eur',product:{id:'prod_GukXSrRcH6AU9m'},recurring:{interval:'month'},unit_amount_decimal:'39900',tiers:null},{id:'v3-enterprise-gbp-year',currency:'gbp',product:{id:'prod_GukXSrRcH6AU9m'},recurring:{interval:'year'},unit_amount_decimal:'399900',tiers:null},{id:'v3-enterprise-gbp-month',currency:'gbp',product:{id:'prod_GukXSrRcH6AU9m'},recurring:{interval:'month'},unit_amount_decimal:'39900',tiers:null},{id:'v3-enterprise-usd-year',currency:'usd',product:{id:'prod_GukXSrRcH6AU9m'},recurring:{interval:'year'},unit_amount_decimal:'399900',tiers:null},{id:'v3-enterprise-usd-month',currency:'usd',product:{id:'prod_GukXSrRcH6AU9m'},recurring:{interval:'month'},unit_amount_decimal:'39900',tiers:null},{id:'v3-opensource-usd-month',currency:'usd',product:{id:'v3-opensource'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-gbp-month',currency:'gbp',product:{id:'v3-opensource'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-usd-year',currency:'usd',product:{id:'v3-opensource'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-eur-year',currency:'eur',product:{id:'v3-opensource'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-gbp-year',currency:'gbp',product:{id:'v3-opensource'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-opensource-eur-month',currency:'eur',product:{id:'v3-opensource'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-usd-year',currency:'usd',product:{id:'v3-free'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-gbp-year',currency:'gbp',product:{id:'v3-free'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-gbp-month',currency:'gbp',product:{id:'v3-free'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-eur-year',currency:'eur',product:{id:'v3-free'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-usd-month',currency:'usd',product:{id:'v3-free'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-free-eur-month',currency:'eur',product:{id:'v3-free'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-gbp-year',currency:'gbp',product:{id:'v3-academic'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-usd-year',currency:'usd',product:{id:'v3-academic'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-usd-month',currency:'usd',product:{id:'v3-academic'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-eur-year',currency:'eur',product:{id:'v3-academic'},recurring:{interval:'year'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-gbp-month',currency:'gbp',product:{id:'v3-academic'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null},{id:'v3-academic-eur-month',currency:'eur',product:{id:'v3-academic'},recurring:{interval:'month'},unit_amount_decimal:'0',tiers:null}]},products:{data:[{id:'prod_L9QViFub93Te3N',name:'Emails',metadata:{slug:'emails'}},{id:'prod_JTa0oRB0KIDiFJ',name:'Extra widget',metadata:{slug:'extra-widget'}},{id:'prod_GukXSrRcH6AU9m',name:'Enterprise Plan',metadata:{plan:'true',slug:'enterprise'}},{id:'v3-extra-project',name:'Extra project',metadata:{slug:'extra-project'}},{id:'v3-extra-collaborator',name:'Extra collaborator',metadata:{slug:'extra-collaborator'}},{id:'v3-starter',name:'Starter Plan',metadata:{plan:'true',slug:'starter'}},{id:'v3-opensource',name:'Open Source Plan',metadata:{hidden:'true',plan:'true',slug:'opensource'}},{id:'v3-growth',name:'Growth Plan',metadata:{plan:'true',slug:'growth'}},{id:'v3-free',name:'Free Plan',metadata:{plan:'true',slug:'free'}},{id:'v3-business',name:'Business Plan',metadata:{plan:'true',slug:'business'}},{id:'v3-academic',name:'Academic Plan',metadata:{hidden:'true',plan:'true',slug:'academic'}}]}}};var ne,re;!function(e){e.MONTH='month',e.YEAR='year'}(ne||(ne={}));class ie{static from(e){return'month'===e?ne.MONTH:'year'===e?ne.YEAR:null}}class ae{static getCurrencyAbbreviation(e){const t=ae.LOCALE_CURRENCY_MAP[ae.getRegionIdentifier(e).toUpperCase()];return!t||'GBP'!==t&&'EUR'!==t&&'USD'!==t?ae.DEFAULT_CURRENCY_ABBREVIATION:t.toUpperCase()}static getRegionIdentifier(e){if(!e)return ae.DEFAULT_REGION_IDENTIFIER;let t=e.split('_');return 2===t.length?t.pop():(t=e.split('-'),2===t.length?t.pop():e.toUpperCase())}static getPrimaryLocale(e){return e?e.split(',')[0]:ae.DEFAULT_REGION_IDENTIFIER}static getCurrencySymbol(e){if(!e)return ae.DEFAULT_CURRENCY_SYMBOL;switch(e.toUpperCase()){case'EUR':return'';case'GBP':return'';default:return ae.DEFAULT_CURRENCY_SYMBOL}}}ae.DEFAULT_CURRENCY_ABBREVIATION='USD',ae.DEFAULT_CURRENCY_SYMBOL='$',ae.DEFAULT_REGION_IDENTIFIER='US',ae.LOCALE_CURRENCY_MAP={AD:'EUR',AE:'AED',AF:'AFN',AG:'XCD',AI:'XCD',AL:'ALL',AM:'AMD',AN:'ANG',AO:'AOA',AR:'ARS',AS:'USD',AT:'EUR',AU:'AUD',AW:'AWG',AX:'EUR',AZ:'AZN',BA:'BAM',BB:'BBD',BD:'BDT',BE:'EUR',BF:'XOF',BG:'BGN',BH:'BHD',BI:'BIF',BJ:'XOF',BL:'EUR',BM:'BMD',BN:'BND',BO:'BOB',BQ:'USD',BR:'BRL',BS:'BSD',BT:'BTN',BV:'NOK',BW:'BWP',BY:'BYR',BZ:'BZD',CA:'CAD',CC:'AUD',CD:'CDF',CF:'XAF',CG:'XAF',CH:'CHF',CI:'XOF',CK:'NZD',CL:'CLP',CM:'XAF',CN:'CNY',CO:'COP',CR:'CRC',CU:'CUP',CV:'CVE',CW:'ANG',CX:'AUD',CY:'EUR',CZ:'CZK',DE:'EUR',DJ:'DJF',DK:'DKK',DM:'XCD',DO:'DOP',DZ:'DZD',EC:'USD',EE:'EUR',EG:'EGP',EH:'MAD',ER:'ERN',ES:'EUR',ET:'ETB',FI:'EUR',FJ:'FJD',FK:'FKP',FM:'USD',FO:'DKK',FR:'EUR',GA:'XAF',GB:'GBP',GD:'XCD',GE:'GEL',GF:'EUR',GG:'GBP',GH:'GHS',GI:'GIP',GL:'DKK',GM:'GMD',GN:'GNF',GP:'EUR',GQ:'XAF',GR:'EUR',GS:'GBP',GT:'GTQ',GU:'USD',GW:'XOF',GY:'GYD',HK:'HKD',HM:'AUD',HN:'HNL',HR:'HRK',HT:'HTG',HU:'HUF',ID:'IDR',IE:'EUR',IL:'ILS',IM:'GBP',IN:'INR',IO:'USD',IQ:'IQD',IR:'IRR',IS:'ISK',IT:'EUR',JE:'GBP',JM:'JMD',JO:'JOD',JP:'JPY',KE:'KES',KG:'KGS',KH:'KHR',KI:'AUD',KM:'KMF',KN:'XCD',KP:'KPW',KR:'KRW',KW:'KWD',KY:'KYD',KZ:'KZT',LA:'LAK',LB:'LBP',LC:'XCD',LI:'CHF',LK:'LKR',LR:'LRD',LS:'LSL',LT:'EUR',LU:'EUR',LV:'EUR',LY:'LYD',MA:'MAD',MC:'EUR',MD:'MDL',ME:'EUR',MF:'EUR',MG:'MGA',MH:'USD',MK:'MKD',ML:'XOF',MM:'MMK',MN:'MNT',MO:'MOP',MP:'USD',MQ:'EUR',MR:'MRO',MS:'XCD',MT:'EUR',MU:'MUR',MV:'MVR',MW:'MWK',MX:'MXN',MY:'MYR',MZ:'MZN',NA:'NAD',NC:'XPF',NE:'XOF',NF:'AUD',NG:'NGN',NI:'NIO',NL:'EUR',NO:'NOK',NP:'NPR',NR:'AUD',NU:'NZD',NZ:'NZD',OM:'OMR',PA:'PAB',PE:'PEN',PF:'XPF',PG:'PGK',PH:'PHP',PK:'PKR',PL:'PLN',PM:'EUR',PN:'NZD',PR:'USD',PS:'ILS',PT:'EUR',PW:'USD',PY:'PYG',QA:'QAR',RE:'EUR',RO:'RON',RS:'RSD',RU:'RUB',RW:'RWF',SA:'SAR',SB:'SBD',SC:'SCR',SD:'SDG',SE:'SEK',SG:'SGD',SH:'SHP',SI:'EUR',SJ:'NOK',SK:'EUR',SL:'SLL',SM:'EUR',SN:'XOF',SO:'SOS',SR:'SRD',SS:'SSP',ST:'STD',SV:'SVC',SX:'ANG',SY:'SYP',SZ:'SZL',TC:'USD',TD:'XAF',TF:'EUR',TG:'XOF',TH:'THB',TJ:'TJS',TK:'NZD',TL:'USD',TM:'TMT',TN:'TND',TO:'TOP',TR:'TRY',TT:'TTD',TV:'AUD',TW:'TWD',TZ:'TZS',UA:'UAH',UG:'UGX',UM:'USD',US:'USD',UY:'UYU',UZ:'UZS',VA:'EUR',VC:'XCD',VE:'VEF',VG:'USD',VI:'USD',VN:'VND',VU:'VUV',WF:'XPF',WS:'WST',YE:'YER',YT:'EUR',ZA:'ZAR',ZM:'ZMW',ZW:'ZWL'};class oe{constructor(e,t,n){this.code=e,this.name=t,this.symbol=n}format(e,t){return new Intl.NumberFormat(t||'en-US',{style:'currency',currency:this.code,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}}class se{static from(e){return se.values().find((t=>t.code===e.toUpperCase()))}static fromAcceptLanguage(e){return se.fromLocale(ae.getPrimaryLocale(e))}static fromLocale(e){return se.from(ae.getCurrencyAbbreviation(e))}static values(){return[se.EURO,se.POUND_STERLING,se.UNITED_STATES_DOLLAR]}}se.EURO=new class extends oe{constructor(){super('EUR','Euro','')}},se.POUND_STERLING=new class extends oe{constructor(){super('GBP','Pound Sterling','')}},se.UNITED_STATES_DOLLAR=new class extends oe{constructor(){super('USD','United States Dollar','$')}},function(e){e.DEVELOPMENT='development',e.PRODUCTION='production',e.STAGING='staging'}(re||(re={}));class ue{static setActive(e){ue.ACTIVE='string'==typeof e?ue.from(e):e}static getActive(){var e;return void 0===ue.ACTIVE&&((null===(e=null===process||void 0===process?void 0:process.env)||void 0===e?void 0:e.NOTICEABLE_ENV)?ue.ACTIVE=ue.from(process.env.NOTICEABLE_ENV):ue.ACTIVE=re.PRODUCTION),ue.ACTIVE}static from(e){return'development'===e?re.DEVELOPMENT:'production'===e?re.PRODUCTION:'staging'===e?re.STAGING:null}}ue.ACTIVE=void 0;class ce{constructor(e){this.name=e}isSupportedBy(e){return e.includes(this)}}class le{static from(e){for(const t in le)if(t.toString()===e)return le[t];return null}}le.APPEARANCE_CUSTOMIZATION=new ce('Appearance Customization'),le.AUTO_REFRESH=new ce('Auto-refresh'),le.CODE_INJECTION=new ce('Code Injection (CSS & JavaScript)'),le.CROSS_DEVICE_SYNCHRONIZATION=new ce('Cross-Device Synchronization'),le.DASHBOARD_SINGLE_SIGN_ON=new ce('Dashboard Single Sign-On'),le.DISABLE_NEWSPAGES=new ce('Disable Newspages'),le.EMAIL_ACTIVITIES=new ce('Email Activities'),le.EMAIL_CUSTOM_DOMAINS=new ce('Custom From Email Domain'),le.EMAIL_PREFERENCE_CENTER_WIDGET=new ce('Email Preference Center Widget'),le.EMAIL_SENDING=new ce('Email Sending'),le.EMAIL_SUBSCRIPTION_FORM_WIDGET=new ce('Email Subscription Form Widget'),le.EMOJI_REACTIONS=new ce('Emoji Reactions'),le.END_USER_IDENTIFICATION=new ce('End-user Identification'),le.END_USER_SINGLE_SIGN_ON=new ce('End-user Single Sign-On'),le.EXPIRING_PUBLICATIONS=new ce('Expiring Publications'),le.GRAPHQL_API=new ce('GraphQL API'),le.IP_FILTERING=new ce('IP Access Control'),le.MODAL_WIDGET=new ce('Modal Widget'),le.NESTED_LABELS=new ce('Nested Labels'),le.NEWSPAGE_CUSTOM_DOMAINS=new ce('Newspage Custom Domain with HTTPs'),le.NEWSPAGE_EMBED_WIDGET=new ce('Newspage Embed Widget'),le.PINNED_PUBLICATIONS=new ce('Pinned Publications'),le.POPUP_WIDGET=new ce('Popup Widget'),le.PRIVATE_LABELS=new ce('Private Labels'),le.PRIVATE_NEWSPAGES=new ce('Private Newspages'),le.PRIVATE_NEWSPAGES_TOKEN_AUTHENTICATION=new ce('Proxy-based Authentication'),le.PROJECT_ANALYTICS=new ce('Project Analytics'),le.PUBLICATION_ANALYTICS=new ce('Publication Analytics'),le.PUBLICATION_SCHEDULING=new ce('Publication Scheduling'),le.REDIRECTION_WIDGET=new ce('Redirection Widget'),le.SEGMENTATION=new ce('Publication Segmentation'),le.SINGLE_OPT_IN_SUBSCRIPTIONS=new ce('Single Opt-In Subscriptions'),le.TOP_BANNER_WIDGET=new ce('Top Banner Widget'),le.USER_FEEDBACK=new ce('User Feedback'),le.WEB_NOTIFICATIONS=new ce('Web Notifications'),le.WHITE_LABEL=new ce('White Label'),le.ZAPIER_INTEGRATION=new ce('Zapier Integration');class de{constructor(e,t,n,r,i){this.currency=e,this.cycle=t,this.id=n,this.tiers=r,this.value=i}isTiered(){return null===this.value||void 0===this.value}}class pe{constructor(e,t,n){this.flatAmount=e,this.unitAmount=t,this.upTo=n}}class he{constructor(e){this.tiers=e}computeGraduatedPrice(e,t){let n=0,r=0,i=e,a=t;for(const e of this.tiers){const t=null===e.upTo||void 0===e.upTo?Number.MAX_SAFE_INTEGER:e.upTo,o=i<r||i>t;if(r=t,o){if(a>0)continue;break}const s=i+a>t?t-i:a;n+=s*e.unitAmount,i+=s,a-=s}return n}}class _e{static load(e){var t,n;const r=new Map,i=new Map;for(const a of te[e].prices.data){const e=a.product.id,o=null!==(t=se.from(a.currency))&&void 0!==t?t:se.UNITED_STATES_DOLLAR,s=null!==(n=ie.from(a.recurring.interval))&&void 0!==n?n:ne.MONTH,u=a.unit_amount_decimal?parseFloat(a.unit_amount_decimal)/100:null,c=a.tiers?new he(a.tiers.map((e=>new pe(e.flat_amount_decimal?parseFloat(e.flat_amount_decimal)/100:null,e.unit_amount_decimal?parseFloat(e.unit_amount_decimal)/100:null,e.up_to)))):null;let l=r.get(e);l||(l=new Map);const d=new de(o,s,a.id,c,u);l.set(a.id,d),r.set(e,l);let p=i.get(e);p||(p=new Map);let h=p.get(o);h||(h=new Map),h.set(s,d),p.set(o,h),i.set(e,p)}return{pricesById:r,pricesByCurrency:i}}constructor(e){this.productId=e}findById(e){var t;return null===(t=_e.getPricesById().get(this.productId))||void 0===t?void 0:t.get(e)}findByCurrencyCycle(e,t){var n;const r=null===(n=_e.getPricesByCurrency().get(this.productId))||void 0===n?void 0:n.get(e);return r?r.get(t):null}values(){return Array.from(_e.getPricesById().get(this.productId).values())}static getPricesByCurrency(){if(ue.getActive()===re.PRODUCTION){if(void 0===_e.PRODUCTION_PRICES_BY_CURRENCY){const e=_e.load(re.PRODUCTION);_e.PRODUCTION_PRICES_BY_ID=e.pricesById,_e.PRODUCTION_PRICES_BY_CURRENCY=e.pricesByCurrency}return _e.PRODUCTION_PRICES_BY_CURRENCY}if(void 0===_e.STAGING_PRICES_BY_CURRENCY){const e=_e.load(re.STAGING);_e.STAGING_PRICES_BY_ID=e.pricesById,_e.STAGING_PRICES_BY_CURRENCY=e.pricesByCurrency}return _e.STAGING_PRICES_BY_CURRENCY}static getPricesById(){if(ue.getActive()===re.PRODUCTION){if(void 0===_e.PRODUCTION_PRICES_BY_ID){const e=_e.load(re.PRODUCTION);_e.PRODUCTION_PRICES_BY_ID=e.pricesById,_e.PRODUCTION_PRICES_BY_CURRENCY=e.pricesByCurrency}return _e.PRODUCTION_PRICES_BY_ID}if(void 0===_e.STAGING_PRICES_BY_ID){const e=_e.load(re.STAGING);_e.STAGING_PRICES_BY_ID=e.pricesById,_e.STAGING_PRICES_BY_CURRENCY=e.pricesByCurrency}return _e.STAGING_PRICES_BY_ID}}class fe{constructor(e,t,n){this.id=e,this.metadata=n,this.prices=new _e(e),this.slug=(null==n?void 0:n.slug)||t.toLocaleLowerCase().replace(/ /g,'-'),this.title=t}isFree(){return this.prices.values().every((e=>0===e.value))}}class ge{static load(){const e=new Map,t=new Map;for(const n of te[ue.getActive()].products.data){const r=new fe(n.id,n.name,n.metadata);e.set(n.id,r),t.set(r.slug,r)}return{productsById:e,productsBySlug:t}}static getProductsById(){if(ue.getActive()===re.PRODUCTION){if(void 0===ge.PRODUCTION_PRODUCTS_BY_ID){const e=ge.load();ge.PRODUCTION_PRODUCTS_BY_ID=e.productsById,ge.PRODUCTION_PRODUCTS_BY_SLUG=e.productsBySlug}return ge.PRODUCTION_PRODUCTS_BY_ID}if(void 0===ge.STAGING_PRODUCTS_BY_ID){const e=ge.load();ge.STAGING_PRODUCTS_BY_ID=e.productsById,ge.STAGING_PRODUCTS_BY_SLUG=e.productsBySlug}return ge.STAGING_PRODUCTS_BY_ID}static getProductsBySlug(){if(ue.getActive()===re.PRODUCTION){if(void 0===ge.PRODUCTION_PRODUCTS_BY_SLUG){const e=ge.load();ge.PRODUCTION_PRODUCTS_BY_ID=e.productsById,ge.PRODUCTION_PRODUCTS_BY_SLUG=e.productsBySlug}return ge.PRODUCTION_PRODUCTS_BY_SLUG}if(void 0===ge.STAGING_PRODUCTS_BY_SLUG){const e=ge.load();ge.STAGING_PRODUCTS_BY_ID=e.productsById,ge.STAGING_PRODUCTS_BY_SLUG=e.productsBySlug}return ge.STAGING_PRODUCTS_BY_SLUG}static get EMAILS(){return ge.getProductsBySlug().get('emails')}static get EXTRA_COLLABORATOR(){return ge.getProductsBySlug().get('extra-collaborator')}static get EXTRA_PROJECT(){return ge.getProductsBySlug().get('extra-project')}static get EXTRA_WIDGET(){return ge.getProductsBySlug().get('extra-widget')}static find(e){return ge.getProductsById().get(e)}static findBySlug(e){return ge.getProductsBySlug().get(e)}static getPlans(){return Array.from(this.getProductsById().values()).filter((e=>{var t;return'true'===(null===(t=e.metadata)||void 0===t?void 0:t.plan)}))}static values(){return[...this.getProductsById().values()]}}class me{constructor(e){this.name=e}}class ve{constructor(e,t){this.quota=e,this.value=t}}class ye{constructor(...e){this.limits=new Map;for(const t of e)this.limits.set(t.quota,t)}get(e){return this.limits.get(e)}}class Ee{static getLimits(e){const t=e.items.data;let n=0,r=0,i=0,a=0;for(const e of t)try{const t=e.price.product,o=Ne.find(t,null);if(null!==o)n+=o.getQuotaLimit(Ee.ORGANIZATION_ACCESS_TOKENS).value,r+=o.getQuotaLimit(Ee.ORGANIZATION_PROJECTS).value,i+=o.getQuotaLimit(Ee.PROJECT_COLLABORATORS).value,a+=o.getQuotaLimit(Ee.PROJECT_WIDGETS).value;else{const n=ge.find(t);n===ge.findBySlug('extra-collaborator')?i+=e.quantity:n===ge.findBySlug('extra-project')?r+=e.quantity:n===ge.findBySlug('extra-widget')&&(a+=e.quantity)}}catch(e){console.error(e)}return new ye(new ve(Ee.ORGANIZATION_ACCESS_TOKENS,n),new ve(Ee.ORGANIZATION_PROJECTS,r),new ve(Ee.PROJECT_COLLABORATORS,i),new ve(Ee.PROJECT_WIDGETS,a))}}Ee.ORGANIZATION_ACCESS_TOKENS=new me('accessTokens'),Ee.ORGANIZATION_PROJECTS=new me('projects'),Ee.PROJECT_COLLABORATORS=new me('collaborators'),Ee.PROJECT_WIDGETS=new me('widgets');class be extends fe{constructor(e,t,n,r,i,a,o){super(e,t,n),this.description=r,this.features=new Set,i.forEach((e=>{this.features.add(e)})),this.hidden='true'===(null==n?void 0:n.hidden),this.quicklist=a,this.trialPeriodDays=this.hidden||'free'===this.slug?0:14,this.quotaLimits=new Map,o.forEach((e=>{this.quotaLimits.set(e.quota,e)}))}getQuotaLimit(e){return this.quotaLimits.get(e)}includes(e){let t;return t='string'==typeof e?le.from(e):e,this.features.has(t)}}class we extends be{constructor(e,t){super(e,'Academic',t,'Ideal for Academic organizations',[le.APPEARANCE_CUSTOMIZATION,le.NEWSPAGE_CUSTOM_DOMAINS,le.EMOJI_REACTIONS,le.MODAL_WIDGET,le.NEWSPAGE_EMBED_WIDGET,le.POPUP_WIDGET,le.PROJECT_ANALYTICS,le.PUBLICATION_ANALYTICS,le.PUBLICATION_SCHEDULING,le.ZAPIER_INTEGRATION],['<strong>1</strong> project','<strong>2</strong> widgets per project','<strong>2</strong> collaborators per project','Publication analytics','Publication scheduling','Emoji reactions','Custom domain with HTTPS','Noticeable watermark','Zapier integrations','Lovely support'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,2),new ve(Ee.ORGANIZATION_PROJECTS,1),new ve(Ee.PROJECT_COLLABORATORS,2),new ve(Ee.PROJECT_WIDGETS,2)])}}class Ie extends be{constructor(e,t){super(e,'Business',t,'Ideal for companies requiring a full-featured solution',[le.APPEARANCE_CUSTOMIZATION,le.AUTO_REFRESH,le.CODE_INJECTION,le.CROSS_DEVICE_SYNCHRONIZATION,le.DISABLE_NEWSPAGES,le.EMAIL_ACTIVITIES,le.EMAIL_CUSTOM_DOMAINS,le.EMAIL_PREFERENCE_CENTER_WIDGET,le.EMAIL_SENDING,le.EMAIL_SUBSCRIPTION_FORM_WIDGET,le.EMOJI_REACTIONS,le.END_USER_IDENTIFICATION,le.END_USER_SINGLE_SIGN_ON,le.EXPIRING_PUBLICATIONS,le.GRAPHQL_API,le.MODAL_WIDGET,le.NESTED_LABELS,le.NEWSPAGE_CUSTOM_DOMAINS,le.NEWSPAGE_EMBED_WIDGET,le.PINNED_PUBLICATIONS,le.POPUP_WIDGET,le.PRIVATE_LABELS,le.PRIVATE_NEWSPAGES,le.PROJECT_ANALYTICS,le.PUBLICATION_ANALYTICS,le.PUBLICATION_SCHEDULING,le.REDIRECTION_WIDGET,le.SEGMENTATION,le.SINGLE_OPT_IN_SUBSCRIPTIONS,le.TOP_BANNER_WIDGET,le.USER_FEEDBACK,le.WEB_NOTIFICATIONS,le.WHITE_LABEL,le.ZAPIER_INTEGRATION],['<strong>3</strong> projects','<strong>3</strong> widgets per project','<strong>5</strong> collaborators per project','Auto-refresh (Newspage and Widgets)','Code injection (CSS & JavaScript)','Custom domain for sending emails','Private labels','Cross-Device Synchronization','Private Newspages','Segmentation','User feedback','Priority support'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,5),new ve(Ee.ORGANIZATION_PROJECTS,3),new ve(Ee.PROJECT_COLLABORATORS,5),new ve(Ee.PROJECT_WIDGETS,3)])}}class Te extends be{constructor(e,t){super(e,'Enterprise',t,'Ideal for companies with advanced needs',[le.APPEARANCE_CUSTOMIZATION,le.AUTO_REFRESH,le.CODE_INJECTION,le.CROSS_DEVICE_SYNCHRONIZATION,le.DASHBOARD_SINGLE_SIGN_ON,le.DISABLE_NEWSPAGES,le.EMAIL_ACTIVITIES,le.EMAIL_CUSTOM_DOMAINS,le.EMAIL_PREFERENCE_CENTER_WIDGET,le.EMAIL_SENDING,le.EMAIL_SUBSCRIPTION_FORM_WIDGET,le.EMOJI_REACTIONS,le.END_USER_IDENTIFICATION,le.END_USER_SINGLE_SIGN_ON,le.EXPIRING_PUBLICATIONS,le.GRAPHQL_API,le.IP_FILTERING,le.MODAL_WIDGET,le.NESTED_LABELS,le.NEWSPAGE_CUSTOM_DOMAINS,le.NEWSPAGE_EMBED_WIDGET,le.PINNED_PUBLICATIONS,le.POPUP_WIDGET,le.PRIVATE_LABELS,le.PRIVATE_NEWSPAGES,le.PRIVATE_NEWSPAGES_TOKEN_AUTHENTICATION,le.PROJECT_ANALYTICS,le.PUBLICATION_ANALYTICS,le.PUBLICATION_SCHEDULING,le.REDIRECTION_WIDGET,le.SEGMENTATION,le.SINGLE_OPT_IN_SUBSCRIPTIONS,le.TOP_BANNER_WIDGET,le.USER_FEEDBACK,le.WEB_NOTIFICATIONS,le.WHITE_LABEL,le.ZAPIER_INTEGRATION],['Custom number of projects and widgets','Unlimited collaborators','Unlimited publications','Single Sign-On (OIDC or SAML)','Bank wire transfers','Payment by invoice/PO','Assisted installation','24/7 support'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,10),new ve(Ee.ORGANIZATION_PROJECTS,5),new ve(Ee.PROJECT_COLLABORATORS,-1),new ve(Ee.PROJECT_WIDGETS,5)])}}class Se extends be{constructor(e,t){super(e,'Free',t,'Ideal for getting started',[le.MODAL_WIDGET,le.NEWSPAGE_EMBED_WIDGET,le.POPUP_WIDGET],['<strong>1</strong> project','<strong>1</strong> in-app widget','Public Newspage','Custom labels','Internationalization (Newspage and Widgets)','Noticeable watermark'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,1),new ve(Ee.ORGANIZATION_PROJECTS,1),new ve(Ee.PROJECT_COLLABORATORS,1),new ve(Ee.PROJECT_WIDGETS,1)])}}class Oe extends be{constructor(e,t){super(e,'Growth',t,'Ideal for growing brands',[le.APPEARANCE_CUSTOMIZATION,le.DISABLE_NEWSPAGES,le.EMAIL_ACTIVITIES,le.EMAIL_SENDING,le.EMAIL_SUBSCRIPTION_FORM_WIDGET,le.EMOJI_REACTIONS,le.END_USER_IDENTIFICATION,le.END_USER_SINGLE_SIGN_ON,le.EXPIRING_PUBLICATIONS,le.GRAPHQL_API,le.MODAL_WIDGET,le.NEWSPAGE_CUSTOM_DOMAINS,le.NEWSPAGE_EMBED_WIDGET,le.PINNED_PUBLICATIONS,le.POPUP_WIDGET,le.PROJECT_ANALYTICS,le.PUBLICATION_ANALYTICS,le.PUBLICATION_SCHEDULING,le.REDIRECTION_WIDGET,le.TOP_BANNER_WIDGET,le.WHITE_LABEL,le.ZAPIER_INTEGRATION],['<strong>2</strong> projects','<strong>2</strong> widgets per project','<strong>3</strong> collaborators per project','Expiring publications','GraphQL API','Pinned publications','Publication analytics','Publication scheduling','Emoji reactions'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,3),new ve(Ee.ORGANIZATION_PROJECTS,2),new ve(Ee.PROJECT_COLLABORATORS,3),new ve(Ee.PROJECT_WIDGETS,2)])}}class Ce extends be{constructor(e,t){super(e,'Open Source',t,'Ideal for Open Source organizations',[le.APPEARANCE_CUSTOMIZATION,le.NEWSPAGE_CUSTOM_DOMAINS,le.EMOJI_REACTIONS,le.MODAL_WIDGET,le.NEWSPAGE_EMBED_WIDGET,le.POPUP_WIDGET,le.PROJECT_ANALYTICS,le.PUBLICATION_ANALYTICS,le.PUBLICATION_SCHEDULING,le.ZAPIER_INTEGRATION],['<strong>1</strong> project','<strong>2</strong> widgets per project','<strong>2</strong> collaborators per project','Publication analytics','Publication scheduling','Emoji reactions','Custom domain with HTTPS','Noticeable watermark','Zapier integrations','Lovely support'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,2),new ve(Ee.ORGANIZATION_PROJECTS,1),new ve(Ee.PROJECT_COLLABORATORS,2),new ve(Ee.PROJECT_WIDGETS,2)])}}class Ae extends be{constructor(e,t){super(e,'Starter',t,'Ideal for individuals',[le.APPEARANCE_CUSTOMIZATION,le.NEWSPAGE_CUSTOM_DOMAINS,le.DISABLE_NEWSPAGES,le.EMAIL_SENDING,le.EMAIL_SUBSCRIPTION_FORM_WIDGET,le.MODAL_WIDGET,le.NEWSPAGE_EMBED_WIDGET,le.POPUP_WIDGET,le.PROJECT_ANALYTICS,le.REDIRECTION_WIDGET,le.TOP_BANNER_WIDGET,le.WHITE_LABEL,le.ZAPIER_INTEGRATION],['<strong>1</strong> project','<strong>1</strong> in-app widget','Appearance customization','Email sending (additional fee per dispatch)','Newspage custom domain with HTTPS','Noticeable branding removal','Project analytics','Support','Unlimited views','Zapier integrations'],[new ve(Ee.ORGANIZATION_ACCESS_TOKENS,2),new ve(Ee.ORGANIZATION_PROJECTS,1),new ve(Ee.PROJECT_COLLABORATORS,1),new ve(Ee.PROJECT_WIDGETS,1)])}}class Ne{static get ACADEMIC(){return Ne.getPlansBySlug().get('academic')}static get BUSINESS(){return Ne.getPlansBySlug().get('business')}static get ENTERPRISE(){return Ne.getPlansBySlug().get('enterprise')}static get FREE(){return Ne.getPlansBySlug().get('free')}static get GROWTH(){return Ne.getPlansBySlug().get('growth')}static get OPENSOURCE(){return Ne.getPlansBySlug().get('opensource')}static get STARTER(){return Ne.getPlansBySlug().get('starter')}static find(e,t=Ne.FREE){if(!e)return t;const n=Ne.getPlansById().get(e);return n||t}static findBySlug(e,t=Ne.FREE){if(!e)return t;const n=Ne.getPlansBySlug().get(e);return n||t}static include(e,t=!1){return Array.from(Ne.getPlansById().values()).filter((n=>n.hidden===t&&n.includes(e))).sort(((e,t)=>e.prices.findByCurrencyCycle(se.UNITED_STATES_DOLLAR,ne.MONTH).value-t.prices.findByCurrencyCycle(se.UNITED_STATES_DOLLAR,ne.MONTH).value))}static isPlan(e){return Ne.getPlansById().has(e)}static values(){return Array.from(Ne.getPlansById().values())}static getPlansById(){if(ue.getActive()===re.PRODUCTION){if(void 0===Ne.PRODUCTION_PLANS_BY_ID){const e=Ne.load();Ne.PRODUCTION_PLANS_BY_ID=e.plansById,Ne.PRODUCTION_PLANS_BY_SLUG=e.plansBySlug}return Ne.PRODUCTION_PLANS_BY_ID}if(void 0===Ne.STAGING_PLANS_BY_ID){const e=Ne.load();Ne.STAGING_PLANS_BY_ID=e.plansById,Ne.STAGING_PLANS_BY_SLUG=e.plansBySlug}return Ne.STAGING_PLANS_BY_ID}static getPlansBySlug(){if(ue.getActive()===re.PRODUCTION){if(void 0===Ne.PRODUCTION_PLANS_BY_SLUG){const e=Ne.load();Ne.PRODUCTION_PLANS_BY_ID=e.plansById,Ne.PRODUCTION_PLANS_BY_SLUG=e.plansBySlug}return Ne.PRODUCTION_PLANS_BY_SLUG}if(void 0===Ne.STAGING_PLANS_BY_SLUG){const e=Ne.load();Ne.STAGING_PLANS_BY_ID=e.plansById,Ne.STAGING_PLANS_BY_SLUG=e.plansBySlug}return Ne.STAGING_PLANS_BY_SLUG}static load(){var e;const t=new Map,n=new Map;for(const r of ge.getPlans()){switch(null===(e=r.metadata)||void 0===e?void 0:e.slug){case'academic':Ne.add(r,new we(r.id,r.metadata),t,n);break;case'business':Ne.add(r,new Ie(r.id,r.metadata),t,n);break;case'enterprise':Ne.add(r,new Te(r.id,r.metadata),t,n);break;case'free':Ne.add(r,new Se(r.id,r.metadata),t,n);break;case'growth':Ne.add(r,new Oe(r.id,r.metadata),t,n);break;case'opensource':Ne.add(r,new Ce(r.id,r.metadata),t,n);break;case'starter':Ne.add(r,new Ae(r.id,r.metadata),t,n)}}return{plansById:t,plansBySlug:n}}static add(e,t,n,r){n.set(e.id,t),r.set(t.slug,t)}}var Re=function(e){l(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return o(this,n),c(g(e=t.call(this)),'capacity',void 0),e.capacity=r,e}return u(n,[{key:'add',value:function(e){return 0===this.capacity||v(d(n.prototype),'has',this).call(this,e)?this:(v(d(n.prototype),'size',this)<this.capacity||v(d(n.prototype),'delete',this).call(this,this.values().next().value),v(d(n.prototype),'add',this).call(this,e))}},{key:'addAll',value:function(e){if(0===this.capacity)return this;var t,r=I(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;v(d(n.prototype),'add',this).call(this,i)}}catch(e){r.e(e)}finally{r.f()}for(var a=this.values();v(d(n.prototype),'size',this)>this.capacity;)v(d(n.prototype),'delete',this).call(this,a.next().value);return this}},{key:'toArray',value:function(){return Array.from(this)}}]),n}(f(Set)),De=function(e){l(n,e);var t=m(n);function n(e){var r;return o(this,n),r=t.call(this,99),e&&e.length>0&&r.addAll(e),r}return u(n)}(Re),Pe={},ke={},xe={};Object.defineProperty(xe,'__esModule',{value:!0}),xe.formatCookie=void 0;var Le=function(e){var t=e.path,n=e.domain,r=e.expires,i=e.secure,a=function(e){var t=e.sameSite;return void 0===t?null:['none','lax','strict'].indexOf(t.toLowerCase())>=0?t:null}(e);return[null==t?'':';path='+t,null==n?'':';domain='+n,null==r?'':';expires='+r.toUTCString(),void 0===i||!1===i?'':';secure',null===a?'':';SameSite='+a].join('')};xe.formatCookie=function(e,t,n){return[encodeURIComponent(e),'=',encodeURIComponent(t),Le(n)].join('')};var Ue={};function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if('undefined'==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if('string'==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);'Object'===n&&e.constructor&&(n=e.constructor.name);if('Map'===n||'Set'===n)return Array.from(e);if('Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(Ue,'__esModule',{value:!0}),Ue.parseCookies=void 0;function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Ue.parseCookies=function(e){if(0===e.length)return{};var t={},n=new RegExp('\\s*;\\s*');return e.split(n).forEach((function(e){var n=Ge(e.split('='),2),r=n[0],i=n[1],a=decodeURIComponent(r),o=decodeURIComponent(i);t[a]=o})),t},Object.defineProperty(ke,'__esModule',{value:!0}),ke.CookieStorage=void 0;var je=xe,We=Ue,Fe=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}(this,e),this._defaultOptions=Object.assign({domain:null,expires:null,path:null,secure:!1},t),'undefined'!=typeof Proxy)return new Proxy(this,Ve)}var t,n,r;return t=e,(n=[{key:'clear',value:function(){var e=this,t=We.parseCookies(this._getCookie());Object.keys(t).forEach((function(t){return e.removeItem(t)}))}},{key:'getItem',value:function(e){var t=We.parseCookies(this._getCookie());return Object.prototype.hasOwnProperty.call(t,e)?t[e]:null}},{key:'key',value:function(e){var t=We.parseCookies(this._getCookie()),n=Object.keys(t).sort();return e<n.length?n[e]:null}},{key:'removeItem',value:function(e,t){var n=Object.assign(Object.assign(Object.assign({},this._defaultOptions),t),{expires:new Date(0)}),r=je.formatCookie(e,'',n);this._setCookie(r)}},{key:'setItem',value:function(e,t,n){var r=Object.assign(Object.assign({},this._defaultOptions),n),i=je.formatCookie(e,t,r);this._setCookie(i)}},{key:'_getCookie',value:function(){return'undefined'==typeof document||void 0===document.cookie?'':document.cookie}},{key:'_setCookie',value:function(e){document.cookie=e}},{key:'length',get:function(){var e=We.parseCookies(this._getCookie());return Object.keys(e).length}}])&&Be(t.prototype,n),r&&Be(t,r),e}();ke.CookieStorage=Fe;var Ve={defineProperty:function(e,t,n){return e.setItem(t.toString(),String(n.value)),!0},deleteProperty:function(e,t){return e.removeItem(t.toString()),!0},get:function(e,t,n){if('string'==typeof t&&t in e)return e[t];var r=e.getItem(t.toString());return null!==r?r:void 0},getOwnPropertyDescriptor:function(e,t){if(!(t in e))return{configurable:!0,enumerable:!0,value:e.getItem(t.toString()),writable:!0}},has:function(e,t){return'string'==typeof t&&t in e||null!==e.getItem(t.toString())},ownKeys:function(e){for(var t=[],n=0;n<e.length;n++){var r=e.key(n);null!==r&&t.push(r)}return t},preventExtensions:function(e){throw new TypeError('can\'t prevent extensions on this proxy object')},set:function(e,t,n,r){return e.setItem(t.toString(),String(n)),!0}};!function(e){Object.defineProperty(e,'__esModule',{value:!0});var t=ke;Object.defineProperty(e,'CookieStorage',{enumerable:!0,get:function(){return t.CookieStorage}});var n=xe;Object.defineProperty(e,'formatCookie',{enumerable:!0,get:function(){return n.formatCookie}});var r=Ue;Object.defineProperty(e,'parseCookies',{enumerable:!0,get:function(){return r.parseCookies}})}(Pe);var He={},Ke=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}(this,e),this._keys=[],this._memory={}}return Ke(e,[{key:'clear',value:function(){this._memory={},this._keys=[]}},{key:'getItem',value:function(e){return this._memory.hasOwnProperty(e)?this._memory[e]:null}},{key:'key',value:function(e){var t=this._keys[e];return void 0===t?null:t}},{key:'removeItem',value:function(e){delete this._memory[e];var t=this._keys.indexOf(e);t<0||this._keys.splice(t,1)}},{key:'setItem',value:function(e,t){this._memory[e]=t,this._keys.indexOf(e)<0&&this._keys.push(e)}},{key:'length',get:function(){return this._keys.length}}]),e}();He.SimpleMemoryStorage=Ye;var ze=He.SimpleMemoryStorage,Je=u((function e(t,n){o(this,e),c(this,'lastPublicationRead',void 0),c(this,'lastPublicationSeen',void 0),this.lastPublicationRead=t,this.lastPublicationSeen=n})),Ze=function(){function e(){o(this,e)}return u(e,null,[{key:'_hasStorage',value:function(e){try{var t=window[e],n='__noticeable_storage_test';t.setItem(n,'1');var r=t.getItem(n);return t.removeItem(n),'1'===r}catch(e){return!1}}},{key:'_storage',value:function(){return window.noticeable._preferences.firstPartyCookies.localStorage?e._hasStorage('localStorage')?window.localStorage:e._hasStorage('sessionStorage')?window.sessionStorage:new ze:new Pe.CookieStorage({expires:new Date(Date.now()+window.noticeable._preferences.firstPartyCookies.retentionPeriod),sameSite:'Lax'})}},{key:'deleteUserId',value:function(t){e.COOKIE_STORAGE.removeItem('noticeable_uid_'+t)}},{key:'deleteUserSsoToken',value:function(t){e.COOKIE_STORAGE.removeItem('noticeable_usso_'+t)}},{key:'deleteAllUserTraits',value:function(){for(var e in sessionStorage){var t=e.split('_');3===t.length&&'noticeable'===t[0]&&'traits'===t[1]&&sessionStorage.removeItem(e)}}},{key:'deletePublicationReadSeen',value:function(t){var n=e._storage();for(var r in n)(t||!r.startsWith('noticeable_lpr_')&&!r.startsWith('noticeable_lps_'))&&(!t||r!=='noticeable_lpr_'.concat(t)&&r!=='noticeable_lps_'.concat(t))||n.removeItem(r)}},{key:'deleteUserTraits',value:function(e){sessionStorage.removeItem('noticeable_traits_'+e)}},{key:'getProjectStates',value:function(){var t=new Map,n=e._storage();for(var r in n){var i=r.split('_'),a=void 0;if(3===i.length&&'noticeable'===i[0])if('lpr'===i[1]){a=i[2];var o=e.getOrCreateProjectState(t,a),s=n.getItem(r);s&&(o.lastPublicationRead=new De(JSON.parse(s)))}else if('lps'===i[1]){a=i[2];var u=e.getOrCreateProjectState(t,a),c=n.getItem(r);c&&(u.lastPublicationSeen=new De(JSON.parse(c)))}}return t}},{key:'getOrCreateProjectState',value:function(e,t){var n=e.get(t);return n||(n=new Je(new De,new De),e.set(t,n)),n}},{key:'getPublicationRead',value:function(t){var n=e._storage().getItem('noticeable_lpr_'.concat(t));return n?new De(JSON.parse(n)):new Set}},{key:'getPublicationSeen',value:function(t){var n=e._storage().getItem('noticeable_lps_'.concat(t));return n?new De(JSON.parse(n)):new Set}},{key:'getUserId',value:function(t){return e.COOKIE_STORAGE.getItem('noticeable_uid_'+t)}},{key:'getUserIds',value:function(){return this._getIdCookieValueByProject('noticeable_uid')}},{key:'getUserSsoTokens',value:function(){return this._getIdCookieValueByProject('noticeable_usso')}},{key:'getAllUserTraits',value:function(){var e=new Map;for(var t in sessionStorage){var n=t.split('_');if(3===n.length&&'noticeable'===n[0]&&'traits'===n[1]){var r=sessionStorage.getItem(t);r&&e.set(n[2],JSON.parse(r))}}return e}},{key:'getUserTraits',value:function(e){var t=sessionStorage.getItem('noticeable_traits_'+e);return t?JSON.parse(t):{}}},{key:'_getIdCookieValueByProject',value:function(t){var n=e.COOKIE_STORAGE,r=new Map;for(var i in n)if(i.startsWith(t)){var a=i.split('_');3===a.length&&r.set(a[2],n[i])}return r}},{key:'reset',value:function(t){if(this.deletePublicationReadSeen(t),t)this.deleteUserId(t),this.deleteUserTraits(t);else{for(var n in e.COOKIE_STORAGE)n.startsWith('noticeable_uid_')&&e.COOKIE_STORAGE.removeItem(n);this.deleteAllUserTraits()}}},{key:'setPublicationSeen',value:function(t,n){e._storage().setItem('noticeable_lps_'.concat(t),JSON.stringify(n.toArray()))}},{key:'setPublicationRead',value:function(t,n){e._storage().setItem('noticeable_lpr_'.concat(t),JSON.stringify(n.toArray()))}},{key:'setUserId',value:function(t,n){e.COOKIE_STORAGE.setItem('noticeable_uid_'+t,n,{expires:new Date(Date.now()+window.noticeable._preferences.firstPartyCookies.retentionPeriod),sameSite:'None',secure:!0})}},{key:'setUserSsoToken',value:function(t,n){e.COOKIE_STORAGE.setItem('noticeable_usso_'+t,n,{expires:new Date(Date.now()+window.noticeable._preferences.firstPartyCookies.retentionPeriod),sameSite:'None',secure:!0})}},{key:'setUserTraits',value:function(e,t){t&&0!==Object.keys(t).length?sessionStorage.setItem('noticeable_traits_'+e,JSON.stringify(t)):sessionStorage.removeItem('noticeable_traits_'+e)}}]),e}();let Xe;c(Ze,'COOKIE_STORAGE',new Pe.CookieStorage);const qe=new Uint8Array(16);function Qe(){if(!Xe&&(Xe='undefined'!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xe))throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');return Xe(qe)}const $e=[];for(let e=0;e<256;++e)$e.push((e+256).toString(16).slice(1));var et={randomUUID:'undefined'!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function tt(e,t,n){if(et.randomUUID&&!t&&!e)return et.randomUUID();const r=(e=e||{}).random||(e.rng||Qe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return($e[e[t+0]]+$e[e[t+1]]+$e[e[t+2]]+$e[e[t+3]]+'-'+$e[e[t+4]]+$e[e[t+5]]+'-'+$e[e[t+6]]+$e[e[t+7]]+'-'+$e[e[t+8]]+$e[e[t+9]]+'-'+$e[e[t+10]]+$e[e[t+11]]+$e[e[t+12]]+$e[e[t+13]]+$e[e[t+14]]+$e[e[t+15]]).toLowerCase()}(r)}var nt=function(){function e(t,n){o(this,e),c(this,'_dataRepository',void 0),c(this,'_lastPublicationRead',void 0),c(this,'_lastPublicationSeen',void 0),c(this,'_pendingIdentityUpdates',void 0),c(this,'_preferences',void 0),c(this,'_userIds',void 0),c(this,'_userSsoTokens',void 0),c(this,'_userTraits',void 0),this._dataRepository=t,this._lastPublicationRead=new Map,this._lastPublicationSeen=new Map,this._pendingIdentityUpdates=new Map,this._preferences=n,this._userIds=new Map,this._userSsoTokens=new Map,this._userTraits=new Map}var r,i,s,l,d,p,h,_,f;return u(e,[{key:'initialize',value:function(){var e,t=I(Ze.getUserIds());try{for(t.s();!(e=t.n()).done;){var n=y(e.value,2),r=n[0],i=n[1];this._userIds.set(r,i)}}catch(e){t.e(e)}finally{t.f()}var a,o=I(Ze.getUserSsoTokens());try{for(o.s();!(a=o.n()).done;){var s=y(a.value,2),u=s[0],c=s[1];this._userSsoTokens.set(u,c)}}catch(e){o.e(e)}finally{o.f()}var l,d=I(Ze.getAllUserTraits());try{for(d.s();!(l=d.n()).done;){var p=y(l.value,2),h=p[0],_=p[1];this._userTraits.set(h,_)}}catch(e){d.e(e)}finally{d.f()}var f,g=I(Ze.getProjectStates().entries());try{for(g.s();!(f=g.n()).done;){var m=y(f.value,2),v=m[0],E=m[1];this._lastPublicationRead.set(v,E.lastPublicationRead),this._lastPublicationSeen.set(v,E.lastPublicationSeen)}}catch(e){g.e(e)}finally{g.f()}}},{key:'clearLastPublicationRead',value:function(){this._lastPublicationRead.clear()}},{key:'clearLastPublicationSeen',value:function(){this._lastPublicationSeen.clear()}},{key:'createOrExtendUserId',value:function(e){var t=this._userIds.get(e);if(t)Ze.setUserId(e,t);else{var n=tt();this._userIds.set(e,n),Ze.setUserId(e,n)}}},{key:'setLastPublicationRead',value:(f=a(n().mark((function e(t,r,i){var a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(a=this._lastPublicationRead.get(t))&&void 0!==a?a:new De,i.merge||o.clear(),o.addAll(r),this._lastPublicationRead.set(t,o),Ze.setPublicationRead(t,o),!(o.size>0)){e.next=8;break}return e.next=8,this._remoteStateUpdate(t,r,null,!i.merge,!1);case 8:return e.abrupt('return',o);case 9:case'end':return e.stop()}}),e,this)}))),function(e,t,n){return f.apply(this,arguments)})},{key:'setLastPublicationSeen',value:(_=a(n().mark((function e(t,r,i){var a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(a=this._lastPublicationSeen.get(t))&&void 0!==a?a:new De,i.merge||o.clear(),o.addAll(r),this._lastPublicationSeen.set(t,o),Ze.setPublicationSeen(t,o),!(o.size>0)){e.next=8;break}return e.next=8,this._remoteStateUpdate(t,null,r,!1,!i.merge);case 8:return e.abrupt('return',o);case 9:case'end':return e.stop()}}),e,this)}))),function(e,t,n){return _.apply(this,arguments)})},{key:'remoteIdentityUpdate',value:(h=a(n().mark((function e(r){var i,a,o,s,u,c,l,d,p,h,_,f,g,m,v;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.createOrExtendUserId(r),e.next=3,this._isIdentifyAvailable(r);case 3:if(e.sent){e.next=5;break}return e.abrupt('return');case 5:return R.debug('Calling identify for project '.concat(r)),e.prev=6,l={},d=this._userTraits.get(r),(p=this._userSsoTokens.get(r))?l.s=p:l.t={a:null!==(h=null==d?void 0:d.avatarUrl)&&void 0!==h?h:null==d?void 0:d.avatar,d:null!==(_=null==d?void 0:d.displayName)&&void 0!==_?_:null==d?void 0:d.name,e:null==d?void 0:d.email,f:null==d?void 0:d.firstName,i:null!==(f=null==d?void 0:d.id)&&void 0!==f?f:this._userIds.get(r),l:null==d?void 0:d.lastName},e.next=13,fetch('https://pipeline.noticeable.io/i',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(t({p:r},l))});case 13:return g=e.sent,e.next=16,g.json();case 16:if(m=e.sent,g.ok){e.next=20;break}return R.error('Identification failed. '.concat(m.message,' (').concat(m.code,')')),e.abrupt('return');case 20:return e.next=22,this.setLastPublicationReadSeen(r,new De(m.lpr),new De(m.lps),!0,!0,!1);case 22:v={avatarUrl:null===(i=m.t)||void 0===i?void 0:i.a,displayName:null===(a=m.t)||void 0===a?void 0:a.d,email:null===(o=m.t)||void 0===o?void 0:o.e,firstName:null===(s=m.t)||void 0===s?void 0:s.f,id:null===(u=m.t)||void 0===u?void 0:u.i,lastName:null===(c=m.t)||void 0===c?void 0:c.l},this._userTraits.set(r,v),Ze.setUserTraits(r,v),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(6),R.error('Error while calling identify endpoint',e.t0);case 30:case'end':return e.stop()}}),e,this,[[6,27]])}))),function(e){return h.apply(this,arguments)})},{key:'getLastPublicationRead',value:function(e){var t;return null!==(t=this._lastPublicationRead.get(e))&&void 0!==t?t:new De}},{key:'getLastPublicationSeen',value:function(e){var t;return null!==(t=this._lastPublicationSeen.get(e))&&void 0!==t?t:new De}},{key:'getPendingIdentityUpdate',value:function(e){return this._pendingIdentityUpdates.get(e)}},{key:'getUserId',value:function(e){return this._userIds.get(e)}},{key:'getUserSsoToken',value:function(e){return this._userSsoTokens.get(e)}},{key:'getUserTraits',value:function(e){return this._userTraits.get(e)}},{key:'isRead',value:function(e,t){var n=this._lastPublicationRead.get(e);return!!n&&n.has(t)}},{key:'isSeen',value:function(e,t){var n=this._lastPublicationSeen.get(e);return!!n&&n.has(t)}},{key:'reset',value:function(e){if(Ze.reset(e),e)this._lastPublicationRead.delete(e),this._lastPublicationSeen.delete(e),this._userIds.delete(e),this._userSsoTokens.delete(e),this._userTraits.delete(e),this.createOrExtendUserId(e);else{var t=new Set(this._userIds.keys());this._lastPublicationRead.clear(),this._lastPublicationSeen.clear(),this._userIds.clear(),this._userSsoTokens.clear(),this._userTraits.clear();var n,r=I(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.createOrExtendUserId(i)}}catch(e){r.e(e)}finally{r.f()}}}},{key:'setLastPublicationReadSeen',value:(p=a(n().mark((function e(t,r,i,a,o){var s,u,c,l,d,p=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!(p.length>5&&void 0!==p[5])||p[5],r&&(a?(this._lastPublicationRead.set(t,r),Ze.setPublicationRead(t,r)):((c=null!==(u=this._lastPublicationRead.get(t))&&void 0!==u?u:new De).addAll(r.toArray()),this._lastPublicationRead.set(t,c),Ze.setPublicationRead(t,c))),i&&(o?(this._lastPublicationSeen.set(t,i),Ze.setPublicationSeen(t,i)):((d=null!==(l=this._lastPublicationSeen.get(t))&&void 0!==l?l:new De).addAll(i.toArray()),this._lastPublicationSeen.set(t,d),Ze.setPublicationSeen(t,d))),!s){e.next=5;break}return e.abrupt('return',this._remoteStateUpdate(t,r.toArray(),i.toArray(),a,o));case 5:case'end':return e.stop()}}),e,this)}))),function(e,t,n,r,i){return p.apply(this,arguments)})},{key:'update',value:(d=a(n().mark((function e(t,r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pendingIdentityUpdates.has(t)){e.next=3;break}return R.warn('Skipping identify(\''.concat(t,'\', ').concat(JSON.stringify(r),') since another call is already in progress. Make sure you do not call \'identify\' multiple times consecutively.')),e.abrupt('return');case 3:return i=this._update(t,r),this._pendingIdentityUpdates.set(t,i),e.abrupt('return',i);case 6:case'end':return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:'_update',value:(l=a(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.createOrExtendUserId(t),'string'==typeof r?(this._userSsoTokens.set(t,r),Ze.setUserSsoToken(t,r)):(r.id&&(this._userIds.set(t,r.id),Ze.setUserId(t,r.id)),this._userTraits.set(t,r),Ze.setUserTraits(t,r),Ze.deleteUserSsoToken(t),this._userSsoTokens.delete(t)),e.next=4,this.remoteIdentityUpdate(t);case 4:this._pendingIdentityUpdates.delete(t);case 5:case'end':return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:'_isCrossDeviceSynchronizationEnabled',value:(s=a(n().mark((function e(t){var r,i,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getProjectData(t);case 2:if(a=e.sent){e.next=6;break}return R.warn('Skipping cross-device synchronization due to invalid project ID'),e.abrupt('return',!1);case 6:if(!1!==(o=null==a||null===(r=a.features)||void 0===r?void 0:r.crossDeviceSynchronization)){e.next=10;break}return R.warn('Skipping cross-device synchronization because it is disabled at project level'),e.abrupt('return',!1);case 10:if(Ne.find(null!==(i=null==a?void 0:a.planId)&&void 0!==i?i:Ne.FREE.id).includes(le.CROSS_DEVICE_SYNCHRONIZATION)){e.next=13;break}return R.warn('Skipping cross-device synchronization. You need to upgrade to the '.concat(Ne.include(le.CROSS_DEVICE_SYNCHRONIZATION)[0].title,' plan or higher to get this feature')),e.abrupt('return',!1);case 13:if(!0!==o||this._userIds.get(t)||this._userSsoTokens.get(t)){e.next=16;break}return R.warn('Skipping cross-device synchronization because no user ID or SSO token is defined'),e.abrupt('return',!1);case 16:if(!1!==this._preferences.crossDeviceSynchronization){e.next=19;break}return R.warn('Cross-device synchronization disabled at SDK preferences level'),e.abrupt('return',!1);case 19:return e.abrupt('return',!0);case 20:case'end':return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:'_isIdentifyAvailable',value:(i=a(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getProjectData(t);case 2:if(i=e.sent){e.next=6;break}return R.warn('Skipping identify due to invalid project ID'),e.abrupt('return',!1);case 6:if(Ne.find(null!==(r=null==i?void 0:i.planId)&&void 0!==r?r:Ne.FREE.id).includes(le.END_USER_IDENTIFICATION)){e.next=9;break}return R.warn('Skipping end-user identification. You need to upgrade to the '.concat(Ne.include(le.END_USER_IDENTIFICATION)[0].title,' plan or higher to get this feature')),e.abrupt('return',!1);case 9:return e.abrupt('return',!0);case 10:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_remoteStateUpdate',value:(r=a(n().mark((function e(r,i,a,o,s){var u,c,l,d,p,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._isCrossDeviceSynchronizationEnabled(r);case 2:if(e.sent){e.next=4;break}return e.abrupt('return');case 4:R.debug('Calling _remoteStateUpdate for project '.concat(r));try{u={},this._userIds.get(r),c=this._userSsoTokens.get(r),l=this._userTraits.get(r),c?u.s=c:u.t={a:null!==(d=null==l?void 0:l.avatarUrl)&&void 0!==d?d:null==l?void 0:l.avatar,d:null!==(p=null==l?void 0:l.displayName)&&void 0!==p?p:null==l?void 0:l.name,e:null==l?void 0:l.email,f:null==l?void 0:l.firstName,i:null!==(h=null==l?void 0:l.id)&&void 0!==h?h:this._userIds.get(r),l:null==l?void 0:l.lastName},fetch('https://pipeline.noticeable.io/s',{method:'PUT',headers:{'content-type':'application/json'},body:JSON.stringify(t({lpr:i||null,lps:a||null,olpr:o,olps:s,p:r},u))})}catch(e){R.error('Error while calling identify endpoint',e)}case 6:case'end':return e.stop()}}),e,this)}))),function(e,t,n,i,a){return r.apply(this,arguments)})}]),e}(),rt=function(e){return e.WIDGET='widget',e}({}),it='#noticeable-widget';function at(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;e||(R.warn('You specified an invalid selector ('.concat(e,'). Falling back to the default ').concat(n,' selector')),e=n);var r=(t||window.document).querySelectorAll(e);if(0===r.length)throw new Error('Could not find element matching selector: '+e);return 1===r.length||R.warn('Your selector match several elements on this page. The first one was picked'),r.item(0)}var ot=document.createElement('div');ot.id='noticeable-lightbox',ot.innerHTML='<figure><img src="" alt=""><figcaption></figcaption></figure>',ot.onclick=function(){ot.style.display='none',ot.remove(),st.remove()};var st=document.createElement('style');function ut(e,t,n){ot.isConnected||document.body.appendChild(ot),st.isConnected||document.head.insertBefore(st,document.head.firstChild);var r=ot.getElementsByTagName('figcaption')[0],i=ot.getElementsByTagName('img')[0];ot.style.display='flex',i.alt=t.trim().length>0?t:n.trim().length>0?n:'',i.src=e,i.style.transition='all 0.3s';var a=n.trim().length>0?n:t.trim().length>0?t:void 0;a&&(r.innerHTML=a,r.style.display='block')}st.appendChild(document.createTextNode('\n#noticeable-lightbox {\n    align-items: center;\n    background: rgb(0, 0, 0);\n    cursor: zoom-out;\n    display: none;\n    flex-direction: column;\n    height: 100%;\n    inset: 0;\n    justify-content: center;\n    left: 0;\n    margin: 0;\n    overflow: auto;\n    padding: 0;\n    position: fixed;\n    right: 0;\n    top: 0;\n    width: 100%;\n    z-index: 2147483001;\n}\n\n#noticeable-lightbox figure {\n    display: block;\n    left: 50%;\n    margin: 0;\n    max-height: 100%;\n    max-width: 100%;\n    position: absolute;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n#noticeable-lightbox figure img {\n    animation-duration: 0.6s;\n    animation-name: noticeable-zoom;\n    display: block;\n    margin: 0;\n    max-width: none;\n    padding: 48px 48px 0 48px;\n    transition: all 0.3s ease 0s;\n}\n\n#noticeable-lightbox figure figcaption {\n    box-sizing: border-box;\n    color: rgb(204, 204, 204);\n    display: none;\n    margin: 0;\n    padding: 24px 48px 48px 48px;\n    text-align: center;\n    width: 100%;\n}\n\n@keyframes noticeable-zoom {\n    from {\n        transform: scale(0.3)\n    }\n    to {\n        transform: scale(1)\n    }\n}'));var ct,lt,dt,pt,ht,_t=function(){function e(){var t=this;o(this,e),c(this,'_caption',void 0),c(this,'_container',void 0),c(this,'_content',void 0),c(this,'_image',void 0),c(this,'_opened',void 0),this._caption=document.createElement('figcaption'),this._caption.style.color='#ccc',this._caption.style.display='block',this._caption.style.marginTop='24px',this._caption.style.textAlign='center',this._content=document.createElement('figure'),this._content.style.display='block',this._content.style.margin='0',this._content.style.top='50%',this._content.style.maxHeight='100%',this._content.style.maxWidth='100%',this._content.style.left='50%',this._content.style.position='absolute',this._content.style.transform='translate(-50%, -50%)',this._image=document.createElement('img'),this._image.style.display='block',this._image.style.margin='0',this._image.style.padding='48px 48px 16px 48px',this._image.style.transition='0.3s',this._container=document.createElement('div'),this._container.id='noticeable-lightbox',this._content.appendChild(this._image),this._content.appendChild(this._caption),this._container.appendChild(this._content),this._container.style.alignItems='center',this._container.style.background='rgb(0, 0, 0)',this._container.style.bottom='0',this._container.style.cursor='zoom-out',this._container.style.display='flex',this._container.style.flexDirection='column',this._container.style.height='100%',this._container.style.justifyContent='center',this._container.style.left='0',this._container.style.margin='0',this._container.style.overflow='auto',this._container.style.padding='0',this._container.style.position='fixed',this._container.style.right='0',this._container.style.top='0',this._container.style.width='100%',this._container.style.zIndex='2147483001',this._container.addEventListener('click',(function(){return t.close()})),this._opened=!1}return u(e,[{key:'close',value:function(){this._container.remove(),this._opened=!1}},{key:'open',value:function(e,t){this._opened&&this.close(),this._opened=!0,this._image.src=e,t&&(t=t.trim()).length>0?(this._caption.innerHTML=t,this._caption.style.display='block',this._image.alt=t):this._caption.style.display='none',document.body.appendChild(this._container)}}]),e}();!function(e){e.Call='call',e.Reply='reply',e.Syn='syn',e.SynAck='synAck',e.Ack='ack'}(ct||(ct={})),function(e){e.Fulfilled='fulfilled',e.Rejected='rejected'}(lt||(lt={})),function(e){e.ConnectionDestroyed='ConnectionDestroyed',e.ConnectionTimeout='ConnectionTimeout',e.NoIframeSrc='NoIframeSrc'}(dt||(dt={})),function(e){e.DataCloneError='DataCloneError'}(pt||(pt={})),function(e){e.Message='message'}(ht||(ht={}));const ft={'http:':'80','https:':'443'},gt=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,mt=['file:','data:'];const vt=({name:e,message:t,stack:n})=>({name:e,message:t,stack:n});let yt=0;var Et=()=>++yt;const bt=e=>e?e.split('.'):[],wt=(e,t,n)=>{const r=bt(t);return r.reduce(((e,t,i)=>(void 0===e[t]&&(e[t]={}),i===r.length-1&&(e[t]=n),e[t])),e),e},It=(e,t)=>{const n={};return Object.keys(e).forEach((r=>{const i=e[r],a=((e,t)=>{const n=bt(t||'');return n.push(e),(e=>e.join('.'))(n)})(r,t);'object'==typeof i&&Object.assign(n,It(i,a)),'function'==typeof i&&(n[a]=i)})),n};var Tt=(e,t,n,r,i)=>{const{localName:a,local:o,remote:s,originForSending:u,originForReceiving:c}=t;let l=!1;i(`${a}: Connecting call sender`);const d=e=>(...t)=>{let n;i(`${a}: Sending ${e}() call`);try{s.closed&&(n=!0)}catch(e){n=!0}if(n&&r(),l){const t=new Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=dt.ConnectionDestroyed,t}return new Promise(((n,r)=>{const l=Et(),d=t=>{if(t.source!==s||t.data.penpal!==ct.Reply||t.data.id!==l)return;if('*'!==c&&t.origin!==c)return void i(`${a} received message from origin ${t.origin} which did not match expected origin ${c}`);const u=t.data;i(`${a}: Received ${e}() reply`),o.removeEventListener(ht.Message,d);let p=u.returnValue;u.returnValueIsError&&(p=(e=>{const t=new Error;return Object.keys(e).forEach((n=>t[n]=e[n])),t})(p)),(u.resolution===lt.Fulfilled?n:r)(p)};o.addEventListener(ht.Message,d);const p={penpal:ct.Call,id:l,methodName:e,args:t};s.postMessage(p,u)}))},p=n.reduce(((e,t)=>(e[t]=d(t),e)),{});return Object.assign(e,(e=>{const t={};for(const n in e)wt(t,n,e[n]);return t})(p)),()=>{l=!0}},St=(e,t,n,r,i)=>{const{destroy:a,onDestroy:o}=r;let s,u;const c={};return r=>{if('*'!==t&&r.origin!==t)return void i(`Parent: Handshake - Received ACK message from origin ${r.origin} which did not match expected origin ${t}`);i('Parent: Handshake - Received ACK');const l={localName:'Parent',local:window,remote:r.source,originForSending:n,originForReceiving:t};s&&s(),s=((e,t,n)=>{const{localName:r,local:i,remote:a,originForSending:o,originForReceiving:s}=e;let u=!1;const c=e=>{if(e.source!==a||e.data.penpal!==ct.Call)return;if('*'!==s&&e.origin!==s)return void n(`${r} received message from origin ${e.origin} which did not match expected origin ${s}`);const i=e.data,{methodName:c,args:l,id:d}=i;n(`${r}: Received ${c}() call`);const p=e=>t=>{if(n(`${r}: Sending ${c}() reply`),u)return void n(`${r}: Unable to send ${c}() reply due to destroyed connection`);const i={penpal:ct.Reply,id:d,resolution:e,returnValue:t};e===lt.Rejected&&t instanceof Error&&(i.returnValue=vt(t),i.returnValueIsError=!0);try{a.postMessage(i,o)}catch(e){if(e.name===pt.DataCloneError){const t={penpal:ct.Reply,id:d,resolution:lt.Rejected,returnValue:vt(e),returnValueIsError:!0};a.postMessage(t,o)}throw e}};new Promise((e=>e(t[c].apply(t,l)))).then(p(lt.Fulfilled),p(lt.Rejected))};return i.addEventListener(ht.Message,c),()=>{u=!0,i.removeEventListener(ht.Message,c)}})(l,e,i),o(s),u&&u.forEach((e=>{delete c[e]})),u=r.data.methodNames;const d=Tt(c,l,u,a,i);return o(d),c}};var Ot=e=>{let{iframe:t,methods:n={},childOrigin:r,timeout:i,debug:a=!1}=e;const o=(e=>(...t)=>{e&&console.log('[Penpal]',...t)})(a),s=((e,t)=>{const n=[];let r=!1;return{destroy(i){r||(r=!0,t(`${e}: Destroying connection`),n.forEach((e=>{e(i)})))},onDestroy(e){r?e():n.push(e)}}})('Parent',o),{onDestroy:u,destroy:c}=s;r||((e=>{if(!e.src&&!e.srcdoc){const e=new Error('Iframe must have src or srcdoc property defined.');throw e.code=dt.NoIframeSrc,e}})(t),r=(e=>{if(e&&mt.find((t=>e.startsWith(t))))return'null';const t=document.location,n=gt.exec(e);let r,i,a;return n?(r=n[1]?n[1]:t.protocol,i=n[2],a=n[4]):(r=t.protocol,i=t.hostname,a=t.port),`${r}//${i}${a&&a!==ft[r]?`:${a}`:''}`})(t.src));const l='null'===r?'*':r,d=It(n),p=((e,t,n,r)=>i=>{if(!i.source)return;if('*'!==n&&i.origin!==n)return void e(`Parent: Handshake - Received SYN message from origin ${i.origin} which did not match expected origin ${n}`);e('Parent: Handshake - Received SYN, responding with SYN-ACK');const a={penpal:ct.SynAck,methodNames:Object.keys(t)};i.source.postMessage(a,r)})(o,d,r,l),h=St(d,r,l,s,o),_=new Promise(((e,n)=>{const r=((e,t)=>{let n;return void 0!==e&&(n=window.setTimeout((()=>{const n=new Error(`Connection timed out after ${e}ms`);n.code=dt.ConnectionTimeout,t(n)}),e)),()=>{clearTimeout(n)}})(i,c),a=n=>{if(n.source===t.contentWindow&&n.data)if(n.data.penpal!==ct.Syn)if(n.data.penpal!==ct.Ack);else{const t=h(n);t&&(r(),e(t))}else p(n)};window.addEventListener(ht.Message,a),o('Parent: Awaiting handshake'),((e,t)=>{const{destroy:n,onDestroy:r}=t,i=setInterval((()=>{e.isConnected||(clearInterval(i),n())}),6e4);r((()=>{clearInterval(i)}))})(t,s),u((e=>{window.removeEventListener(ht.Message,a),e&&n(e)}))}));return{promise:_,destroy(){c()}}},Ct=function(){function e(t,n,r){o(this,e),c(this,'_element',void 0),c(this,'_loading',void 0),c(this,'_mouseEnterListener',void 0),c(this,'_mouseLeaveListener',void 0),c(this,'_visible',void 0),this._element=t,this._element.classList.add('noticeable-view_hidden'),this._loading=!0,this._mouseEnterListener=n,this._mouseLeaveListener=r,this._visible=!1}var t,r,i,s,l,d,p;return u(e,[{key:'alreadyRendered',value:(p=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:'element',get:function(){return this._element}},{key:'destroy',value:function(){this._mouseEnterListener&&this._element.removeEventListener('mouseenter',this._mouseEnterListener),this._mouseLeaveListener&&this._element.removeEventListener('mouseleave',this._mouseLeaveListener),this._destroy()}},{key:'_destroy',value:function(){}},{key:'hide',value:(d=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._visible){e.next=2;break}return e.abrupt('return');case 2:return this._visible=!1,e.abrupt('return',this._hide());case 4:case'end':return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:'_hide',value:(l=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._element.classList.add('noticeable-view_hidden'),this._element.style.opacity='0',this._element.style.visibility='hidden';case 3:case'end':return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:'refresh',value:(s=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._refresh());case 1:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'render',value:(i=a(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._render(t);case 2:return r=e.sent,this._mouseEnterListener&&this._element.addEventListener('mouseenter',this._mouseEnterListener),this._mouseLeaveListener&&this._element.addEventListener('mouseleave',this._mouseLeaveListener),e.abrupt('return',r);case 6:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'show',value:(r=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._visible){e.next=2;break}return e.abrupt('return');case 2:return this._visible=!0,e.abrupt('return',this._show());case 4:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'_show',value:(t=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._element.classList.remove('noticeable-view_hidden'),this._element.style.opacity='1',this._element.style.visibility='visible';case 3:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:'visible',get:function(){return this._visible}}]),e}(),At=function(e){l(s,e);var t,r,i=m(s);function s(e,t,n,r,a){var u;return o(this,s),c(g(u=i.call(this,t,r,a)),'_clickListener',void 0),c(g(u),'_trigger',void 0),u._clickListener=n,u._element.classList.add('noticeable-trigger-view'),u._trigger=e,u}return u(s,[{key:'destroy',value:function(){this._element.removeEventListener('click',this._clickListener),v(d(s.prototype),'destroy',this).call(this)}},{key:'dispatchEvent',value:function(e,t){this._trigger.widget.eventRegistry.dispatchEvent(this._trigger.widget.id,e,t)}},{key:'refresh',value:(r=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._refresh();case 2:return t=e.sent,this.dispatchEvent(C.WIDGET_TRIGGER_REFRESHED),e.abrupt('return',t);case 5:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'render',value:(t=a(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(d(s.prototype),'render',this).call(this,t);case 2:r=e.sent,this._element.addEventListener('click',this._clickListener),this.dispatchEvent(C.WIDGET_TRIGGER_READY,r);case 5:case'end':return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:'_onIdentityChange',value:function(e,t,n){}}]),s}(Ct),Nt=function(e){l(i,e);var t,r=m(i);function i(e){var t;return o(this,i),c(g(t=r.call(this,e,Lt('Noticeable Trigger',(function(e){t._visible&&(e.target.style.opacity='1',e.target.style.visibility='visible',t._loading=!1)})),(function(){return t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_CLICKED)}),(function(){return t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_MOUSE_ENTERED)}),(function(){return t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_MOUSE_LEFT)}))),'_childConnection',void 0),c(g(t),'_child',void 0),t}return u(i,[{key:'connectToChild',value:function(){var e=this;return Ot({iframe:this._element,methods:{getWidgetId:function(){return e._trigger.widget.id},getWindowLocationHref:function(){return window.location.href},toggle:function(){return e._trigger.widget.toggle()}}})}},{key:'initializeChildConnection',value:(t=a(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._childConnection)||void 0===t?void 0:t.promise;case 2:return this._child=e.sent,e.abrupt('return',null===(r=this._child)||void 0===r?void 0:r.setSdkPreferences(this._trigger.widget.preferences));case 4:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:'child',get:function(){return this._child}},{key:'destroy',value:function(){this._childConnection&&(this._childConnection.destroy(),this._child=void 0,this._childConnection=void 0),this._destroy(),this._element.remove()}}]),i}(At),Rt=function(e){l(h,e);var t,r,i,s,p=m(h);function h(e,t){var n;return o(this,h),c(g(n=p.call(this,t,(function(){return n.dispatchEvent(C.WIDGET_WIDGET_VIEW_MOUSE_ENTERED)}),(function(){return n.dispatchEvent(C.WIDGET_WIDGET_VIEW_MOUSE_LEFT)}))),'_backdrop',void 0),c(g(n),'_backdropClickable',void 0),c(g(n),'_backdropElement',void 0),c(g(n),'_backdropClickListener',void 0),c(g(n),'_widget',void 0),c(g(n),'_zIndex',''),n._backdrop=!1,n._backdropClickable=!1,n._backdropClickListener=function(){return n._backdropClickable?n._widget.close():null},n._backdropElement=document.createElement('div'),n._backdropElement.addEventListener('click',n._backdropClickListener),n._backdropElement.id='noticeable-backdrop',n._backdropElement.style.bottom='0',n._backdropElement.style.left='0',n._backdropElement.style.position='fixed',n._backdropElement.style.right='0',n._backdropElement.style.top='0',n._backdropElement.style.zIndex='2147482999',n._element.classList.add('noticeable-widget-view'),n._element.style.zIndex='-1',n._widget=e,n}return u(h,[{key:'dispatchEvent',value:function(e,t){this._widget.eventRegistry.dispatchEvent(this._widget.id,e,t)}},{key:'publicationFetchLimit',get:function(){return 9}},{key:'aggregationMethod',get:function(){return'nspms'}},{key:'refresh',value:(s=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._refresh();case 2:return t=e.sent,this.dispatchEvent(C.WIDGET_REFRESHED,t),e.abrupt('return',t);case 5:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'render',value:(i=a(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(d(h.prototype),'render',this).call(this,t);case 2:r=e.sent,this.dispatchEvent(C.WIDGET_READY,r);case 4:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'destroy',value:function(){this._backdropElement.remove(),v(d(h.prototype),'destroy',this).call(this)}},{key:'_hide',value:(r=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._backdrop&&this._backdropElement.remove(),e.next=3,v(d(h.prototype),'_hide',this).call(this);case 3:this._element.style.zIndex='-1';case 4:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'_show',value:(t=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._backdrop&&document.body.prepend(this._backdropElement),e.next=3,v(d(h.prototype),'_show',this).call(this);case 3:if(this._element.style.zIndex=this._zIndex,-1==navigator.userAgent.indexOf('Safari')||-1!=navigator.userAgent.indexOf('Chrome')){e.next=6;break}return e.abrupt('return',this.refresh());case 6:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),h}(Ct),Dt=function(e){l(h,e);var r,i,s,p=m(h);function h(e){var t;return o(this,h),c(g(t=p.call(this,e,Lt('Noticeable Widget',(function(e){t._visible&&(e.target.style.opacity='1',e.target.style.visibility='visible',t._loading=!1)})))),'_childConnection',void 0),c(g(t),'_child',void 0),t._element.allowFullscreen=!0,t}return u(h,[{key:'connectToChild',value:function(e){var n=this;return Ot({iframe:this._element,methods:t({close:function(){return n._widget.close()},dispatchEvent:function(e,t){return n.dispatchEvent(e,t)},getWidgetId:function(){return n._widget.id},getWindowLocationHref:function(){return window.location.href},openUrl:function(e,t){window.open(e,t)}},null!=e?e:{})})}},{key:'initializeChildConnection',value:(s=a(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this._childConnection)||void 0===t?void 0:t.promise;case 2:return this._child=e.sent,e.abrupt('return',null===(r=this._child)||void 0===r?void 0:r.setSdkPreferences(this._widget.preferences));case 4:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'child',get:function(){return this._child}},{key:'destroy',value:function(){this._childConnection&&(this._childConnection.destroy(),this._child=void 0,this._childConnection=void 0),v(d(h.prototype),'destroy',this).call(this),this._element.remove()}},{key:'iframe',get:function(){return this._element}},{key:'_hide',value:(i=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this._child)||void 0===t||t.onHide(),e.abrupt('return',v(d(h.prototype),'_hide',this).call(this));case 2:case'end':return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:'_onIdentityChange',value:function(e,t,n){var r;return null===(r=this._child)||void 0===r?void 0:r.onIdentityChange(e,t,n)}},{key:'_show',value:(r=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(d(h.prototype),'_show',this).call(this);case 2:return e.abrupt('return',null===(t=this._child)||void 0===t?void 0:t.onShow());case 3:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),h}(Rt),Pt=function(e){l(i,e);var t,r=m(i);function i(e){var t;return o(this,i),c(g(t=r.call(this,e)),'_windowResizeListener',void 0),t._windowResizeListener=function(){return t.refresh()},t}return u(i,[{key:'_destroy',value:function(){v(d(i.prototype),'_destroy',this).call(this),window.removeEventListener('resize',this._windowResizeListener)}},{key:'_render',value:(t=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener('resize',this._windowResizeListener);case 1:case'end':return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(Dt),kt=function(e){l(r,e);var n=m(r);function r(){return o(this,r),n.apply(this,arguments)}return u(r,[{key:'connectToChild',value:function(e){var n=this;return v(d(r.prototype),'connectToChild',this).call(this,t({getLastPublicationRead:function(){return n._widget.getLastPublicationRead()},setPublicationRead:function(e){return n._widget.setPublicationRead([e],{merge:!0})},setPublicationSeen:function(e){return n._widget.setPublicationSeen([e],{merge:!0})}},null!=e?e:{}))}}]),r}(Pt),xt=function(e){l(n,e);var t=m(n);function n(e){var r;return o(this,n),c(g(r=t.call(this,e)),'_lightbox',void 0),r._lightbox=new _t,r}return u(n,[{key:'connectToChild',value:function(e){var t=this;return v(d(n.prototype),'connectToChild',this).call(this,{zoom:function(e,n){return t._lightbox.open(e,n)}})}}]),n}(kt);function Lt(e,t){var n=document.createElement('iframe');return n.allowtransparency='1',n.frameBorder='1',n.height='0',n.onload=t,n.scrolling='no',n.tabIndex=-1,n.style.border='0',n.style.opacity='0',n.style.overflow='hidden',n.style.userSelect='none',n.style.visibility='hidden',n.title=e,n.width='0',n}var Ut,Gt,Mt,Bt,jt,Wt,Ft,Vt,Ht,Kt,Yt,zt,Jt,Zt,Xt,qt,Qt=function(e){l(p,e);var r,i,s=m(p);function p(){var e;o(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(g(e=s.call.apply(s,[this].concat(n))),'_email',void 0),e}return u(p,[{key:'connectToChild',value:function(e){var n=this;return v(d(p.prototype),'connectToChild',this).call(this,t({setHeight:function(e){var t=e+'px';n.iframe.height=t,n.iframe.style.height=t}},null!=e?e:{}))}},{key:'_render',value:(i=a(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._element.src='https://widgets.noticeable.io/email-preference-center/index.html',this._email=null==t?void 0:t.email,e.next=4,this._widget.getWidgetData();case 4:return i=e.sent,at(null!==(r=null==t?void 0:t.selector)&&void 0!==r?r:i.widgetViewSettings.selector,null==t?void 0:t.root).appendChild(this._element),this.iframe.style.width='100%',e.next=10,v(d(p.prototype),'_render',this).call(this,t);case 10:return this._childConnection=this.connectToChild(),e.next=13,this.initializeChildConnection();case 13:return e.next=15,this._widget.open();case 15:return e.next=17,this.refresh();case 17:return e.abrupt('return',e.sent);case 18:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_refresh',value:(r=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._widget.getEmailSubscription(this._widget.projectId,null!==(t=this._email)&&void 0!==t?t:''),a=this._widget.getProjectData(),o=this._widget.getWidgetData(),s=M(),e.next=6,i;case 6:return u=e.sent,e.next=9,a;case 9:return c=e.sent,e.next=12,o;case 12:return l=e.sent,e.abrupt('return',null===(r=this._child)||void 0===r?void 0:r.refresh({emailSubscription:u,isMobile:s,projectData:c,widgetId:this._widget.id,widgetSettings:l.widgetViewSettings}));case 14:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),p}(Pt),$t=function(e){l(c,e);var r,i,s=m(c);function c(){return o(this,c),s.apply(this,arguments)}return u(c,[{key:'connectToChild',value:function(e){var n=this;return v(d(c.prototype),'connectToChild',this).call(this,t({setHeight:function(e){var t=e+'px';n.iframe.height=t,n.iframe.style.height=t}},null!=e?e:{}))}},{key:'_render',value:(i=a(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._element.src='https://widgets.noticeable.io/email-subscription-form/index.html',e.next=3,this._widget.getWidgetData();case 3:return i=e.sent,at(null!==(r=null==t?void 0:t.selector)&&void 0!==r?r:i.widgetViewSettings.selector,null==t?void 0:t.root).appendChild(this._element),this.iframe.style.width='100%',e.next=9,v(d(c.prototype),'_render',this).call(this,t);case 9:return this._childConnection=this.connectToChild(),e.next=12,this.initializeChildConnection();case 12:return e.next=14,this._widget.open();case 14:return e.next=16,this.refresh();case 16:return e.abrupt('return',e.sent);case 17:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_refresh',value:(r=a(n().mark((function e(){var t,r,i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._widget.getProjectData(),i=this._widget.getWidgetData(),a=M(),e.next=5,r;case 5:return o=e.sent,e.next=8,i;case 8:return s=e.sent,e.abrupt('return',null===(t=this._child)||void 0===t?void 0:t.refresh({isMobile:a,projectData:o,widgetId:this._widget.id,widgetSettings:s.widgetViewSettings}));case 10:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),c}(Pt),en=function(e){l(h,e);var t,r,i,s,c,p=m(h);function h(e){return o(this,h),p.call(this,e)}return u(h,[{key:'_destroy',value:function(){this._widget.trigger.destroy(),v(d(h.prototype),'_destroy',this).call(this)}},{key:'render',value:(c=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleFirstTimeLoading();case 2:return e.abrupt('return',v(d(h.prototype),'render',this).call(this,t));case 3:case'end':return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:'handleFirstTimeLoading',value:(s=a(n().mark((function e(){var t,r,i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._widget.getLastPublicationSeen().size){e.next=15;break}return e.next=4,this._widget.getWidgetData();case 4:if(!((t=e.sent).widgetViewSettings.firstVisitUnreadUnseenCount>=0)){e.next=15;break}if(!(t.widgetViewSettings.firstVisitUnreadUnseenCount<t.widgetViewSettings.maxPublicationCount)){e.next=15;break}return e.next=10,this._widget.getPublicationData();case 10:for(r=e.sent,i=new De,a=r.length-1;a>=t.widgetViewSettings.firstVisitUnreadUnseenCount;a--)o=r[a],i.add(o.id),o.publicationTimestamp;return e.next=15,this._widget.identity.setLastPublicationReadSeen(this._widget.projectId,new De(i.toArray()),new De(i.toArray()),!0,!0,!0);case 15:return e.next=17,this._widget.getPublicationState();case 17:s=e.sent,this._widget.eventRegistry.dispatchEvent(this._widget.id,C.WIDGET_PUBLICATION_UNREAD_COUNT_CHANGED,{value:s.unreadCount}),this._widget.eventRegistry.dispatchEvent(this._widget.id,C.WIDGET_PUBLICATION_UNSEEN_COUNT_CHANGED,{value:s.unseenCount});case 20:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'_render',value:(i=a(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._widget.trigger.render({root:null==t?void 0:t.root,selector:null==t?void 0:t.selector}),this._element.src='https://widgets.noticeable.io/modal/index.html',this._element.style.boxShadow='rgba(0, 0, 0, 0.16) 0 5px 40px',this._element.style.position='fixed',this._zIndex='2147482999',document.body.appendChild(this._element),e.next=8,v(d(h.prototype),'_render',this).call(this,t);case 8:return this._childConnection=v(d(h.prototype),'connectToChild',this).call(this),e.next=11,this.initializeChildConnection();case 11:return e.next=13,this.refresh();case 13:return i=e.sent,e.next=16,r;case 16:return e.abrupt('return',i);case 17:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_refresh',value:(r=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d,p,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._widget.getProjectData(),o=this._widget.getPublicationData(),s=this._widget.getWidgetData(),u=M(),e.next=6,a;case 6:return c=e.sent,e.next=9,o;case 9:return l=e.sent,e.next=12,s;case 12:return d=e.sent,null===(t=this._child)||void 0===t||t.refresh({isMobile:u,projectData:c,publicationData:l,widgetId:this._widget.id,widgetSettings:d.widgetViewSettings}),this._backdrop=null!==(r=d.widgetViewSettings.backdrop)&&void 0!==r&&r,this._backdropClickable=null!==(i=d.widgetViewSettings.backdropClickable)&&void 0!==i&&i,this._backdrop?(this._backdropElement.style.background=null!==(p=d.widgetViewSettings.backdropColor)&&void 0!==p?p:'#00000099',this._widget.opened&&!this._backdropElement.isConnected?document.body.prepend(this._backdropElement):!this._widget.opened&&this._backdropElement.isConnected&&this._backdropElement.remove()):this._backdropElement.isConnected&&this._backdropElement.remove(),u?(this._element.style.borderRadius=j(0),this._element.style.bottom=j(0),this._element.style.height='100%',this._element.style.left=j(0),this._element.style.marginLeft=j(0),this._element.style.marginTop=j(0),this._element.style.maxWidth='unset',this._element.style.minWidth='unset',this._element.style.right=j(0),this._element.style.top=j(0),this._element.style.transform='none',this._element.style.width='100%'):(this._element.style.borderRadius=j(null!==(h=d.widgetViewSettings.borderRadius)&&void 0!==h?h:8),this._element.style.height=d.widgetViewSettings.height+'%',this._element.style.left='50%',this._element.style.marginLeft=-this._element.offsetWidth/2+'px',this._element.style.marginTop=-this._element.offsetHeight/2+'px',this._element.style.maxWidth='780px',this._element.style.minWidth='480px',this._element.style.top='50%',this._element.style.width=d.widgetViewSettings.width+'%'),e.abrupt('return',{publications:l});case 19:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'_show',value:(t=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._widget.getPublicationData();case 2:return t=e.sent,e.next=5,v(d(h.prototype),'_show',this).call(this);case 5:return e.next=7,this.refresh();case 7:return e.abrupt('return',this._widget.setPublicationSeen(t.map((function(e){return e.id})),{merge:!0}));case 8:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),h}(xt),tn=function(e){l(h,e);var t,i,s,p=m(h);function h(e){var t;return o(this,h),c(g(t=p.call(this,e)),'_containerElement',void 0),c(g(t),'_hashChangeListener',void 0),c(g(t),'_optionsUrlSuffix',''),c(g(t),'_mustSkipHashChangeEvent',!1),c(g(t),'_spinnerElement',void 0),c(g(t),'_styleElement',void 0),t._hashChangeListener=function(){var e=a(n().mark((function e(r){var i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._widget.getProjectData(),a=t._widget.getWidgetData(),e.next=4,i;case 4:return o=e.sent,e.next=7,a;case 7:s=e.sent,t._mustSkipHashChangeEvent?t._mustSkipHashChangeEvent=!1:t._element.src=t._computeIframeUrl(o,s);case 9:case'end':return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t._containerElement=document.createElement('div'),t._containerElement.style.height='100%',t._containerElement.style.position='relative',t._containerElement.style.width='100%',t.iframe.style.height='100%',t.iframe.style.width='100%',t._spinnerElement=document.createElement('div'),t._spinnerElement.classList.add('noticeable-widget-spinner'),t._spinnerElement.style.animation='noticeable-spinner 1s linear infinite',t._spinnerElement.style.border='5px solid #e1e1e1',t._spinnerElement.style.borderRadius='50%',t._spinnerElement.style.borderTop='4px solid var(--accent-color, #666)',t._spinnerElement.style.boxSizing='content-box',t._spinnerElement.style.height='22px',t._spinnerElement.style.left='50%',t._spinnerElement.style.position='absolute',t._spinnerElement.style.top='50%',t._spinnerElement.style.transform='translate(-50%, -50%)',t._spinnerElement.style.width='22px',t._styleElement=document.createElement('style'),t._styleElement.innerHTML='@keyframes noticeable-spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }',t}return u(h,[{key:'publicationFetchLimit',get:function(){return 0}},{key:'alreadyRendered',value:(s=a(n().mark((function e(t){var r,i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._widget.getWidgetData();case 2:if(a=e.sent,o=null!==(r=null==t?void 0:t.selector)&&void 0!==r?r:null===(i=a.widgetViewSettings)||void 0===i?void 0:i.selector,e.prev=4,s=at(o,null==t?void 0:t.root)){e.next=8;break}return e.abrupt('return');case 8:0===s.children.length&&s.appendChild(this._containerElement),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:case'end':return e.stop()}}),e,this,[[4,11]])}))),function(e){return s.apply(this,arguments)})},{key:'_destroy',value:function(){this._containerElement.remove(),this._styleElement.remove(),this._hashChangeListener&&window.removeEventListener('hashchange',this._hashChangeListener)}},{key:'_render',value:(i=a(n().mark((function e(t){var r,i,o,s,u,c,l,p,_=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this._widget.getProjectData(),e.next=3,this._widget.getWidgetData();case 3:if(u=e.sent,c=null!==(r=null!==(i=null==t?void 0:t.selector)&&void 0!==i?i:null===(o=u.widgetViewSettings)||void 0===o?void 0:o.selector)&&void 0!==r?r:it,l=at(c,null==t?void 0:t.root)){e.next=9;break}return R.warn('Could not find matching selector: '+c),e.abrupt('return');case 9:return null!=t&&t.root?t.root.appendChild(this._styleElement):document.head.appendChild(this._styleElement),this._containerElement.appendChild(this._spinnerElement),this._containerElement.appendChild(this._element),l.appendChild(this._containerElement),this._optionsUrlSuffix=h._computeOptionsUrlSuffix(u,t),e.next=16,s;case 16:return p=e.sent,this.iframe.addEventListener('load',(function(e){_.iframe.style.opacity='1',_.iframe.style.visibility='visible',_._spinnerElement.style.display='none',_._visible=!0})),this.iframe.src=this._computeIframeUrl(p,u),this.iframe.style.background='transparent',this.iframe.style.border='0',this.iframe.style.opacity='0',this.iframe.style.visibility='hidden',this.iframe.style.width='100%',this._childConnection=v(d(h.prototype),'connectToChild',this).call(this,{openLighbox:function(e,t,n){ut(e,t,n)},setHeight:function(e){_.iframe.height=e+'px',_.iframe.style.height=e+'px'},setLocation:function(e){u.widgetViewSettings.hashRouting&&(e=e.substr(1))!==window.location.hash.substr(1)&&(window.location.hash=e,_._mustSkipHashChangeEvent=!0)},setPublicationRead:function(){var e=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_._widget.setPublicationRead(t,{merge:!0});case 2:window.noticeable.refresh();case 3:case'end':return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setPublicationReadSeen:function(){var e=a(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_._widget.setPublicationSeen(t,{merge:!0}),i=_._widget.setPublicationRead(t,{merge:!0}),e.next=4,r;case 4:return e.next=6,i;case 6:window.noticeable.refresh();case 7:case'end':return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setPublicationSeen:function(){var e=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_._widget.setPublicationSeen(t,{merge:!0});case 2:window.noticeable.refresh();case 3:case'end':return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.next=27,this.initializeChildConnection();case 27:return u.widgetViewSettings.hashRouting&&window.addEventListener('hashchange',this._hashChangeListener,!1),e.abrupt('return',this.refresh());case 29:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_refresh',value:(t=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.iframe.contentDocument)||void 0===t||t.location.reload(),e.abrupt('return',{});case 2:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:'_computeIframeUrl',value:function(e,t){var n='https://'+e.newspageDomain;if(t.widgetViewSettings.hashRouting){var i=window.location.hash.substr(1);n=n+'/'+(i.startsWith('/')?i.substr(1):i)}if(n+=this._optionsUrlSuffix,this._widget.renderOptions.queryParameters&&'object'===r(this._widget.renderOptions.queryParameters))for(var a=0,o=Object.entries(this._widget.renderOptions.queryParameters);a<o.length;a++){var s=y(o[a],2);n=n+'&'+s[0]+'='+s[1]}return n}}],[{key:'_computeOptionsUrlSuffix',value:function(e,t){var n='?embed=true';if(e.widgetViewSettings.header||(n+='&header=false'),e.widgetViewSettings.labelsPicker||(n+='&menu=false'),null!=t&&t.segments&&t.segments.length>0){var r,i=I(t.segments);try{for(i.s();!(r=i.n()).done;){n=n+'&segment='+r.value}}catch(e){i.e(e)}finally{i.f()}}return null!=t&&t.token&&(n=n+'&stoken='+t.token),n}}]),h}(kt);!function(e){e[e.READ=2]='READ',e[e.WRITE=4]='WRITE',e[e.READ_WRITE=6]='READ_WRITE'}(Ut||(Ut={})),function(e){e.API='api',e.SCIM='scim',e.WIDGET='widget',e.ZAPIER='zapier'}(Gt||(Gt={})),function(e){e.IGNORE='ignore',e.OPTIONAL='optional',e.REQUIRED='required'}(Mt||(Mt={})),function(e){e.API='api',e.EMAIL='email',e.NEWSPAGE='newspage',e.WIDGET='widget',e.ZAPIER='zapier'}(Bt||(Bt={})),function(e){e.INVALID_A='invalid-a',e.INVALID_CNAME='invalid-cname',e.INVALID_TXT='invalid-txt',e.MISSING_A='missing-a',e.MISSING_CNAME='missing-cname',e.MISSING_TXT='missing-txt',e.PENDING='pending',e.VERIFIED='verified'}(jt||(jt={})),function(e){e[e.EMAIL_SENDING_DISABLED=0]='EMAIL_SENDING_DISABLED',e[e.EMAIL_SENDING_SUSPENDED=1]='EMAIL_SENDING_SUSPENDED',e[e.ORGANIZATION_NOT_FOUND=2]='ORGANIZATION_NOT_FOUND',e[e.PAYMENT_REQUIRED=3]='PAYMENT_REQUIRED',e[e.PROJECT_NOT_FOUND=4]='PROJECT_NOT_FOUND',e[e.PUBLICATION_NOT_FOUND=5]='PUBLICATION_NOT_FOUND',e[e.STRIPE_USAGE_RECORDING_FAILED=6]='STRIPE_USAGE_RECORDING_FAILED',e[e.TEMPLATE_NOT_FOUND=7]='TEMPLATE_NOT_FOUND',e[e.UPGRADE_REQUIRED=8]='UPGRADE_REQUIRED'}(Wt||(Wt={})),function(e){e[e.CUSTOM=0]='CUSTOM',e[e.OPT_IN_CONFIRMATION=1]='OPT_IN_CONFIRMATION',e[e.PUBLICATION=2]='PUBLICATION'}(Ft||(Ft={})),function(e){e.QUERY_PARAMETER='query-parameter',e.REQUEST_HEADER='request-header'}(Vt||(Vt={})),function(e){e.COMMENTS_PRIVATE='c',e.COMMENTS_PUBLIC='cp',e.EMAIL_COMPLAINTS='ec',e.EMAIL_CTA_CLICKS='ecc',e.EMAIL_DELIVERIES='ed',e.EMAIL_FAILURES='ef',e.EMAIL_HARD_BOUNCES='ehb',e.EMAIL_LINK_CLICKS='elc',e.EMAIL_OPENINGS='eo',e.EMAIL_REJECTIONS='er',e.EMAIL_SENDS='es',e.EMAIL_SOFT_BOUNCES='esb',e.EMAIL_SUBSCRIPTIONS_ARCHIVED='esa',e.EMAIL_SUBSCRIPTIONS_CLEANED='esc',e.EMAIL_SUBSCRIPTIONS_NON_SUBSCRIBED='esns',e.EMAIL_SUBSCRIPTIONS_SUBSCRIBED='ess',e.EMAIL_SUBSCRIPTIONS_UNSUBSCRIBED='esu',e.EMAIL_UNIQUE_LINK_CLICKS='eulc',e.EMAIL_UNIQUE_OPENINGS='euo',e.EMAIL_UNSUBSCRIBES='eu',e.NEWSPAGE_CTA_CLICKS='ncc',e.NEWSPAGE_LINK_CLICKS='nlc',e.NEWSPAGE_VIEWS='nv',e.PUBLICATION_CREATIONS='pc',e.PUSH_SUBSCRIPTIONS='ps',e.PUSH_UNSUBSCRIPTIONS='pu',e.REACTIONS_BAD='rb',e.REACTIONS_GOOD='rg',e.REACTIONS_NEUTRAL='rn',e.WIDGET_CTA_CLICKS='wcc',e.WIDGET_LINK_CLICKS='wlc',e.WIDGET_OPENINGS='wo',e.WIDGET_VIEWS='wv'}(Ht||(Ht={})),function(e){e.COMMENTS='c',e.EMAIL_COMPLAINTS='ec',e.EMAIL_CTA_CLICKS='ecc',e.EMAIL_DELIVERIES='ed',e.EMAIL_FAILURES='ef',e.EMAIL_HARD_BOUNCES='ehb',e.EMAIL_LINK_CLICKS='elc',e.EMAIL_OPENINGS='eo',e.EMAIL_REJECTIONS='er',e.EMAIL_SENDS='es',e.EMAIL_SOFT_BOUNCES='esb',e.EMAIL_UNIQUE_LINK_CLICKS='eulc',e.EMAIL_UNIQUE_OPENINGS='euo',e.EMAIL_UNSUBSCRIBES='eu',e.NEWSPAGE_CTA_CLICKS='ncc',e.NEWSPAGE_LINK_CLICKS='nlc',e.NEWSPAGE_VIEWS='nv',e.REACTIONS_BAD='rb',e.REACTIONS_GOOD='rg',e.REACTIONS_NEUTRAL='rn',e.WIDGET_CTA_CLICKS='wcc',e.WIDGET_LINK_CLICKS='wlc',e.WIDGET_VIEWS='wv'}(Kt||(Kt={})),function(e){e.DAILY='d',e.HOURLY='h'}(Yt||(Yt={})),function(e){e.DAILY='d',e.HOURLY='h'}(zt||(zt={})),function(e){e.MESSAGE='message',e.REDIRECT='redirect'}(Jt||(Jt={})),function(e){e.PASSWORD='password',e.TOKEN='token'}(Zt||(Zt={})),function(e){e.NONE='none',e.ZOOM_IN_ROTATE='zoom-in-rotate'}(Xt||(Xt={})),function(e){e.NOTICEONE='noticeone'}(qt||(qt={}));class nn{constructor(e,...t){this.id=e,this.organizations=t&&0!=t.length?new Set(t):null,this.phrases=U.load(L.NEWSPAGE,e)}static from(e){const t=rn[e];return t?t instanceof Function?(rn[e]=t(),rn[e]):t:null}getId(){return this.id}getOrganizations(){return this.organizations}getPhrases(){return this.phrases}async getPhrase(e,t){return(await this.phrases).phrase(e,t)}isAccessibleFrom(e){return null===this.organizations||this.organizations.has(e)}}const rn={[qt.NOTICEONE]:()=>new nn(qt.NOTICEONE)};var an,on,sn,un,cn,ln,dn,pn,hn,_n,fn,gn,mn,vn,yn,En,bn,wn,In,Tn,Sn,On,Cn,An,Nn,Rn,Dn,Pn,kn,xn,Ln,Un,Gn,Mn,Bn,jn,Wn,Fn;!function(e){e.EMAILS='emails'}(an||(an={})),function(e){e.OIDC='oidc',e.SAML='saml'}(on||(on={})),function(e){e.BLANK='b',e.JOIN_PROJECTS_AS_ADMIN='jpaa',e.JOIN_PROJECTS_AS_EDITOR='jpae',e.JOIN_PROJECTS_AS_VIEWER='jpav'}(sn||(sn={})),function(e){e.DISABLED='disabled',e.PRIVATE='private',e.PUBLIC='public'}(un||(un={})),function(e){e.ABSOLUTE='absolute',e.HIDDEN='hidden',e.RELATIVE='relative'}(cn||(cn={})),function(e){e.DOUBLE_OPT_IN='doi',e.SINGLE_OPT_IN='soi'}(ln||(ln={})),function(e){e.API='api',e.DASHBOARD='dashboard',e.NEWSPAGE='newspage',e.WIDGET='widget',e.ZAPIER='zapier'}(dn||(dn={})),function(e){e.HARD_BOUNCED='hard-bounced',e.NON_SUBSCRIBED='non-subscribed',e.SPAM_COMPLAINT='spam-complaint',e.SUBSCRIBED='subscribed',e.SUPPRESSED='suppressed',e.UNSUBSCRIBED='unsubscribed'}(pn||(pn={})),function(e){e[e.VIEWER=1]='VIEWER',e[e.EDITOR=2]='EDITOR',e[e.ADMIN=4]='ADMIN',e[e.OWNER=7]='OWNER'}(hn||(hn={})),function(e){e.PUBLICATION_CTA='publication+cta',e.PUBLICATION_LINK='publication+link',e.OTHER='other'}(_n||(_n={})),function(e){e.EMAIL='email',e.NEWSPAGE='newspage',e.WIDGET='widget'}(fn||(fn={})),function(e){e.NOTICEABLE='noticeable'}(gn||(gn={})),function(e){e.EMAIL_SUBSCRIPTION_CREATE='email_subscription.create',e.EMAIL_SUBSCRIPTION_DELETE='email_subscription.delete',e.EMAIL_SUBSCRIPTION_UPDATE='email_subscription.update',e.POST_COMMENT_CREATE='post.comment.create',e.POST_CREATE='post.create',e.POST_CREATE_UPDATE='post.create_update',e.POST_DELETE='post.delete',e.POST_UPDATE='post.update'}(mn||(mn={})),function(e){e.HTTP='http',e.ZAPIER='zapier'}(vn||(vn={})),function(e){e.BOUNCE='bounce',e.NONE='none',e.PULSE='pulse',e.SHAKE='shake'}(yn||(yn={})),function(e){e.NONE='none',e.UNREAD_COUNT='unread',e.UNSEEN_COUNT='unseen'}(En||(En={})),function(e){e.END='end',e.START='start'}(bn||(bn={})),function(e){e.DASHED='dashed',e.DOTTED='dotted',e.SOLID='solid'}(wn||(wn={})),function(e){e.NONE='none',e.RECAPTCHA='recaptcha',e.TURNSTILE='turnstile'}(In||(In={})),function(e){e.COMPANY_NAME='company-name',e.COMPANY_WEBSITE='company-website',e.DISPLAY_NAME='display-name',e.EMAIL_ADDRESS='email-address',e.FULL_NAME='full-name',e.LABELS='labels',e.LAST_NAME='last-name'}(Tn||(Tn={})),function(e){e.ALERT='alert',e.BELL='bell',e.CHAT='chat',e.CUSTOM='custom',e.FLAME='flame',e.GIFT='gift',e.MEGAPHONE='megaphone'}(Sn||(Sn={})),function(e){e.BOTTOM_END='bottom-end',e.BOTTOM_START='bottom-start'}(On||(On={})),function(e){e.W100='100',e.W200='200',e.W300='300',e.W400='400',e.W500='500',e.W600='600',e.W700='700',e.W800='800',e.W900='900'}(Cn||(Cn={})),function(e){e.BUBBLES='bubbles',e.LINE_IN_MOTION='line-in-motion',e.NONE='none',e.SHAPES='shapes',e.WAVES='waves'}(An||(An={})),function(e){e.BELL='bell',e.CUSTOM='custom',e.FLAME='flame',e.GIFT='gift',e.MEGAPHONE='megaphone'}(Nn||(Nn={})),function(e){e.OPEN_CTA_URL='open-cta',e.OPEN_IN_NEWSPAGE='open-newspage',e.OPEN_IN_WIDGET='open-widget'}(Rn||(Rn={})),function(e){e.AUTO='auto',e.AUTO_END='auto-end',e.AUTO_START='auto-start',e.BOTTOM='bottom',e.BOTTOM_END='bottom-end',e.BOTTOM_START='bottom-start',e.LEFT='left',e.LEFT_END='left-end',e.LEFT_START='left-start',e.RIGHT='right',e.RIGHT_END='right-end',e.RIGHT_START='right-start',e.TOP='top',e.TOP_END='top-end',e.TOP_START='top-start'}(Dn||(Dn={})),function(e){e.NON_SEGMENTED_PLUS_MATCHING_SEGMENTS='nspms',e.MATCHING_SEGMENTS_ONLY='mso'}(Pn||(Pn={})),function(e){e.CTA='cta',e.CUSTOM='custom',e.NEWSPAGE_PUBLICATION='newspage-publication',e.NEWSPAGE='newspage'}(kn||(kn={})),function(e){e.CENTER='center',e.END='end',e.START='start'}(xn||(xn={})),function(e){e.BUTTON='button',e.LINK='link'}(Ln||(Ln={})),function(e){e.BANNER_CLICK='banner-click',e.CLOSE_BUTTON_CLICK='close-button-click',e.CTA_CLICK='cta-click'}(Un||(Un={})),function(e){e.BOTTOM='bottom',e.BOTTOM_STICKY='bottom-sticky',e.TOP='top',e.TOP_STICKY='top-sticky'}(Gn||(Gn={})),function(e){e.CUSTOM='custom',e.NEWSPAGE='newspage',e.NONE='none'}(Mn||(Mn={})),function(e){e.LINE_THROUGH='line-through',e.UNDERLINE='underline',e.UNSET='unset'}(Bn||(Bn={})),function(e){e.NEVER='never',e.WHEN_ALL_READ='when-all-read',e.WHEN_ALL_SEEN='when-all-seen'}(jn||(jn={})),function(e){e.BADGE='badge',e.CUSTOM='custom',e.FLOATING_BUTTON='floating-button',e.ICON='icon',e.NONE='none'}(Wn||(Wn={})),function(e){e.CARD='card',e.EMAIL_PREFERENCE_CENTER='email-preference-center',e.EMAIL_SUBSCRIPTION_FORM='email-subscription-form',e.FLOATING_CARD='floating-card',e.INLINE='inline',e.MODAL='modal',e.NEWSPAGE_EMBED='newspage-embed',e.POPUP='popup',e.REDIRECTION='redirection',e.SIDE_PANEL='side-panel',e.TOP_BANNER='top-banner'}(Fn||(Fn={}));const Vn={[Fn.CARD]:void 0,[Fn.EMAIL_PREFERENCE_CENTER]:le.EMAIL_PREFERENCE_CENTER_WIDGET,[Fn.EMAIL_SUBSCRIPTION_FORM]:le.EMAIL_SUBSCRIPTION_FORM_WIDGET,[Fn.FLOATING_CARD]:void 0,[Fn.INLINE]:void 0,[Fn.MODAL]:le.MODAL_WIDGET,[Fn.NEWSPAGE_EMBED]:le.NEWSPAGE_EMBED_WIDGET,[Fn.POPUP]:le.POPUP_WIDGET,[Fn.REDIRECTION]:le.REDIRECTION_WIDGET,[Fn.SIDE_PANEL]:void 0,[Fn.TOP_BANNER]:le.TOP_BANNER_WIDGET};var Hn='top',Kn='bottom',Yn='right',zn='left',Jn='auto',Zn=[Hn,Kn,Yn,zn],Xn='start',qn='end',Qn='clippingParents',$n='viewport',er='popper',tr='reference',nr=Zn.reduce((function(e,t){return e.concat([t+'-'+Xn,t+'-'+qn])}),[]),rr=[].concat(Zn,[Jn]).reduce((function(e,t){return e.concat([t,t+'-'+Xn,t+'-'+qn])}),[]),ir=['beforeRead','read','afterRead','beforeMain','main','afterMain','beforeWrite','write','afterWrite'];function ar(e){return e?(e.nodeName||'').toLowerCase():null}function or(e){if(null==e)return window;if('[object Window]'!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function sr(e){return e instanceof or(e).Element||e instanceof Element}function ur(e){return e instanceof or(e).HTMLElement||e instanceof HTMLElement}function cr(e){return'undefined'!=typeof ShadowRoot&&(e instanceof or(e).ShadowRoot||e instanceof ShadowRoot)}var lr={name:'applyStyles',enabled:!0,phase:'write',fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];ur(i)&&ar(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?'':t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]='',e}),{});ur(r)&&ar(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:['computeStyles']};function dr(e){return e.split('-')[0]}var pr=Math.max,hr=Math.min,_r=Math.round;function fr(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+'/'+e.version})).join(' '):navigator.userAgent}function gr(){return!/^((?!chrome|android).)*safari/i.test(fr())}function mr(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&ur(e)&&(i=e.offsetWidth>0&&_r(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&_r(r.height)/e.offsetHeight||1);var o=(sr(e)?or(e):window).visualViewport,s=!gr()&&n,u=(r.left+(s&&o?o.offsetLeft:0))/i,c=(r.top+(s&&o?o.offsetTop:0))/a,l=r.width/i,d=r.height/a;return{width:l,height:d,top:c,right:u+l,bottom:c+d,left:u,x:u,y:c}}function vr(e){var t=mr(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function yr(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&cr(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Er(e){return or(e).getComputedStyle(e)}function br(e){return['table','td','th'].indexOf(ar(e))>=0}function wr(e){return((sr(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ir(e){return'html'===ar(e)?e:e.assignedSlot||e.parentNode||(cr(e)?e.host:null)||wr(e)}function Tr(e){return ur(e)&&'fixed'!==Er(e).position?e.offsetParent:null}function Sr(e){for(var t=or(e),n=Tr(e);n&&br(n)&&'static'===Er(n).position;)n=Tr(n);return n&&('html'===ar(n)||'body'===ar(n)&&'static'===Er(n).position)?t:n||function(e){var t=/firefox/i.test(fr());if(/Trident/i.test(fr())&&ur(e)&&'fixed'===Er(e).position)return null;var n=Ir(e);for(cr(n)&&(n=n.host);ur(n)&&['html','body'].indexOf(ar(n))<0;){var r=Er(n);if('none'!==r.transform||'none'!==r.perspective||'paint'===r.contain||-1!==['transform','perspective'].indexOf(r.willChange)||t&&'filter'===r.willChange||t&&r.filter&&'none'!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Or(e){return['top','bottom'].indexOf(e)>=0?'x':'y'}function Cr(e,t,n){return pr(e,hr(t,n))}function Ar(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Nr(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Rr={name:'arrow',enabled:!0,phase:'main',fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=dr(n.placement),u=Or(s),c=[zn,Yn].indexOf(s)>=0?'height':'width';if(a&&o){var l=function(e,t){return Ar('number'!=typeof(e='function'==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Nr(e,Zn))}(i.padding,n),d=vr(a),p='y'===u?Hn:zn,h='y'===u?Kn:Yn,_=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],f=o[u]-n.rects.reference[u],g=Sr(a),m=g?'y'===u?g.clientHeight||0:g.clientWidth||0:0,v=_/2-f/2,y=l[p],E=m-d[c]-l[h],b=m/2-d[c]/2+v,w=Cr(y,b,E),I=u;n.modifiersData[r]=((t={})[I]=w,t.centerOffset=w-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?'[data-popper-arrow]':n;null!=r&&('string'!=typeof r||(r=t.elements.popper.querySelector(r)))&&yr(t.elements.popper,r)&&(t.elements.arrow=r)},requires:['popperOffsets'],requiresIfExists:['preventOverflow']};function Dr(e){return e.split('-')[1]}var Pr={top:'auto',right:'auto',bottom:'auto',left:'auto'};function kr(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,u=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets,d=e.isFixed,p=o.x,h=void 0===p?0:p,_=o.y,f=void 0===_?0:_,g='function'==typeof l?l({x:h,y:f}):{x:h,y:f};h=g.x,f=g.y;var m=o.hasOwnProperty('x'),v=o.hasOwnProperty('y'),y=zn,E=Hn,b=window;if(c){var w=Sr(n),I='clientHeight',T='clientWidth';if(w===or(n)&&'static'!==Er(w=wr(n)).position&&'absolute'===s&&(I='scrollHeight',T='scrollWidth'),i===Hn||(i===zn||i===Yn)&&a===qn)E=Kn,f-=(d&&w===b&&b.visualViewport?b.visualViewport.height:w[I])-r.height,f*=u?1:-1;if(i===zn||(i===Hn||i===Kn)&&a===qn)y=Yn,h-=(d&&w===b&&b.visualViewport?b.visualViewport.width:w[T])-r.width,h*=u?1:-1}var S,O=Object.assign({position:s},c&&Pr),C=!0===l?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:_r(n*i)/i||0,y:_r(r*i)/i||0}}({x:h,y:f},or(n)):{x:h,y:f};return h=C.x,f=C.y,u?Object.assign({},O,((S={})[E]=v?'0':'',S[y]=m?'0':'',S.transform=(b.devicePixelRatio||1)<=1?'translate('+h+'px, '+f+'px)':'translate3d('+h+'px, '+f+'px, 0)',S)):Object.assign({},O,((t={})[E]=v?f+'px':'',t[y]=m?h+'px':'',t.transform='',t))}var xr={passive:!0};var Lr={left:'right',right:'left',bottom:'top',top:'bottom'};function Ur(e){return e.replace(/left|right|bottom|top/g,(function(e){return Lr[e]}))}var Gr={start:'end',end:'start'};function Mr(e){return e.replace(/start|end/g,(function(e){return Gr[e]}))}function Br(e){var t=or(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function jr(e){return mr(wr(e)).left+Br(e).scrollLeft}function Wr(e){var t=Er(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Fr(e){return['html','body','#document'].indexOf(ar(e))>=0?e.ownerDocument.body:ur(e)&&Wr(e)?e:Fr(Ir(e))}function Vr(e,t){var n;void 0===t&&(t=[]);var r=Fr(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=or(r),o=i?[a].concat(a.visualViewport||[],Wr(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(Vr(Ir(o)))}function Hr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Kr(e,t,n){return t===$n?Hr(function(e,t){var n=or(e),r=wr(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,u=0;if(i){a=i.width,o=i.height;var c=gr();(c||!c&&'fixed'===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:s+jr(e),y:u}}(e,n)):sr(t)?function(e,t){var n=mr(e,!1,'fixed'===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Hr(function(e){var t,n=wr(e),r=Br(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=pr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=pr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+jr(e),u=-r.scrollTop;return'rtl'===Er(i||n).direction&&(s+=pr(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:u}}(wr(e)))}function Yr(e,t,n,r){var i='clippingParents'===t?function(e){var t=Vr(Ir(e)),n=['absolute','fixed'].indexOf(Er(e).position)>=0&&ur(e)?Sr(e):e;return sr(n)?t.filter((function(e){return sr(e)&&yr(e,n)&&'body'!==ar(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce((function(t,n){var i=Kr(e,n,r);return t.top=pr(i.top,t.top),t.right=hr(i.right,t.right),t.bottom=hr(i.bottom,t.bottom),t.left=pr(i.left,t.left),t}),Kr(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function zr(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?dr(i):null,o=i?Dr(i):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(a){case Hn:t={x:s,y:n.y-r.height};break;case Kn:t={x:s,y:n.y+n.height};break;case Yn:t={x:n.x+n.width,y:u};break;case zn:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var c=a?Or(a):null;if(null!=c){var l='y'===c?'height':'width';switch(o){case Xn:t[c]=t[c]-(n[l]/2-r[l]/2);break;case qn:t[c]=t[c]+(n[l]/2-r[l]/2)}}return t}function Jr(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,s=n.boundary,u=void 0===s?Qn:s,c=n.rootBoundary,l=void 0===c?$n:c,d=n.elementContext,p=void 0===d?er:d,h=n.altBoundary,_=void 0!==h&&h,f=n.padding,g=void 0===f?0:f,m=Ar('number'!=typeof g?g:Nr(g,Zn)),v=p===er?tr:er,y=e.rects.popper,E=e.elements[_?v:p],b=Yr(sr(E)?E:E.contextElement||wr(e.elements.popper),u,l,o),w=mr(e.elements.reference),I=zr({reference:w,element:y,strategy:'absolute',placement:i}),T=Hr(Object.assign({},y,I)),S=p===er?T:w,O={top:b.top-S.top+m.top,bottom:S.bottom-b.bottom+m.bottom,left:b.left-S.left+m.left,right:S.right-b.right+m.right},C=e.modifiersData.offset;if(p===er&&C){var A=C[i];Object.keys(O).forEach((function(e){var t=[Yn,Kn].indexOf(e)>=0?1:-1,n=[Hn,Kn].indexOf(e)>=0?'y':'x';O[e]+=A[n]*t}))}return O}function Zr(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?rr:u,l=Dr(r),d=l?s?nr:nr.filter((function(e){return Dr(e)===l})):Zn,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var h=p.reduce((function(t,n){return t[n]=Jr(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[dr(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}var Xr={name:'flip',enabled:!0,phase:'main',fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,u=n.fallbackPlacements,c=n.padding,l=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,_=void 0===h||h,f=n.allowedAutoPlacements,g=t.options.placement,m=dr(g),v=u||(m===g||!_?[Ur(g)]:function(e){if(dr(e)===Jn)return[];var t=Ur(e);return[Mr(e),t,Mr(t)]}(g)),y=[g].concat(v).reduce((function(e,n){return e.concat(dr(n)===Jn?Zr(t,{placement:n,boundary:l,rootBoundary:d,padding:c,flipVariations:_,allowedAutoPlacements:f}):n)}),[]),E=t.rects.reference,b=t.rects.popper,w=new Map,I=!0,T=y[0],S=0;S<y.length;S++){var O=y[S],C=dr(O),A=Dr(O)===Xn,N=[Hn,Kn].indexOf(C)>=0,R=N?'width':'height',D=Jr(t,{placement:O,boundary:l,rootBoundary:d,altBoundary:p,padding:c}),P=N?A?Yn:zn:A?Kn:Hn;E[R]>b[R]&&(P=Ur(P));var k=Ur(P),x=[];if(a&&x.push(D[C]<=0),s&&x.push(D[P]<=0,D[k]<=0),x.every((function(e){return e}))){T=O,I=!1;break}w.set(O,x)}if(I)for(var L=function(e){var t=y.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return T=t,'break'},U=_?3:1;U>0;U--){if('break'===L(U))break}t.placement!==T&&(t.modifiersData[r]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:['offset'],data:{_skip:!1}};function qr(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Qr(e){return[Hn,Yn,Kn,zn].some((function(t){return e[t]>=0}))}var $r={name:'offset',enabled:!0,phase:'main',requires:['popperOffsets'],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=rr.reduce((function(e,n){return e[n]=function(e,t,n){var r=dr(e),i=[zn,Hn].indexOf(r)>=0?-1:1,a='function'==typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[zn,Yn].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],u=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var ei={name:'preventOverflow',enabled:!0,phase:'main',fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,_=n.tetherOffset,f=void 0===_?0:_,g=Jr(t,{boundary:u,rootBoundary:c,padding:d,altBoundary:l}),m=dr(t.placement),v=Dr(t.placement),y=!v,E=Or(m),b='x'===E?'y':'x',w=t.modifiersData.popperOffsets,I=t.rects.reference,T=t.rects.popper,S='function'==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,O='number'==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(w){if(a){var N,R='y'===E?Hn:zn,D='y'===E?Kn:Yn,P='y'===E?'height':'width',k=w[E],x=k+g[R],L=k-g[D],U=h?-T[P]/2:0,G=v===Xn?I[P]:T[P],M=v===Xn?-T[P]:-I[P],B=t.elements.arrow,j=h&&B?vr(B):{width:0,height:0},W=t.modifiersData['arrow#persistent']?t.modifiersData['arrow#persistent'].padding:{top:0,right:0,bottom:0,left:0},F=W[R],V=W[D],H=Cr(0,I[P],j[P]),K=y?I[P]/2-U-H-F-O.mainAxis:G-H-F-O.mainAxis,Y=y?-I[P]/2+U+H+V+O.mainAxis:M+H+V+O.mainAxis,z=t.elements.arrow&&Sr(t.elements.arrow),J=z?'y'===E?z.clientTop||0:z.clientLeft||0:0,Z=null!=(N=null==C?void 0:C[E])?N:0,X=k+Y-Z,q=Cr(h?hr(x,k+K-Z-J):x,k,h?pr(L,X):L);w[E]=q,A[E]=q-k}if(s){var Q,$='x'===E?Hn:zn,ee='x'===E?Kn:Yn,te=w[b],ne='y'===b?'height':'width',re=te+g[$],ie=te-g[ee],ae=-1!==[Hn,zn].indexOf(m),oe=null!=(Q=null==C?void 0:C[b])?Q:0,se=ae?re:te-I[ne]-T[ne]-oe+O.altAxis,ue=ae?te+I[ne]+T[ne]-oe-O.altAxis:ie,ce=h&&ae?function(e,t,n){var r=Cr(e,t,n);return r>n?n:r}(se,te,ue):Cr(h?se:re,te,h?ue:ie);w[b]=ce,A[b]=ce-te}t.modifiersData[r]=A}},requiresIfExists:['offset']};function ti(e,t,n){void 0===n&&(n=!1);var r,i,a=ur(t),o=ur(t)&&function(e){var t=e.getBoundingClientRect(),n=_r(t.width)/e.offsetWidth||1,r=_r(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=wr(t),u=mr(e,o,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(a||!a&&!n)&&(('body'!==ar(t)||Wr(s))&&(c=(r=t)!==or(r)&&ur(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:Br(r)),ur(t)?((l=mr(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=jr(s))),{x:u.left+c.scrollLeft-l.x,y:u.top+c.scrollTop-l.y,width:u.width,height:u.height}}function ni(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var ri={placement:'bottom',modifiers:[],strategy:'absolute'};function ii(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&'function'==typeof e.getBoundingClientRect)}))}function ai(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?ri:i;return function(e,t,n){void 0===n&&(n=a);var i,o,s={placement:'bottom',orderedModifiers:[],options:Object.assign({},ri,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},u=[],c=!1,l={state:s,setOptions:function(n){var i='function'==typeof n?n(s.options):n;d(),s.options=Object.assign({},a,s.options,i),s.scrollParents={reference:sr(e)?Vr(e):e.contextElement?Vr(e.contextElement):[],popper:Vr(t)};var o,c,p=function(e){var t=ni(e);return ir.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(r,s.options.modifiers),c=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return s.orderedModifiers=p.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if('function'==typeof i){var a=i({state:s,name:t,instance:l,options:r}),o=function(){};u.push(a||o)}})),l.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(ii(t,n)){s.rects={reference:ti(t,Sr(n),'fixed'===s.options.strategy),popper:vr(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],a=i.fn,o=i.options,u=void 0===o?{}:o,d=i.name;'function'==typeof a&&(s=a({state:s,options:u,name:d,instance:l})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){l.forceUpdate(),e(s)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(i())}))}))),o}),destroy:function(){d(),c=!0}};if(!ii(e,t))return l;function d(){u.forEach((function(e){return e()})),u=[]}return l.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var oi=ai({defaultModifiers:[{name:'eventListeners',enabled:!0,phase:'write',fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,u=or(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener('scroll',n.update,xr)})),s&&u.addEventListener('resize',n.update,xr),function(){a&&c.forEach((function(e){e.removeEventListener('scroll',n.update,xr)})),s&&u.removeEventListener('resize',n.update,xr)}},data:{}},{name:'popperOffsets',enabled:!0,phase:'read',fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=zr({reference:t.rects.reference,element:t.rects.popper,strategy:'absolute',placement:t.placement})},data:{}},{name:'computeStyles',enabled:!0,phase:'beforeWrite',fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,u=void 0===s||s,c={placement:dr(t.placement),variation:Dr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:'fixed'===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,kr(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,kr(Object.assign({},c,{offsets:t.modifiersData.arrow,position:'absolute',adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{'data-popper-placement':t.placement})},data:{}},lr,$r,Xr,ei,Rr,{name:'hide',enabled:!0,phase:'main',requiresIfExists:['preventOverflow'],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=Jr(t,{elementContext:'reference'}),s=Jr(t,{altBoundary:!0}),u=qr(o,r),c=qr(s,i,a),l=Qr(u),d=Qr(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{'data-popper-reference-hidden':l,'data-popper-escaped':d})}}]});window.process={env:{NODE_ENV:'production'}};var si=function(e){l(_,e);var t,r,i,s,p,h=m(_);function _(e){var t;return o(this,_),c(g(t=h.call(this,e)),'_popper',void 0),t}return u(_,[{key:'_destroy',value:function(){this._widget.trigger.destroy(),v(d(_.prototype),'_destroy',this).call(this)}},{key:'render',value:(p=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleFirstTimeLoading();case 2:return e.abrupt('return',v(d(_.prototype),'render',this).call(this,t));case 3:case'end':return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:'handleFirstTimeLoading',value:(s=a(n().mark((function e(){var t,r,i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._widget.getLastPublicationSeen().size){e.next=15;break}return e.next=4,this._widget.getWidgetData();case 4:if(!((t=e.sent).widgetViewSettings.firstVisitUnreadUnseenCount>=0)){e.next=15;break}if(!(t.widgetViewSettings.firstVisitUnreadUnseenCount<t.widgetViewSettings.maxPublicationCount)){e.next=15;break}return e.next=10,this._widget.getPublicationData();case 10:for(r=e.sent,i=new De,a=r.length-1;a>=t.widgetViewSettings.firstVisitUnreadUnseenCount;a--)o=r[a],i.add(o.id),o.publicationTimestamp;return e.next=15,this._widget.identity.setLastPublicationReadSeen(this._widget.projectId,new De(i.toArray()),new De(i.toArray()),!0,!0,!0);case 15:return e.next=17,this._widget.getPublicationState();case 17:s=e.sent,this._widget.eventRegistry.dispatchEvent(this._widget.id,C.WIDGET_PUBLICATION_UNREAD_COUNT_CHANGED,{value:s.unreadCount}),this._widget.eventRegistry.dispatchEvent(this._widget.id,C.WIDGET_PUBLICATION_UNSEEN_COUNT_CHANGED,{value:s.unseenCount});case 20:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'_render',value:(i=a(n().mark((function e(t){var r,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._widget.trigger.render({root:null==t?void 0:t.root,selector:null==t?void 0:t.selector}),this._element.src='https://widgets.noticeable.io/popup/index.html',this._element.style.boxShadow='rgba(0, 0, 0, 0.16) 0 5px 40px',this._element.style.position='fixed',this._zIndex='2147482999',document.body.appendChild(this._element),e.next=8,v(d(_.prototype),'_render',this).call(this,t);case 8:return this._childConnection=v(d(_.prototype),'connectToChild',this).call(this),e.next=11,this.initializeChildConnection();case 11:return e.next=13,this.refresh();case 13:return a=e.sent,e.next=16,i;case 16:return null===(r=this._popper)||void 0===r||r.forceUpdate(),e.abrupt('return',a);case 18:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_refresh',value:(r=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d,p,h,_,f,g,m,v,y,E,b,w;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=this._widget.getProjectData(),c=this._widget.getPublicationData(),l=this._widget.getWidgetData(),d=M(),e.next=6,u;case 6:return p=e.sent,e.next=9,c;case 9:return h=e.sent,e.next=12,l;case 12:if(_=e.sent,null===(t=this._child)||void 0===t||t.refresh({isMobile:d,projectData:p,publicationData:h,widgetId:this._widget.id,widgetSettings:_.widgetViewSettings}),f=_.triggerView,this._backdrop=null!==(r=_.widgetViewSettings.backdrop)&&void 0!==r&&r,this._backdropClickable=null!==(i=_.widgetViewSettings.backdropClickable)&&void 0!==i&&i,this._backdrop?(this._backdropElement.style.background=null!==(g=_.widgetViewSettings.backdropColor)&&void 0!==g?g:'#00000099',this._widget.opened&&!this._backdropElement.isConnected?document.body.prepend(this._backdropElement):!this._widget.opened&&this._backdropElement.isConnected&&this._backdropElement.remove()):this._backdropElement.isConnected&&this._backdropElement.remove(),this._element.style.borderRadius=j(null!==(a=_.widgetViewSettings.borderRadius)&&void 0!==a?a:8),this._element.style.height=j(null!==(o=_.widgetViewSettings.height)&&void 0!==o?o:520),this._element.style.width=j(null!==(s=_.widgetViewSettings.width)&&void 0!==s?s:420),m=null==_?void 0:_.triggerViewSettings,v=null==m?void 0:m.placement,m&&B(p.language)&&(v=m.placement===On.BOTTOM_END?On.BOTTOM_START:On.BOTTOM_END),!d){e.next=37;break}this._popper&&(this._popper.destroy(),this._popper=void 0),this._element.style.width='100%',this._element.style.borderRadius=j(0),this._element.style.bottom=j(0),this._element.style.height='100%',this._element.style.left=j(0),this._element.style.position='fixed',this._element.style.right=j(0),this._element.style.top=j(0),this._element.style.transform='none',e.next=50;break;case 37:if(Wn.BADGE!==f&&Wn.CUSTOM!==f&&Wn.ICON!==f){e.next=49;break}if(y=this._widget.trigger.view.element,Wn.BADGE===f&&(y=this._widget.trigger.view.container),E={modifiers:[{name:'offset',options:{offset:function(){return[_.widgetViewSettings.horizontalOffset,_.widgetViewSettings.verticalOffset]}}}],placement:_.widgetViewSettings.placement},this._popper){e.next=45;break}this._popper=oi(y,this._element,E),e.next=47;break;case 45:return e.next=47,this._popper.setOptions(E);case 47:e.next=50;break;case 49:Wn.FLOATING_BUTTON===f&&(this._element.style.bottom=j(82+_.widgetViewSettings.verticalOffset),this._element.style.left=v===On.BOTTOM_END?'unset':j(null!==(b=(null==m?void 0:m.horizontalOffset)+_.widgetViewSettings.horizontalOffset)&&void 0!==b?b:20),this._element.style.overflow='hidden',this._element.style.right=v===On.BOTTOM_START?'unset':j(null!==(w=(null==m?void 0:m.horizontalOffset)+_.widgetViewSettings.horizontalOffset)&&void 0!==w?w:20),this._element.style.top='unset');case 50:return e.abrupt('return',{publications:h});case 51:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'_show',value:(t=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._widget.getPublicationData();case 2:return t=e.sent,e.next=5,v(d(_.prototype),'_show',this).call(this);case 5:return e.next=7,this.refresh();case 7:return e.abrupt('return',this._widget.setPublicationSeen(t.map((function(e){return e.id})),{merge:!0}));case 8:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),_}(xt),ui=function(e){l(h,e);var t,r,i,s,p=m(h);function h(e){var t;return o(this,h),c(g(t=p.call(this,e)),'_displayAfterTimeout',void 0),t._element.style.display='none',t}return u(h,[{key:'publicationFetchLimit',get:function(){return 1}},{key:'_destroy',value:function(){v(d(h.prototype),'_destroy',this).call(this),this._displayAfterTimeout&&(clearTimeout(this._displayAfterTimeout),this._displayAfterTimeout=void 0)}},{key:'_hide',value:(s=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._element.style.display='none',e.abrupt('return',v(d(h.prototype),'_hide',this).call(this));case 2:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'_render',value:(i=a(n().mark((function e(t){var r,i,a,o,s,u=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._element.height='0',this._element.src='https://widgets.noticeable.io/top-banner/index.html',this._element.width='100%',e.next=5,this._widget.getWidgetData();case 5:if(a=e.sent,(o=null!==(r=null==t?void 0:t.selector)&&void 0!==r?r:null==a||null===(i=a.widgetViewSettings)||void 0===i?void 0:i.selector)||(o='body'),s=at(o,null==t?void 0:t.root)){e.next=11;break}return e.abrupt('return');case 11:return'bottom'===a.widgetViewSettings.position?(this._element.style.bottom='0',this._element.style.position='relative',this._element.style.top='unset',s.appendChild(this._element)):'bottom-sticky'===a.widgetViewSettings.position?(this._element.style.bottom='0',this._element.style.position='sticky',this._element.style.top='unset',this._element.style.zIndex='2147483646',s.appendChild(this._element)):'top'===a.widgetViewSettings.position?(this._element.style.bottom='unset',this._element.style.position='relative',this._element.style.top='0',s.insertBefore(this._element,s.firstChild)):(this._element.style.bottom='unset',this._element.style.position='sticky',this._element.style.top='0',this._element.style.zIndex='2147483646',s.insertBefore(this._element,s.firstChild)),e.next=14,v(d(h.prototype),'_render',this).call(this,t);case 14:return this._childConnection=v(d(h.prototype),'connectToChild',this).call(this,{closeAndMarkPublicationRead:function(e){u._widget.setPublicationRead([e],{merge:!0}),u._widget.close()},setHeight:function(e){return u._element.height=e?j(e):'0'}}),e.next=17,this.initializeChildConnection();case 17:return e.abrupt('return',this.refresh());case 18:case'end':return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:'_refresh',value:(r=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d,p=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._widget.getProjectData(),i=this._widget.getPublicationData(),a=this._widget.getWidgetData(),o=M(),e.next=6,r;case 6:return s=e.sent,e.next=9,i;case 9:return u=e.sent,e.next=12,a;case 12:if(c=e.sent,null===(t=this._child)||void 0===t||t.refresh({isMobile:o,projectData:s,publicationData:u,widgetId:this._widget.id,widgetSettings:c.widgetViewSettings}),l=c.widgetViewSettings.displayAfter,u&&!(u.length<=0)){e.next=18;break}return R.info('Widget '.concat(this._widget.id,' not opening because there are no publications to display')),e.abrupt('return');case 18:if(d=u[0].id,this._widget.getLastPublicationRead().has(d)||!c.widgetViewSettings.mobile&&M()){e.next=28;break}if(this._widget.opened){e.next=26;break}if(!(l<=0)){e.next=25;break}return e.abrupt('return',this._widget.open());case 25:this._displayAfterTimeout=setTimeout((function(){return p._widget.open()}),l);case 26:e.next=30;break;case 28:return e.next=30,this._widget.close();case 30:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'_show',value:(t=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._widget.getPublicationData();case 2:return t=e.sent,this._element.style.display='block',e.next=6,v(d(h.prototype),'_show',this).call(this);case 6:return e.abrupt('return',this._widget.setPublicationSeen([t[0].id],{merge:!0}));case 7:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),h}(kt),ci=function(e){l(h,e);var t,r,i,s,p=m(h);function h(e){var t;return o(this,h),c(g(t=p.call(this,e)),'_container',void 0),c(g(t),'_containerOldStyles',void 0),t._clickListener=function(){t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_CLICKED),t._trigger.widget.toggle()},t}return u(h,[{key:'container',get:function(){return this._container}},{key:'_destroy',value:function(){this._container&&(this._containerOldStyles&&(this._container.style.cursor=this._containerOldStyles.cursor,this._container.style.display=this._containerOldStyles.display,this._container.style.paddingLeft=this._containerOldStyles.paddingLeft,this._container.style.paddingRight=this._containerOldStyles.paddingRight,this._container.style.position=this._containerOldStyles.position,this._container.style.userSelect=this._containerOldStyles.userSelect,this._containerOldStyles=void 0),this._container=void 0)}},{key:'_render',value:(s=a(n().mark((function e(t){var r,i,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._trigger.getSettings();case 2:return a=e.sent,o=null!==(r=null!==(i=t.selector)&&void 0!==i?i:a.selector)&&void 0!==r?r:it,this._container=at(o,t.root),this._container.addEventListener('click',this._clickListener),this._container.classList.remove('noticeable-badge_visible'),this._containerOldStyles={cursor:this._container.style.cursor,display:this._container.style.display,paddingLeft:this._container.style.paddingLeft,paddingRight:this._container.style.paddingRight,position:this._container.style.position,userSelect:this._container.style.userSelect},this._container.style.cursor='pointer',this._container.style.display='inline-block',this._container.style.position='relative',this._container.style.userSelect='none',this._element.src='https://widgets.noticeable.io/triggers/badge/index.html',this._element.height='0',this._element.width='0','start'===a.placement?this._container.prepend(this._element):this._container.appendChild(this._element),this._childConnection=v(d(h.prototype),'connectToChild',this).call(this),e.next=19,this.initializeChildConnection();case 19:return e.next=21,this.refresh();case 21:case'end':return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:'_refresh',value:(i=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d,p,h,_,f,g,m,v,y;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this._trigger.widget.getProjectLanguage(),s=this._trigger.getPublicationState(),u=this._trigger.getSettings(),c=getComputedStyle(this._container),l=parseFloat(null!==(t=null===(r=c.fontSize)||void 0===r?void 0:r.replace('px',''))&&void 0!==t?t:16),d=Math.round(l+.25*l),e.next=8,o;case 8:return p=e.sent,e.next=11,u;case 11:h=e.sent,_=h.placement,B(p)&&(_=h.placement===bn.START?bn.END:bn.START),f=null!==(i=h.horizontalOffset)&&void 0!==i?i:0,this._element.style.bottom='0',this._element.style.margin='auto 0',this._element.style.position='absolute',this._element.style.top='0',g=this._container,e.t0=h.animation,e.next=e.t0===yn.BOUNCE?23:e.t0===yn.PULSE?29:e.t0===yn.NONE?35:e.t0===yn.SHAKE?39:43;break;case 23:return m=Math.ceil(.2*d),v=2*(6+.2*(d+6)),this._element.height=d+v+'px',this._element.width=d+m+'px',_===bn.END?(this._element.style.left='unset',this._element.style.right='0',g.style.paddingLeft=this._containerOldStyles.paddingLeft,g.style.paddingRight=f+d+m+this._containerOldStyles.paddingRight+'px'):_===bn.START&&(this._element.style.left='0',this._element.style.right='unset',g.style.paddingLeft=f+d+m+this._containerOldStyles.paddingLeft+'px',g.style.paddingRight=this._containerOldStyles.paddingRight),e.abrupt('break',43);case 29:return m=Math.ceil(1.5*d),v=Math.ceil(1.5*d),this._element.height=d+v+'px',this._element.width=d+m+'px',_===bn.END?(this._element.style.left='unset',this._element.style.right='0',g.style.paddingLeft=this._containerOldStyles.paddingLeft,g.style.paddingRight=f+d+m/2+this._containerOldStyles.paddingRight+'px'):_===bn.START&&(this._element.style.left='0',this._element.style.right='unset',g.style.paddingLeft=f+d+m/2+this._containerOldStyles.paddingLeft+'px',g.style.paddingRight=this._containerOldStyles.paddingRight),e.abrupt('break',43);case 35:return this._element.height=d+'px',this._element.width=d+'px',_===bn.END?(this._element.style.left='unset',this._element.style.right='0',g.style.paddingLeft=this._containerOldStyles.paddingLeft,g.style.paddingRight=f+d+this._containerOldStyles.paddingRight+'px'):_===bn.START&&(this._element.style.left='0',this._element.style.right='unset',g.style.paddingLeft=f+d+this._containerOldStyles.paddingLeft+'px',g.style.paddingRight=this._containerOldStyles.paddingRight),e.abrupt('break',43);case 39:return this._element.height=d+'px',this._element.width=d+6+'px',_===bn.END?(this._element.style.left='unset',this._element.style.right='0',g.style.paddingLeft=this._containerOldStyles.paddingLeft,g.style.paddingRight=f+d+6+this._containerOldStyles.paddingRight+'px'):_===bn.START&&(this._element.style.left='0',this._element.style.right='unset',g.style.paddingLeft=f+d+6+this._containerOldStyles.paddingLeft+'px',g.style.paddingRight=this._containerOldStyles.paddingRight),e.abrupt('break',43);case 43:return h.fontSize=l,h.size=d,e.next=47,s;case 47:if(y=e.sent,h.hideBehavior!==jn.WHEN_ALL_READ||0!==y.unreadCount){e.next=53;break}return e.next=51,this.hide();case 51:case 56:e.next=60;break;case 53:if(h.hideBehavior!==jn.WHEN_ALL_SEEN||0!==y.unseenCount){e.next=58;break}return e.next=56,this.hide();case 58:return e.next=60,this.show();case 60:return e.next=62,null===(a=this._child)||void 0===a?void 0:a.refresh({projectLanguage:p,publicationState:y,triggerSettings:h});case 62:if(this.setBadgeVisibilityClass(),!y.openWidgets){e.next=65;break}return e.abrupt('return',this._trigger.widget.open());case 65:case'end':return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:'setBadgeVisibilityClass',value:function(){var e,t=null===(e=this._container)||void 0===e?void 0:e.classList;t&&(this._visible?(null==t||t.add('noticeable-badge_visible'),null==t||t.remove('noticeable-badge_hidden')):(null==t||t.add('noticeable-badge_hidden'),null==t||t.remove('noticeable-badge_visible')))}},{key:'_hide',value:(r=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(d(h.prototype),'_hide',this).call(this);case 2:this.setBadgeVisibilityClass();case 3:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'_show',value:(t=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(d(h.prototype),'_show',this).call(this);case 2:this.setBadgeVisibilityClass();case 3:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),h}(Nt),li=function(e){l(s,e);var t,r,i=m(s);function s(e){var t;return o(this,s),t=i.call(this,e,document.createElement('div'),(function(){t._trigger.eventRegistry.hasListener(t._trigger.widget.id,C.WIDGET_TRIGGER_VIEW_CLICKED)?t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_CLICKED):t._trigger.widget.toggle()}),(function(){return t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_MOUSE_ENTERED)}),(function(){return t.dispatchEvent(C.WIDGET_TRIGGER_VIEW_MOUSE_LEFT)}))}return u(s,[{key:'_destroy',value:function(){var e;null===(e=this._element)||void 0===e||e.removeEventListener('click',this._clickListener)}},{key:'_render',value:(r=a(n().mark((function e(t){var r,i,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._trigger.getSettings();case 2:return a=e.sent,o=null!==(r=null!==(i=t.selector)&&void 0!==i?i:a.selector)&&void 0!==r?r:it,this._element=at(o,t.root),this._element.addEventListener('click',this._clickListener),e.next=8,this.refresh();case 8:return e.abrupt('return',e.sent);case 9:case'end':return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:'_refresh',value:(t=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._trigger.getPublicationState();case 2:if(!e.sent.openWidgets){e.next=6;break}return e.next=6,this._trigger.widget.open();case 6:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),s}(At),di=function(e){l(s,e);var t,r,i=m(s);function s(){return o(this,s),i.apply(this,arguments)}return u(s,[{key:'_render',value:(r=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._element.src='https://widgets.noticeable.io/triggers/floating-button/index.html',this._element.style.height='124px',this._element.style.position='fixed',this._element.style.width='124px',this._element.style.zIndex='2147483000',document.body.appendChild(this._element),this._childConnection=v(d(s.prototype),'connectToChild',this).call(this),e.next=9,this.initializeChildConnection();case 9:return e.next=11,this.refresh();case 11:case'end':return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:'_refresh',value:(t=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._trigger.widget.getProjectLanguage(),o=this._trigger.getSettings(),s=this._trigger.widget.getWidgetData(),e.next=5,s;case 5:return e.sent.widgetViewSettings.mobile?this._element.style.zIndex='2147482999':this._element.style.zIndex='2147483000',e.next=9,a;case 9:return u=e.sent,e.next=12,o;case 12:return c=e.sent,l=null==c?void 0:c.placement,B(u)&&(l=(null==c?void 0:c.placement)===On.BOTTOM_START?On.BOTTOM_END:On.BOTTOM_START),this._element.style.bottom=null!=c&&c.verticalOffset?j(-32+c.verticalOffset):j(-32),this._element.style.left=l===On.BOTTOM_START?j(-32+(null!==(t=null==c?void 0:c.horizontalOffset)&&void 0!==t?t:20)):'unset',this._element.style.right=l===On.BOTTOM_END?j(-32+(null!==(r=null==c?void 0:c.horizontalOffset)&&void 0!==r?r:20)):'unset',e.next=20,this._trigger.getPublicationState();case 20:if(d=e.sent,c.hideBehavior!==jn.WHEN_ALL_READ||0!==d.unreadCount){e.next=26;break}return e.next=24,this.hide();case 24:case 29:e.next=33;break;case 26:if(c.hideBehavior!==jn.WHEN_ALL_SEEN||0!==d.unseenCount){e.next=31;break}return e.next=29,this.hide();case 31:return e.next=33,this.show();case 33:return e.next=35,null===(i=this._child)||void 0===i?void 0:i.refresh({projectLanguage:u,publicationState:d,triggerSettings:c});case 35:if(!d.openWidgets){e.next=38;break}return e.next=38,this._trigger.widget.open();case 38:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),s}(Nt),pi='object'==typeof global&&global&&global.Object===Object&&global,hi='object'==typeof self&&self&&self.Object===Object&&self,_i=pi||hi||Function('return this')(),fi=_i.Symbol,gi=Object.prototype,mi=gi.hasOwnProperty,vi=gi.toString,yi=fi?fi.toStringTag:void 0;var Ei=Object.prototype.toString;var bi='[object Null]',wi='[object Undefined]',Ii=fi?fi.toStringTag:void 0;function Ti(e){return null==e?void 0===e?wi:bi:Ii&&Ii in Object(e)?function(e){var t=mi.call(e,yi),n=e[yi];try{e[yi]=void 0;var r=!0}catch(e){}var i=vi.call(e);return r&&(t?e[yi]=n:delete e[yi]),i}(e):function(e){return Ei.call(e)}(e)}function Si(e){return null!=e&&'object'==typeof e}var Oi=Array.isArray;function Ci(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}function Ai(e){return e}var Ni='[object AsyncFunction]',Ri='[object Function]',Di='[object GeneratorFunction]',Pi='[object Proxy]';function ki(e){if(!Ci(e))return!1;var t=Ti(e);return t==Ri||t==Di||t==Ni||t==Pi}var xi,Li=_i['__core-js_shared__'],Ui=(xi=/[^.]+$/.exec(Li&&Li.keys&&Li.keys.IE_PROTO||''))?'Symbol(src)_1.'+xi:'';var Gi=Function.prototype.toString;function Mi(e){if(null!=e){try{return Gi.call(e)}catch(e){}try{return e+''}catch(e){}}return''}var Bi=/^\[object .+?Constructor\]$/,ji=Function.prototype,Wi=Object.prototype,Fi=ji.toString,Vi=Wi.hasOwnProperty,Hi=RegExp('^'+Fi.call(Vi).replace(/[\\^$.*+?()[\]{}|]/g,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');function Ki(e){return!(!Ci(e)||(t=e,Ui&&Ui in t))&&(ki(e)?Hi:Bi).test(Mi(e));var t}function Yi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ki(n)?n:void 0}var zi=Yi(_i,'WeakMap'),Ji=Object.create,Zi=function(){function e(){}return function(t){if(!Ci(t))return{};if(Ji)return Ji(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Xi(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var qi=Date.now;var Qi,$i,ea,ta=function(){try{var e=Yi(Object,'defineProperty');return e({},'',{}),e}catch(e){}}(),na=ta,ra=na?function(e,t){return na(e,'toString',{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ai,ia=(Qi=ra,$i=0,ea=0,function(){var e=qi(),t=16-(e-ea);if(ea=e,t>0){if(++$i>=800)return arguments[0]}else $i=0;return Qi.apply(void 0,arguments)}),aa=ia;var oa=9007199254740991,sa=/^(?:0|[1-9]\d*)$/;function ua(e,t){var n=typeof e;return!!(t=null==t?oa:t)&&('number'==n||'symbol'!=n&&sa.test(e))&&e>-1&&e%1==0&&e<t}function ca(e,t,n){'__proto__'==t&&na?na(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function la(e,t){return e===t||e!=e&&t!=t}var da=Object.prototype.hasOwnProperty;function pa(e,t,n){var r=e[t];da.call(e,t)&&la(r,n)&&(void 0!==n||t in e)||ca(e,t,n)}function ha(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?ca(n,s,u):pa(n,s,u)}return n}var _a=Math.max;function fa(e,t){return aa(function(e,t,n){return t=_a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=_a(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,Ai),e+'')}var ga=9007199254740991;function ma(e){return'number'==typeof e&&e>-1&&e%1==0&&e<=ga}function va(e){return null!=e&&ma(e.length)&&!ki(e)}var ya=Object.prototype;function Ea(e){var t=e&&e.constructor;return e===('function'==typeof t&&t.prototype||ya)}function ba(e){return Si(e)&&'[object Arguments]'==Ti(e)}var wa=Object.prototype,Ia=wa.hasOwnProperty,Ta=wa.propertyIsEnumerable,Sa=ba(function(){return arguments}())?ba:function(e){return Si(e)&&Ia.call(e,'callee')&&!Ta.call(e,'callee')},Oa=Sa;var Ca='object'==typeof exports&&exports&&!exports.nodeType&&exports,Aa=Ca&&'object'==typeof module&&module&&!module.nodeType&&module,Na=Aa&&Aa.exports===Ca?_i.Buffer:void 0,Ra=(Na?Na.isBuffer:void 0)||function(){return!1},Da={};function Pa(e){return function(t){return e(t)}}Da['[object Float32Array]']=Da['[object Float64Array]']=Da['[object Int8Array]']=Da['[object Int16Array]']=Da['[object Int32Array]']=Da['[object Uint8Array]']=Da['[object Uint8ClampedArray]']=Da['[object Uint16Array]']=Da['[object Uint32Array]']=!0,Da['[object Arguments]']=Da['[object Array]']=Da['[object ArrayBuffer]']=Da['[object Boolean]']=Da['[object DataView]']=Da['[object Date]']=Da['[object Error]']=Da['[object Function]']=Da['[object Map]']=Da['[object Number]']=Da['[object Object]']=Da['[object RegExp]']=Da['[object Set]']=Da['[object String]']=Da['[object WeakMap]']=!1;var ka='object'==typeof exports&&exports&&!exports.nodeType&&exports,xa=ka&&'object'==typeof module&&module&&!module.nodeType&&module,La=xa&&xa.exports===ka&&pi.process,Ua=function(){try{var e=xa&&xa.require&&xa.require('util').types;return e||La&&La.binding&&La.binding('util')}catch(e){}}(),Ga=Ua&&Ua.isTypedArray,Ma=Ga?Pa(Ga):function(e){return Si(e)&&ma(e.length)&&!!Da[Ti(e)]},Ba=Object.prototype.hasOwnProperty;function ja(e,t){var n=Oi(e),r=!n&&Oa(e),i=!n&&!r&&Ra(e),a=!n&&!r&&!i&&Ma(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!Ba.call(e,c)||o&&('length'==c||i&&('offset'==c||'parent'==c)||a&&('buffer'==c||'byteLength'==c||'byteOffset'==c)||ua(c,u))||s.push(c);return s}function Wa(e,t){return function(n){return e(t(n))}}var Fa=Wa(Object.keys,Object),Va=Object.prototype.hasOwnProperty;function Ha(e){return va(e)?ja(e):function(e){if(!Ea(e))return Fa(e);var t=[];for(var n in Object(e))Va.call(e,n)&&'constructor'!=n&&t.push(n);return t}(e)}var Ka=Object.prototype.hasOwnProperty;function Ya(e){if(!Ci(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ea(e),n=[];for(var r in e)('constructor'!=r||!t&&Ka.call(e,r))&&n.push(r);return n}function za(e){return va(e)?ja(e,!0):Ya(e)}var Ja=Yi(Object,'create');var Za=Object.prototype.hasOwnProperty;var Xa=Object.prototype.hasOwnProperty;function qa(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qa(e,t){for(var n=e.length;n--;)if(la(e[n][0],t))return n;return-1}qa.prototype.clear=function(){this.__data__=Ja?Ja(null):{},this.size=0},qa.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qa.prototype.get=function(e){var t=this.__data__;if(Ja){var n=t[e];return'__lodash_hash_undefined__'===n?void 0:n}return Za.call(t,e)?t[e]:void 0},qa.prototype.has=function(e){var t=this.__data__;return Ja?void 0!==t[e]:Xa.call(t,e)},qa.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ja&&void 0===t?'__lodash_hash_undefined__':t,this};var $a=Array.prototype.splice;function eo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}eo.prototype.clear=function(){this.__data__=[],this.size=0},eo.prototype.delete=function(e){var t=this.__data__,n=Qa(t,e);return!(n<0)&&(n==t.length-1?t.pop():$a.call(t,n,1),--this.size,!0)},eo.prototype.get=function(e){var t=this.__data__,n=Qa(t,e);return n<0?void 0:t[n][1]},eo.prototype.has=function(e){return Qa(this.__data__,e)>-1},eo.prototype.set=function(e,t){var n=this.__data__,r=Qa(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var to=Yi(_i,'Map');function no(e,t){var n,r,i=e.__data__;return('string'==(r=typeof(n=t))||'number'==r||'symbol'==r||'boolean'==r?'__proto__'!==n:null===n)?i['string'==typeof t?'string':'hash']:i.map}function ro(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function io(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}ro.prototype.clear=function(){this.size=0,this.__data__={hash:new qa,map:new(to||eo),string:new qa}},ro.prototype.delete=function(e){var t=no(this,e).delete(e);return this.size-=t?1:0,t},ro.prototype.get=function(e){return no(this,e).get(e)},ro.prototype.has=function(e){return no(this,e).has(e)},ro.prototype.set=function(e,t){var n=no(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ao=Wa(Object.getPrototypeOf,Object),oo='[object Object]',so=Function.prototype,uo=Object.prototype,co=so.toString,lo=uo.hasOwnProperty,po=co.call(Object);function ho(e){var t=this.__data__=new eo(e);this.size=t.size}ho.prototype.clear=function(){this.__data__=new eo,this.size=0},ho.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ho.prototype.get=function(e){return this.__data__.get(e)},ho.prototype.has=function(e){return this.__data__.has(e)},ho.prototype.set=function(e,t){var n=this.__data__;if(n instanceof eo){var r=n.__data__;if(!to||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ro(r)}return n.set(e,t),this.size=n.size,this};var _o='object'==typeof exports&&exports&&!exports.nodeType&&exports,fo=_o&&'object'==typeof module&&module&&!module.nodeType&&module,go=fo&&fo.exports===_o?_i.Buffer:void 0,mo=go?go.allocUnsafe:void 0;function vo(e,t){if(t)return e.slice();var n=e.length,r=mo?mo(n):new e.constructor(n);return e.copy(r),r}function yo(){return[]}var Eo=Object.prototype.propertyIsEnumerable,bo=Object.getOwnPropertySymbols,wo=bo?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(bo(e),(function(t){return Eo.call(e,t)})))}:yo;var Io=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)io(t,wo(e)),e=ao(e);return t}:yo;function To(e,t,n){var r=t(e);return Oi(e)?r:io(r,n(e))}function So(e){return To(e,Ha,wo)}function Oo(e){return To(e,za,Io)}var Co=Yi(_i,'DataView'),Ao=Yi(_i,'Promise'),No=Yi(_i,'Set'),Ro='[object Map]',Do='[object Promise]',Po='[object Set]',ko='[object WeakMap]',xo='[object DataView]',Lo=Mi(Co),Uo=Mi(to),Go=Mi(Ao),Mo=Mi(No),Bo=Mi(zi),jo=Ti;(Co&&jo(new Co(new ArrayBuffer(1)))!=xo||to&&jo(new to)!=Ro||Ao&&jo(Ao.resolve())!=Do||No&&jo(new No)!=Po||zi&&jo(new zi)!=ko)&&(jo=function(e){var t=Ti(e),n='[object Object]'==t?e.constructor:void 0,r=n?Mi(n):'';if(r)switch(r){case Lo:return xo;case Uo:return Ro;case Go:return Do;case Mo:return Po;case Bo:return ko}return t});var Wo=jo,Fo=Object.prototype.hasOwnProperty;var Vo=_i.Uint8Array;function Ho(e){var t=new e.constructor(e.byteLength);return new Vo(t).set(new Vo(e)),t}var Ko=/\w*$/;var Yo=fi?fi.prototype:void 0,zo=Yo?Yo.valueOf:void 0;function Jo(e,t){var n=t?Ho(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Zo='[object Boolean]',Xo='[object Date]',qo='[object Map]',Qo='[object Number]',$o='[object RegExp]',es='[object Set]',ts='[object String]',ns='[object Symbol]',rs='[object ArrayBuffer]',is='[object DataView]',as='[object Float32Array]',os='[object Float64Array]',ss='[object Int8Array]',us='[object Int16Array]',cs='[object Int32Array]',ls='[object Uint8Array]',ds='[object Uint8ClampedArray]',ps='[object Uint16Array]',hs='[object Uint32Array]';function _s(e,t,n){var r,i,a,o=e.constructor;switch(t){case rs:return Ho(e);case Zo:case Xo:return new o(+e);case is:return function(e,t){var n=t?Ho(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case as:case os:case ss:case us:case cs:case ls:case ds:case ps:case hs:return Jo(e,n);case qo:return new o;case Qo:case ts:return new o(e);case $o:return(a=new(i=e).constructor(i.source,Ko.exec(i))).lastIndex=i.lastIndex,a;case es:return new o;case ns:return r=e,zo?Object(zo.call(r)):{}}}function fs(e){return'function'!=typeof e.constructor||Ea(e)?{}:Zi(ao(e))}var gs=Ua&&Ua.isMap,ms=gs?Pa(gs):function(e){return Si(e)&&'[object Map]'==Wo(e)};var vs=Ua&&Ua.isSet,ys=vs?Pa(vs):function(e){return Si(e)&&'[object Set]'==Wo(e)},Es=1,bs=2,ws=4,Is='[object Arguments]',Ts='[object Function]',Ss='[object GeneratorFunction]',Os='[object Object]',Cs={};function As(e,t,n,r,i,a){var o,s=t&Es,u=t&bs,c=t&ws;if(n&&(o=i?n(e,r,i,a):n(e)),void 0!==o)return o;if(!Ci(e))return e;var l=Oi(e);if(l){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&'string'==typeof e[0]&&Fo.call(e,'index')&&(n.index=e.index,n.input=e.input),n}(e),!s)return Xi(e,o)}else{var d=Wo(e),p=d==Ts||d==Ss;if(Ra(e))return vo(e,s);if(d==Os||d==Is||p&&!i){if(o=u||p?{}:fs(e),!s)return u?function(e,t){return ha(e,Io(e),t)}(e,function(e,t){return e&&ha(t,za(t),e)}(o,e)):function(e,t){return ha(e,wo(e),t)}(e,function(e,t){return e&&ha(t,Ha(t),e)}(o,e))}else{if(!Cs[d])return i?e:{};o=_s(e,d,s)}}a||(a=new ho);var h=a.get(e);if(h)return h;a.set(e,o),ys(e)?e.forEach((function(r){o.add(As(r,t,n,r,e,a))})):ms(e)&&e.forEach((function(r,i){o.set(i,As(r,t,n,i,e,a))}));var _=l?void 0:(c?u?Oo:So:u?za:Ha)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(_||e,(function(r,i){_&&(r=e[i=r]),pa(o,i,As(r,t,n,i,e,a))})),o}Cs[Is]=Cs['[object Array]']=Cs['[object ArrayBuffer]']=Cs['[object DataView]']=Cs['[object Boolean]']=Cs['[object Date]']=Cs['[object Float32Array]']=Cs['[object Float64Array]']=Cs['[object Int8Array]']=Cs['[object Int16Array]']=Cs['[object Int32Array]']=Cs['[object Map]']=Cs['[object Number]']=Cs[Os]=Cs['[object RegExp]']=Cs['[object Set]']=Cs['[object String]']=Cs['[object Symbol]']=Cs['[object Uint8Array]']=Cs['[object Uint8ClampedArray]']=Cs['[object Uint16Array]']=Cs['[object Uint32Array]']=!0,Cs['[object Error]']=Cs[Ts]=Cs['[object WeakMap]']=!1;function Ns(e){return As(e,5)}var Rs,Ds=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[Rs?o:++r];if(!1===t(i[s],s,i))break}return e};function Ps(e,t,n){(void 0!==n&&!la(e[t],n)||void 0===n&&!(t in e))&&ca(e,t,n)}function ks(e,t){if(('constructor'!==t||'function'!=typeof e[t])&&'__proto__'!=t)return e[t]}function xs(e,t,n,r,i,a,o){var s=ks(e,n),u=ks(t,n),c=o.get(u);if(c)Ps(e,n,c);else{var l,d=a?a(s,u,n+'',e,t,o):void 0,p=void 0===d;if(p){var h=Oi(u),_=!h&&Ra(u),f=!h&&!_&&Ma(u);d=u,h||_||f?Oi(s)?d=s:Si(l=s)&&va(l)?d=Xi(s):_?(p=!1,d=vo(u,!0)):f?(p=!1,d=Jo(u,!0)):d=[]:function(e){if(!Si(e)||Ti(e)!=oo)return!1;var t=ao(e);if(null===t)return!0;var n=lo.call(t,'constructor')&&t.constructor;return'function'==typeof n&&n instanceof n&&co.call(n)==po}(u)||Oa(u)?(d=s,Oa(s)?d=function(e){return ha(e,za(e))}(s):Ci(s)&&!ki(s)||(d=fs(u))):p=!1}p&&(o.set(u,d),i(d,u,r,a,o),o.delete(u)),Ps(e,n,d)}}function Ls(e,t,n,r,i){e!==t&&Ds(t,(function(a,o){if(i||(i=new ho),Ci(a))xs(e,t,o,n,Ls,r,i);else{var s=r?r(ks(e,o),a,o+'',e,t,i):void 0;void 0===s&&(s=a),Ps(e,o,s)}}),za)}var Us,Gs=(Us=function(e,t,n,r){Ls(e,t,n,r)},fa((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=Us.length>3&&'function'==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!Ci(n))return!1;var r=typeof t;return!!('number'==r?va(n)&&ua(t,n.length):'string'==r&&t in n)&&la(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&Us(e,o,n,i)}return e}))),Ms=function(e){l(s,e);var t,r,i=m(s);function s(e){var t;return o(this,s),c(g(t=i.call(this,e)),'_container',void 0),c(g(t),'_containerOldStyles',void 0),t}return u(s,[{key:'container',get:function(){return this._container}},{key:'_destroy',value:function(){this._container&&(this._containerOldStyles&&(this._container.style.position=this._containerOldStyles.position,this._containerOldStyles=void 0),this._container=void 0)}},{key:'_render',value:(r=a(n().mark((function e(t){var r,i,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._trigger.getSettings();case 2:return a=e.sent,o=null!==(r=null!==(i=t.selector)&&void 0!==i?i:a.selector)&&void 0!==r?r:it,this._container=at(o,t.root),this._containerOldStyles={position:this._container.style.position},this._element.src='https://widgets.noticeable.io/triggers/icon/index.html',this._container.style.position='relative',this._container.appendChild(this._element),this._childConnection=v(d(s.prototype),'connectToChild',this).call(this),e.next=12,this.initializeChildConnection();case 12:return e.next=14,this.refresh();case 14:case'end':return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:'_refresh',value:(t=a(n().mark((function e(){var t,r,i,a,o,u,c,l,d,p,h,_,f,g,m,v,y,E,b,w,I,T,S,O,C,A;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._trigger.widget.getProjectLanguage(),a=this._trigger.getPublicationState(),o=this._trigger.getSettings(),u=0,l=0,d=0,e.t0=Ns,e.next=9,o;case 9:return e.t1=e.sent,p=(0,e.t0)(e.t1),e.next=13,i;case 13:h=e.sent,_=p.badge.placement,B(h)&&(_=p.badge.placement===bn.START?bn.END:bn.START),f=p.badge.horizontalOffset,g=p.badge.verticalOffset,m=p.badge.counter===En.NONE,v=m?10:20,y=0,E=0,b=0,w=0,I=0,e.t2=p.badge.animation,e.next=e.t2===yn.BOUNCE?28:e.t2===yn.PULSE?36:e.t2===yn.NONE?44:e.t2===yn.SHAKE?52:60;break;case 28:return u=1,c=Math.ceil((1.2*v-v)/2),l=c,d=Math.ceil(1.2*v+6.001-v),y=s.computeHeight(p.size,v,u,d,g),w=Math.max(0,g+d),I=s.computeWidth(p.size,_,v,l,c,f),e.abrupt('break',60);case 36:return u=Math.ceil(1.5*(1.625*v-v)/2+2),c=u,l=u,d=u,y=s.computeHeight(p.size,v,u,d,g),w=Math.max(0,g+d),I=s.computeWidth(p.size,_,v,l,c,f),e.abrupt('break',60);case 44:return u=0,c=0,l=0,d=0,y=s.computeHeight(p.size,v,u,d,g),w=Math.max(0,g+d),I=s.computeWidth(p.size,_,v,0,0,f),e.abrupt('break',60);case 52:return u=0,c=3,l=2,d=0,y=s.computeHeight(p.size,v,u,d,g),w=Math.max(0,g+d),I=s.computeWidth(p.size,_,v,l,c,f),e.abrupt('break',60);case 60:return T=p.size-v+f-l,_===bn.END?T<0?(E=-T,b=0):(E=0,b=f-l):_===bn.START&&(T<0?(E=0,b=0):(E=f+l,b=0)),C=0,(O=g+d)>0&&(C-=O),(S=g-v-u)<-p.size&&(C+=-p.size-S),null!==(t=this._element)&&void 0!==t&&null!==(t=t.parentElement)&&void 0!==t&&t.style&&(this._element.parentElement.style.marginTop='0px'),this._element.style.height=j(y),this._element.style.marginTop=j(C),this._element.style.width=j(I),this._element.style.zIndex='2147482942',p.marginLeft=E,p.marginRight=b,p.marginTop=w,e.next=77,a;case 77:if(A=e.sent,p.hideBehavior!==jn.WHEN_ALL_READ||0!==A.unreadCount){e.next=83;break}return e.next=81,this.hide();case 81:case 86:e.next=90;break;case 83:if(p.hideBehavior!==jn.WHEN_ALL_SEEN||0!==A.unseenCount){e.next=88;break}return e.next=86,this.hide();case 88:return e.next=90,this.show();case 90:return e.next=92,null===(r=this._child)||void 0===r?void 0:r.refresh({projectLanguage:h,publicationState:A,triggerSettings:p});case 92:if(!A.openWidgets){e.next=95;break}return e.next=95,this._trigger.widget.open();case 95:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}],[{key:'computeHeight',value:function(e,t,n,r,i){var a=i-t-n,o=i+r,s=-e;return Math.max(o,0)-Math.min(a,s)}},{key:'computeWidth',value:function(e,t,n,r,i,a){var o=e-n+a+n+i,s=e-n+a-r;t===bn.START&&(o=-a+n+i,s=-a-r);var u=e;return Math.max(o,u)-Math.min(s,0)}}]),s}(Nt),Bs=function(e){l(s,e);var t,r,i=m(s);function s(e){return o(this,s),i.call(this,e,document.createElement('div'),(function(){}),(function(){}),(function(){}))}return u(s,[{key:'_render',value:(r=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this.refresh());case 1:case'end':return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:'_refresh',value:(t=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._trigger.widget.view instanceof tn||this._trigger.widget.view instanceof ui){e.next=7;break}return e.next=3,this._trigger.getPublicationState();case 3:if(!e.sent.openWidgets){e.next=7;break}return e.next=7,this._trigger.widget.open();case 7:return e.abrupt('return',{});case 8:case'end':return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),s}(At),js=function(){function e(t,n){o(this,e),c(this,'_view',void 0),c(this,'_widget',void 0),this._view=this._createView(n),this._widget=t}var t,r,i,s;return u(e,[{key:'areAllPublicationRead',value:(s=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._widget.areAllPublicationRead());case 1:case'end':return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:'destroy',value:function(){this._view.destroy()}},{key:'eventRegistry',get:function(){return this._widget.eventRegistry}},{key:'view',get:function(){return this._view}},{key:'widget',get:function(){return this._widget}},{key:'getPublicationState',value:(i=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._widget.getPublicationState());case 1:case'end':return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:'getSettings',value:(r=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._widget.getWidgetData();case 2:return t=e.sent,e.abrupt('return',t.triggerViewSettings);case 4:case'end':return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:'hide',value:function(){this._view.hide()}},{key:'render',value:(t=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._view.render(t);case 2:case'end':return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:'show',value:function(){this._view.show()}},{key:'visible',get:function(){return this._view.visible}},{key:'_createView',value:function(e){switch(e){case'badge':return new ci(this);case'custom':return new li(this);case'floating-button':return new di(this);case'icon':return new Ms(this);case'none':return new Bs(this);default:throw new Error('Unknown trigger type: '.concat(e))}}}]),e}(),Ws=function(){function e(t,n,r,i,a,s,u){o(this,e),c(this,'_dataRepository',void 0),c(this,'_eventRegistry',void 0),c(this,'_id',void 0),c(this,'_identity',void 0),c(this,'_loading',void 0),c(this,'_opened',void 0),c(this,'_preferences',void 0),c(this,'_projectId',void 0),c(this,'_publicationFetchOptions',void 0),c(this,'_renderOptions',void 0),c(this,'_trigger',void 0),c(this,'_view',void 0),this._dataRepository=r,this._eventRegistry=i,this._id=t,this._identity=a,this._loading=!1,this._opened=!1,this._preferences=s,this._projectId=n.projectId,this._renderOptions={},this._trigger=new js(this,n.triggerView),this._view=this._createView(u)}var t,r,i,s,l,d,p,h,_,f,g,m,v,y,b,w,T,S,O,A,N;return u(e,[{key:'alreadyRendered',value:(N=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._trigger.view.alreadyRendered(t);case 2:return e.abrupt('return',this._view.alreadyRendered(t));case 3:case'end':return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:'areAllPublicationRead',value:(A=a(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPublicationData();case 2:return t=e.sent,e.next=5,this.getLastPublicationRead();case 5:return r=e.sent,e.abrupt('return',t.every((function(e){return r.has(e.id)})));case 7:case'end':return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:'close',value:(O=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._opened){e.next=2;break}return e.abrupt('return');case 2:return this._opened=!1,e.next=5,this.hide();case 5:this.eventRegistry.dispatchEvent(this.id,C.WIDGET_CLOSED);case 6:case'end':return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:'destroy',value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._eventRegistry.removeListeners(this._id),this._trigger.destroy(),this._view.destroy()}},{key:'eventRegistry',get:function(){return this._eventRegistry}},{key:'identity',get:function(){return this._identity}},{key:'opened',get:function(){return this._opened}},{key:'preferences',get:function(){return this._preferences}},{key:'view',get:function(){return this._view}},{key:'visible',get:function(){return this._trigger.visible&&this._view.visible}},{key:'getEmailSubscription',value:(S=a(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',this._dataRepository.getEmailSubscription(t,r));case 1:case'end':return e.stop()}}),e,this)}))),function(e,t){return S.apply(this,arguments)})},{key:'getProjectLanguage',value:(T=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProjectData();case 2:return e.abrupt('return',e.sent.language);case 3:case'end':return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:'getLastPublicationRead',value:function(){return this._identity.getLastPublicationRead(this._projectId)}},{key:'getLastPublicationSeen',value:function(){return this._identity.getLastPublicationSeen(this._projectId)}},{key:'getProjectData',value:(w=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getProjectData(this._projectId);case 2:if(t=e.sent){e.next=5;break}throw new Error('Error while retrieving project data: '+this._projectId);case 5:return t.id=this._projectId,e.abrupt('return',t);case 7:case'end':return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:'getPublicationData',value:(b=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getPublicationData(this._projectId,this._publicationFetchOptions);case 2:if(t=e.sent){e.next=5;break}throw new Error('Error while retrieving publication data for project '+this._projectId);case 5:return e.abrupt('return',t);case 6:case'end':return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:'getPublicationState',value:(y=a(n().mark((function e(){var t,r,i,a,o,s,u,c,l,d,p,h,_,f,g,m,v,y,E,b;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.getPublicationData(),s=this.getWidgetData(),u=this.getLastPublicationRead(),c=this.getLastPublicationSeen(),l=null,d=0,p=0,e.next=9,s;case 9:return h=e.sent,_=(null==h||null===(t=h.widgetViewSettings)||void 0===t?void 0:t.maxPublicationCount)||9,e.next=13,o;case 13:f=e.sent,g=0,m=I(f),e.prev=16,m.s();case 18:if((v=m.n()).done){e.next=28;break}if(E=v.value,!(g>=_)){e.next=22;break}return e.abrupt('break',28);case 22:(null==l||null!==(y=E.publicationTimestamp>l.publicationTimestamp)&&void 0!==y&&y)&&(l=E),u.has(E.id)||d++,c.has(E.id)||p++,g++;case 26:e.next=18;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(16),m.e(e.t0);case 33:return e.prev=33,m.f(),e.finish(33);case 36:return b=null!==(r=null===(i=l)||void 0===i?void 0:i.openWidgets)&&void 0!==r&&r,e.abrupt('return',{lastPublicationRead:u,lastPublicationSeen:c,openWidgets:b&&p>0,publicationIds:f.map((function(e){return e.id})),unreadCount:Math.min(d,_),unseenCount:c.has(null===(a=l)||void 0===a?void 0:a.id)?0:Math.min(p,_)});case 38:case'end':return e.stop()}}),e,this,[[16,30,33,36]])}))),function(){return y.apply(this,arguments)})},{key:'getTriggerSettings',value:(v=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWidgetData();case 2:return e.abrupt('return',e.sent.triggerViewSettings);case 3:case'end':return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:'getWidgetData',value:(m=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getWidgetData(this._id);case 2:if(t=e.sent){e.next=5;break}throw new Error('Error while retrieving widget data: '+this._id);case 5:return e.abrupt('return',t);case 6:case'end':return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:'hide',value:(g=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._view.visible){e.next=2;break}return e.abrupt('return');case 2:return e.next=4,this._view.hide();case 4:this.eventRegistry.dispatchEvent(this.id,C.WIDGET_HIDDEN);case 5:case'end':return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:'id',get:function(){return this._id}},{key:'open',value:(f=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._opened){e.next=2;break}return e.abrupt('return');case 2:return this._opened=!0,e.next=5,this.show();case 5:this.eventRegistry.dispatchEvent(this.id,C.WIDGET_OPENED);case 6:case'end':return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:'projectId',get:function(){return this._projectId}},{key:'toggle',value:(_=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._opened){e.next=5;break}return e.next=3,this.close();case 3:e.next=7;break;case 5:return e.next=7,this.open();case 7:case'end':return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:'trigger',get:function(){return this._trigger}},{key:'render',value:(h=a(n().mark((function e(t){var r,i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWidgetData();case 2:return o=e.sent,this._publicationFetchOptions={limit:this._view.publicationFetchLimit},null!=t&&t.labels?this._publicationFetchOptions.labels=t.labels:null!==(r=o.widgetViewSettings)&&void 0!==r&&r.labels&&(this._publicationFetchOptions.labels=null===(s=o.widgetViewSettings)||void 0===s?void 0:s.labels),null!=t&&t.segments?this._publicationFetchOptions.segments=t.segments:null!==(i=o.widgetViewSettings)&&void 0!==i&&i.segments&&(this._publicationFetchOptions.segments=o.widgetViewSettings.segments),this._publicationFetchOptions.segments?this._publicationFetchOptions.segments=[].concat(E(this._publicationFetchOptions.segments),['Noticeable:Widgets:'.concat(this._id)]):this._publicationFetchOptions.segments=['Noticeable:Widgets:'.concat(this._id)],null!=t&&t.aggregation?this._publicationFetchOptions.aggregation=t.aggregation:null!==(a=o.widgetViewSettings)&&void 0!==a&&a.aggregation?this._publicationFetchOptions.aggregation=o.widgetViewSettings.aggregation:this._view.aggregationMethod&&(this._publicationFetchOptions.aggregation=this._view.aggregationMethod),this._renderOptions=t||{},e.next=11,this._view.render(t);case 11:case'end':return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:'refresh',value:(p=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._opened){e.next=7;break}return e.next=3,this.trigger.getPublicationState();case 3:if(!((t=e.sent).unseenCount>0)){e.next=7;break}return e.next=7,this.setPublicationSeen(t.publicationIds,{merge:!0});case 7:return e.next=9,Promise.allSettled([this.trigger.view.refresh(),this._view.refresh()]);case 9:case'end':return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:'renderOptions',get:function(){return this._renderOptions}},{key:'reset',value:(d=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.destroy(!1),e.abrupt('return',this.render(this._renderOptions));case 2:case'end':return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:'setPublicationRead',value:(l=a(n().mark((function e(t,r){var i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPublicationState();case 2:return i=e.sent,a=this._identity.setLastPublicationRead(this._projectId,t,r),o=this.trigger.view.refresh(),e.next=7,Promise.allSettled([a,o]);case 7:return e.next=9,this.getPublicationState();case 9:return s=e.sent,i.unreadCount!==s.unreadCount&&this._eventRegistry.dispatchEvent(this.id,C.WIDGET_PUBLICATION_UNREAD_COUNT_CHANGED,{value:s.unreadCount}),e.abrupt('return',a);case 12:case'end':return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:'setPublicationSeen',value:(s=a(n().mark((function e(t,r){var i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPublicationState();case 2:return i=e.sent,a=this._identity.setLastPublicationSeen(this._projectId,t,r),o=this.trigger.view.refresh(),e.next=7,Promise.allSettled([a,o]);case 7:return e.next=9,this.getPublicationState();case 9:return s=e.sent,i.unseenCount!==s.unseenCount&&this._eventRegistry.dispatchEvent(this.id,C.WIDGET_PUBLICATION_UNSEEN_COUNT_CHANGED,{value:s.unseenCount}),e.abrupt('return',a);case 12:case'end':return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:'show',value:(i=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._view.visible){e.next=2;break}return e.abrupt('return');case 2:return e.next=4,this._view.show();case 4:this.eventRegistry.dispatchEvent(this.id,C.WIDGET_VISIBLE);case 5:case'end':return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:'updateTriggerViewSettings',value:(r=a(n().mark((function e(t,r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getWidgetData(t);case 2:(i=e.sent)&&(i.triggerViewSettings=Gs(i.triggerViewSettings,r,(function(e,t){if(Oi(e)&&Oi(t))return t})));case 4:case'end':return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:'updateWidgetViewSettings',value:(t=a(n().mark((function e(t,r){var i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataRepository.getWidgetData(t);case 2:(i=e.sent)&&(i.widgetViewSettings=Gs(i.widgetViewSettings,r,(function(e,t){if(Oi(e)&&Oi(t))return t})));case 4:case'end':return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:'_createView',value:function(e){switch(e){case'email-preference-center':return new Qt(this);case'email-subscription-form':return new $t(this);case'modal':return new en(this);case'newspage-embed':return new tn(this);case'popup':return new si(this);case'top-banner':return new ui(this);default:throw new Error('Unknown view type: '.concat(e))}}},{key:'_updateViewsWithNewIdentity',value:function(){var e=this.identity.getUserId(this._projectId),t=this.identity.getUserSsoToken(this._projectId),n=this.identity.getUserTraits(this._projectId);this._trigger.view._onIdentityChange(e,t,n),this._view._onIdentityChange(e,t,n)}}]),e}(),Fs=function(){function e(){o(this,e),c(this,'version','3.1.0 (commit bcfe950)'),c(this,'_autoRefresher',void 0),c(this,'_dataRepository',void 0),c(this,'_eventRegistry',void 0),c(this,'_identity',void 0),c(this,'_preferences',void 0),c(this,'_renderedWidgets',void 0),c(this,'_widgets',void 0),ue.setActive('production'),this._eventRegistry=new A,this._preferences={crossDeviceSynchronization:void 0,endpoints:{forms:'https://forms.noticeable.io',pipeline:'https://pipeline.noticeable.io',widgetsData:'https://data.widgets.noticeable.ipregistry.co'},firstPartyCookies:{localStorage:!0,retentionPeriod:31536e6}},this._renderedWidgets=new Set,this._widgets=new Map,this._autoRefresher=new P(this._widgets),this._dataRepository=new W(this._autoRefresher,this._preferences.endpoints),this._identity=new nt(this._dataRepository,this._preferences)}var t,i,s,l,d,p,h,_,f,g,m;return u(e,[{key:'initialize',value:(m=a(n().mark((function t(r){var i,a,o,s,u,c,l,d,p,h,_,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!/baidu|bing|bot|duckduckbot|exabot|facebook|google|ia_archiver|msn|qwant|teoma|slurp|sogou|yandex/i.test(navigator.userAgent)){t.next=3;break}return R.warn('Noticeable SDK initialization aborted because the request seems to come from a bot.'),t.abrupt('return');case 3:window.noticeable=this,i=[],a=I(r),t.prev=6,a.s();case 8:if((o=a.n()).done){t.next=19;break}if('set'!==(s=o.value)[0]||'preferences'!==s[1]){t.next=16;break}return s.shift(),t.next=14,this._reifySetCommand(s);case 14:t.next=17;break;case 16:i.push(s);case 17:t.next=8;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),a.e(t.t0);case 24:return t.prev=24,a.f(),t.finish(24);case 27:for(this._identity.initialize(),u=[],l=0,d=i;l<d.length;l++)'ready'===(p=d[l])[0]?(void 0!==c&&R.warn('Multiple \'ready\' callback registered. Only the last one before the SDK initialization will be used'),p.shift(),c=e._reifyReadyCommand(p)):u.push(p);void 0!==c&&c(),h=0,_=u;case 32:if(!(h<_.length)){t.next=39;break}return f=_[h],t.next=36,this._reifyCommand(f);case 36:h++,t.next=32;break;case 39:return t.abrupt('return');case 40:case'end':return t.stop()}}),t,this,[[6,21,24,27]])}))),function(e){return m.apply(this,arguments)})},{key:'debug',value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e._checkCommandParameterType('debug',t,0,1,'boolean'),R.setLevel(t?N.DEBUG:N.INFO),R.info('Debug mode '.concat(t?'enabled':'disabled'))}},{key:'destroy',value:(g=a(n().mark((function t(r,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._checkCommandParameterType('destroy',r,0,2,'string'),e._checkCommandParameterType('destroy',i,1,2,'string'),R.debug('Calling destroy('.concat(r,', ').concat(i,')')),t.t0=r,t.next=t.t0===rt.WIDGET?6:9;break;case 6:return t.next=8,this._destroyWidget(i);case 8:return t.abrupt('return');case 9:O('Unknown component: '.concat(r));case 10:case'end':return t.stop()}}),t,this)}))),function(e,t){return g.apply(this,arguments)})},{key:'do',value:function(t,n){var r,i,a,o,s,u;switch(e._checkCommandParameterType('do',t,0,2,'string'),e._checkCommandParameterType('do',n,1,2),Object.values(q).includes(t)||O('Unknown \'do\' action: '.concat(t)),R.debug('Calling do('.concat(t,', ').concat(JSON.stringify(n),')')),t){case q.IDENTITY_PUBLICATION_READ_INVALIDATE:return void this._identity.clearLastPublicationRead();case q.IDENTITY_PUBLICATION_SEEN_INVALIDATE:return void this._identity.clearLastPublicationSeen();case q.PROJECT_DATA_INVALIDATE:return void this._dataRepository.invalidateProjectData(n);case q.PUBLICATION_DATA_INVALIDATE:return void this._dataRepository.invalidatePublicationData(n);case q.WIDGET_DATA_INVALIDATE:return void this._dataRepository.invalidateWidgetData(n);case q.WIDGET_CLOSE:return void(null===(r=this._getWidget(n,'do',t))||void 0===r||r.close());case q.WIDGET_HIDE:return void(null===(i=this._getWidget(n,'do',t))||void 0===i||i.hide());case q.WIDGET_OPEN:return void(null===(a=this._getWidget(n,'do',t))||void 0===a||a.open());case q.WIDGET_REFRESH:return void(null===(o=this._getWidget(n,'do',t))||void 0===o||o.refresh());case q.WIDGET_SHOW:return void(null===(s=this._getWidget(n,'do',t))||void 0===s||s.show());case q.WIDGET_TOGGLE:return void(null===(u=this._getWidget(n,'do',t))||void 0===u||u.toggle())}R.warn('Unknown property for \'do\' action: '.concat(t))}},{key:'help',value:function(){R.info('Visit the next page to learn more about the Noticeable JavaScript SDK:\nhttps://help.noticeable.io/en-us/article/how-to-use-noticeable-javascript-sdk-7k5kc2')}},{key:'get',value:function(){var t=a(n().mark((function t(r,i){var a,o,s,u,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._checkCommandParameterType('is',r,0,2,'string'),e._checkCommandParameterType('is',i,1,2,'string'),R.debug('Calling get('.concat(r,', ').concat(i,')')),t.t0=r,t.next=t.t0===Q.WIDGET_PUBLICATION_READ?6:t.t0===Q.WIDGET_PUBLICATION_SEEN?7:t.t0===Q.WIDGET_PUBLICATION_UNREAD_COUNT?8:t.t0===Q.WIDGET_PUBLICATION_UNSEEN_COUNT?12:16;break;case 6:return t.abrupt('return',null===(a=this._getWidget(i,'get',r))||void 0===a?void 0:a.getLastPublicationRead());case 7:return t.abrupt('return',null===(o=this._getWidget(i,'get',r))||void 0===o?void 0:o.getLastPublicationSeen());case 8:return t.next=10,null===(s=this._getWidget(i,'get',r))||void 0===s?void 0:s.getPublicationState();case 10:return c=t.sent,t.abrupt('return',c.unreadCount);case 12:return t.next=14,null===(u=this._getWidget(i,'get',r))||void 0===u?void 0:u.getPublicationState();case 14:return c=t.sent,t.abrupt('return',c.unseenCount);case 16:return R.warn('Unknown get action: '.concat(r)),t.abrupt('return',null);case 18:case'end':return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:'identify',value:(f=a(n().mark((function t(r,i){var a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R.debug('Calling identity('.concat(r,', ').concat(JSON.stringify(i),')')),e._checkCommandParameterType('identify',r,0,2,'string'),'string'==typeof i?e._checkCommandParameterType('identify',i,1,2,'string'):e._checkCommandParameterType('identify',i,1,2,'object'),t.next=5,this._identity.update(r,i);case 5:a=I(this._widgets.values());try{for(a.s();!(o=a.n()).done;)o.value._updateViewsWithNewIdentity()}catch(e){a.e(e)}finally{a.f()}case 7:case'end':return t.stop()}}),t,this)}))),function(e,t){return f.apply(this,arguments)})},{key:'is',value:function(t,n){var r,i,a,o,s,u,c,l;switch(e._checkCommandParameterType('is',t,0,2,'string'),e._checkCommandParameterType('is',n,1,2,'string'),R.debug('Calling is('.concat(t,', ').concat(n,')')),t){case $.WIDGET_CLOSED:return null!==(r=!(null!==(i=this._getWidget(n,'is',t))&&void 0!==i&&i.opened))&&void 0!==r&&r;case $.WIDGET_HIDDEN:return null!==(a=!(null!==(o=this._getWidget(n,'is',t))&&void 0!==o&&o.visible))&&void 0!==a&&a;case $.WIDGET_OPENED:return null!==(s=null===(u=this._getWidget(n,'is',t))||void 0===u?void 0:u.opened)&&void 0!==s&&s;case $.WIDGET_VISIBLE:return null!==(c=null===(l=this._getWidget(n,'is',t))||void 0===l?void 0:l.visible)&&void 0!==c&&c}return R.warn('Unknown property for is action: '.concat(t)),!1}},{key:'off',value:function(e,t){if(e||t)return e&&t?(R.debug('Calling off('.concat(e,', ').concat(t,')')),void this._eventRegistry.removeListener(t,e)):e&&!t?(R.debug('Calling off('.concat(e,')')),void this._eventRegistry.removeListenersByEventType(e)):(R.debug('Calling off('.concat(e,', ').concat(t,')')),void this._eventRegistry.removeListeners(t));R.debug('Calling off()');var n,r=I(this._widgets.keys());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._eventRegistry.removeListeners(i)}}catch(e){r.e(e)}finally{r.f()}}},{key:'on',value:function(t,n,r){e._checkCommandParameterType('on',t,0,3,'string'),e._checkCommandParameterType('on',n,1,3,'string'),e._checkCommandParameterType('on',r,2,3,'function'),R.debug('Calling on('.concat(t,', ').concat(n,', callback)')),this._eventRegistry.setListener(t,n,r)}},{key:'ready',value:function(t){e._checkCommandParameterType('ready',t,0,1,'function'),R.warn('Skipping ready callback invoked after SDK initialization')}},{key:'render',value:(_=a(n().mark((function t(r,i){var a,o=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=o.length>2&&void 0!==o[2]?o[2]:{},e._checkCommandParameterType('render',r,0,3,'string'),e._checkCommandParameterType('render',i,1,3,'string'),e._checkCommandParameterType('render',a,2,3,'object'),R.debug('Calling render(%s, %s, %o)',r,i,a),t.t0=r,t.next=t.t0===rt.WIDGET?8:11;break;case 8:return t.next=10,this._renderWidget(i,a);case 10:return t.abrupt('return');case 11:O('Unknown component: '.concat(r));case 12:case'end':return t.stop()}}),t,this)}))),function(e,t){return _.apply(this,arguments)})},{key:'refresh',value:(h=a(n().mark((function e(){var t,r,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=I(this._widgets);try{for(r.s();!(i=r.n()).done;)a=i.value,t.push(a[1].refresh())}catch(e){r.e(e)}finally{r.f()}return e.abrupt('return',Promise.all(t));case 4:case'end':return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:'reset',value:(p=a(n().mark((function e(t){var r,i,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.debug('Calling reset()'),this._identity.reset(t),r=[],i=I(this._widgets);try{for(i.s();!(a=i.n()).done;)(o=y(a.value,2))[0],s=o[1],t&&s.projectId!==t||r.push(s.reset())}catch(e){i.e(e)}finally{i.f()}return e.abrupt('return',Promise.all(r));case 6:case'end':return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:'safe',value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e._checkCommandParameterType('debug',t,0,1,'boolean'),R.debug('Calling safe('.concat(t,')')),R.setLevel(N.ERROR)}},{key:'set',value:(d=a(n().mark((function t(r,i,a,o){var s,u,c,l,d,p,h,_,f,g,m,v,y,E,b,w,T,S,O,C,A,D;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._checkCommandParameterType('set',i,1,4),R.debug('Calling set(%s, %s, %o)',r,i,a),t.t0=r,t.next=t.t0===ee.LOG_LEVEL?5:t.t0===ee.PREFERENCES?9:t.t0===ee.WIDGET_PUBLICATION_READ||t.t0===ee.WIDGET_PUBLICATION_SEEN?19:t.t0===ee.WIDGET_TRIGGER_VIEW_SETTINGS?35:t.t0===ee.WIDGET_WIDGET_VIEW_SETTINGS?41:47;break;case 5:return'string'==typeof(g=i)&&['debug','info','warning','error'].includes(g)||R.error('Unknown log level: '+g+'. Must be debug, info, warning or error'),R.setLevel('error'===g?N.ERROR:'warning'===g?N.WARNING:'info'===g?N.INFO:N.DEBUG),t.abrupt('break',47);case 9:if('boolean'==typeof(null==i||null===(s=i.cacheControl)||void 0===s?void 0:s.projects)&&this._dataRepository.setProjectCacheControl(i.cacheControl.projects),'boolean'==typeof(null==i||null===(u=i.cacheControl)||void 0===u?void 0:u.publications)&&this._dataRepository.setPublicationCacheControl(i.cacheControl.publications),'boolean'==typeof(null==i||null===(c=i.cacheControl)||void 0===c?void 0:c.widgets)&&this._dataRepository.setWidgetCacheControl(i.cacheControl.widgets),'boolean'==typeof(null==i?void 0:i.crossDeviceSynchronization)&&(this._preferences.crossDeviceSynchronization=i.crossDeviceSynchronization),'string'==typeof(null==i||null===(l=i.endpoints)||void 0===l?void 0:l.forms)){this._preferences.endpoints.forms=i.endpoints.forms,m=I(this._widgets.values());try{for(m.s();!(v=m.n()).done;)(y=v.value).trigger.view instanceof Nt&&(null===(E=y.trigger.view)||void 0===E||null===(E=E.child)||void 0===E||E.setSdkPreferences(this._preferences)),y.view instanceof Dt&&(null===(b=y.view)||void 0===b||null===(b=b.child)||void 0===b||b.setSdkPreferences(this._preferences))}catch(e){m.e(e)}finally{m.f()}}if('string'==typeof(null==i||null===(d=i.endpoints)||void 0===d?void 0:d.pipeline)&&(this._preferences.endpoints.pipeline=i.endpoints.pipeline),'string'==typeof(null==i||null===(p=i.endpoints)||void 0===p?void 0:p.widgetsData)){this._preferences.endpoints.widgetsData=i.endpoints.widgetsData,w=I(this._widgets.values());try{for(w.s();!(T=w.n()).done;)(S=T.value).trigger.view instanceof Nt&&(null===(O=S.trigger.view)||void 0===O||null===(O=O.child)||void 0===O||O.setSdkPreferences(this._preferences)),S.view instanceof Dt&&(null===(C=S.view)||void 0===C||null===(C=C.child)||void 0===C||C.setSdkPreferences(this._preferences))}catch(e){w.e(e)}finally{w.f()}}return'boolean'==typeof(null==i||null===(h=i.firstPartyCookies)||void 0===h?void 0:h.localStorage)&&(this._preferences.firstPartyCookies.localStorage=i.firstPartyCookies.localStorage),'number'==typeof(null==i||null===(_=i.firstPartyCookies)||void 0===_?void 0:_.retentionPeriod)&&(this._preferences.firstPartyCookies.retentionPeriod=i.firstPartyCookies.retentionPeriod),t.abrupt('return');case 19:if('string'==typeof a&&(a=[a]),'string'==typeof a||Array.isArray(a)){t.next=23;break}return R.error('Invalid value \''.concat(a,'\' set for action \'').concat(r,'\'')),t.abrupt('return');case 23:if(!(f=this._getWidget(i,'set',r))){t.next=34;break}if(r!==ee.WIDGET_PUBLICATION_READ){t.next=30;break}return t.next=28,f.setPublicationRead(a,{merge:null!==(A=null==o?void 0:o.merge)&&void 0!==A&&A});case 28:t.next=33;break;case 30:if(r!==ee.WIDGET_PUBLICATION_SEEN){t.next=33;break}return t.next=33,f.setPublicationSeen(a,{merge:null!==(D=null==o?void 0:o.merge)&&void 0!==D&&D});case 33:return t.abrupt('return',f.refresh());case 34:return t.abrupt('return');case 35:if(!(f=this._getWidget(i,'set',r))){t.next=40;break}return t.next=39,f.updateTriggerViewSettings(i,a);case 39:return t.abrupt('return',f.refresh());case 40:return t.abrupt('return');case 41:if(!(f=this._getWidget(i,'set',r))){t.next=46;break}return t.next=45,f.updateWidgetViewSettings(i,a);case 45:return t.abrupt('return',f.refresh());case 46:return t.abrupt('return');case 47:R.warn('Unknown set action \''.concat(r,'\''));case 48:case'end':return t.stop()}}),t,this)}))),function(e,t,n,r){return d.apply(this,arguments)})},{key:'_destroyWidget',value:(l=a(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._widgets.get(t)){e.next=4;break}return R.warn('Could not find widget '.concat(t,' for destruction')),e.abrupt('return');case 4:return e.next=6,r.destroy();case 6:this._widgets.delete(t),this._renderedWidgets.delete(t);case 8:case'end':return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:'_getWidget',value:function(e,t,n){var r=this._widgets.get(e);if(r)return r;R.debug('Could not find widget '.concat(e,' for ').concat(t,' ').concat(n))}},{key:'_renderWidget',value:(s=a(n().mark((function e(t,i){var a,o,s,u,c,l,d,p,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.segments)for(Array.isArray(i.segments)||O('Incorrect segments value for widget \''.concat(t,'\': expected array, received ')+r(i.segments)),a=0,o=i.segments;a<o.length;a++)'string'!=typeof(s=o[a])&&O('Invalid segment value for widget \''.concat(t,'\': expected string, received ')+r(s));if(this._renderedWidgets.has(t)){e.next=39;break}return this._renderedWidgets.add(t),e.next=5,this._dataRepository.getWidgetData(t);case 5:if(u=e.sent){e.next=9;break}return this.abortWidgetRendering(t,'Skipping widget rendering due to missing widget data for ID '.concat(t,'. Are you sure your widget ID is correct?'),S.WIDGET_DATA_MISSING),e.abrupt('return');case 9:if(u.enabled){e.next=12;break}return this.abortWidgetRendering(t,'Skipping rendering because widget '.concat(t,' is disabled'),S.WIDGET_DISABLED),e.abrupt('return');case 12:if('boolean'!=typeof u.widgetViewSettings.mobile||u.widgetViewSettings.mobile||!M()){e.next=15;break}return this.abortWidgetRendering(t,'Skipping rendering for widget '.concat(t,' because the current device is detected as a mobile and the widget is configured to not display on such devices'),S.WIDGET_DISABLED_MOBILE),e.abrupt('return');case 15:return e.next=17,this._dataRepository.getProjectData(u.projectId);case 17:if(c=e.sent){e.next=21;break}return this.abortWidgetRendering(t,'Skipping rendering due to missing project data for widget '.concat(t),S.PROJECT_DATA_MISSING),e.abrupt('return');case 21:if(n=u.widgetView,l=Vn[n],Ne.find(c.planId).includes(l)){e.next=25;break}return this.abortWidgetRendering(t,'Skipping rendering for widget '.concat(t,' of type ').concat(u.widgetView,' because you need to upgrade to the ').concat(Ne.include(l)[0].title,' plan or higher to get this widget working.'),S.PLAN_UPGRADE_REQUIRED),e.abrupt('return');case 25:if(d=new Ws(t,u,this._dataRepository,this._eventRegistry,this._identity,this._preferences,u.widgetView),this._widgets.set(t,d),!(p=this._identity.getPendingIdentityUpdate(u.projectId))){e.next=33;break}return e.next=31,p;case 31:e.next=34;break;case 33:this._identity.createOrExtendUserId(u.projectId);case 34:return e.next=36,d.render(i);case 36:d._updateViewsWithNewIdentity(),e.next=40;break;case 39:null===(h=this._widgets.get(t))||void 0===h||h.alreadyRendered(i);case 40:case'end':return e.stop()}var n}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:'abortWidgetRendering',value:function(e,t,n){R.warn(t),this._renderedWidgets.delete(e),this._eventRegistry.dispatchEvent(e,C.WIDGET_RENDERING_ABORTED,{reason:n})}},{key:'_reifyCommand',value:(i=a(n().mark((function t(r){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=r[0],r.shift(),t.t0=i,t.next='debug'===t.t0?5:'destroy'===t.t0?7:'do'===t.t0?9:'help'===t.t0?11:'identify'===t.t0?13:'off'===t.t0?15:'on'===t.t0?17:'ready'===t.t0?19:'render'===t.t0?21:'reset'===t.t0?24:'safe'===t.t0?26:'set'===t.t0?28:30;break;case 5:return this._reifyDebugCommand(r),t.abrupt('break',31);case 7:return this._reifyDestroyCommand(r),t.abrupt('break',31);case 9:return this._reifyDoCommand(r),t.abrupt('break',31);case 11:return this._reifyHelpCommand(r),t.abrupt('break',31);case 13:return this._reifyIdentifyCommand(r),t.abrupt('break',31);case 15:return this._reifyOffCommand(r),t.abrupt('break',31);case 17:return this._reifyOnCommand(r),t.abrupt('break',31);case 19:return e._reifyReadyCommand(r),t.abrupt('break',31);case 21:return t.next=23,this._reifyRenderCommand(r);case 23:return t.abrupt('break',31);case 24:return this._reifyResetCommand(r),t.abrupt('break',31);case 26:return this._reifySafeCommand(r),t.abrupt('break',31);case 28:return this._reifySetCommand(r),t.abrupt('break',31);case 30:R.error('Unknown command:',i);case 31:case'end':return t.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)})},{key:'_reifyDebugCommand',value:function(t){e._checkCommandArity('debug',t,0,1),0===t.length?this.debug():this.debug(t[0])}},{key:'_reifyDestroyCommand',value:function(t){e._checkCommandArity('destroy',t,2),this.destroy(t[0],t[1])}},{key:'_reifyDoCommand',value:function(t){e._checkCommandArity('do',t,2),this.do(t[0],t[1])}},{key:'_reifyHelpCommand',value:function(t){e._checkCommandArity('help',t,0),this.help()}},{key:'_reifyIdentifyCommand',value:function(t){e._checkCommandArity('identify',t,2),this.identify(t[0],t[1])}},{key:'_reifyIsCommand',value:function(t){e._checkCommandArity('is',t,2),this.is(t[0],t[1])}},{key:'_reifyOffCommand',value:function(t){e._checkCommandArity('off',t,0,2),0!==t.length?1!==t.length?this.off(t[0],t[1]):this.off(t[0]):this.off()}},{key:'_reifyOnCommand',value:function(t){e._checkCommandArity('on',t,3),this.on(t[0],t[1],t[2])}},{key:'_reifyRenderCommand',value:(t=a(n().mark((function t(r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._checkCommandArity('render',r,2,3),t.abrupt('return',this.render(r[0],r[1],3===r.length?r[2]:void 0));case 2:case'end':return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:'_reifyResetCommand',value:function(t){return e._checkCommandArity('reset',t,0,1),0===t.length?this.reset():this.reset(t[0])}},{key:'_reifySafeCommand',value:function(t){e._checkCommandArity('safe',t,0,1),0===t.length?this.safe():this.safe(t[0])}},{key:'_reifySetCommand',value:function(t){return e._checkCommandArity('set',t,2,4),this.set(t[0],t[1],t[2],t[3])}}],[{key:'_checkCommandArity',value:function(e,t,n,r){void 0===r&&(r=n),(t.length<n||t.length>r)&&O('Invalid arity for command \''.concat(e,'\': expected between ').concat(n,' and ').concat(r,' arguments but received ').concat(t.length))}},{key:'_checkCommandParameterType',value:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=r(t);n>=i||void 0!==a&&o!==a&&O('Invalid argument type at index '.concat(n,' for command \'').concat(e,'\': expected ').concat(a,' but received ').concat(o))}},{key:'_reifyReadyCommand',value:function(t){return e._checkCommandArity('ready',t,1),t[0]}}]),e}();if(window.noticeable instanceof Fs)console.error('Noticeable SDK included twice');else{var Vs=window.noticeable;(new Fs).initialize(Vs)}}();
